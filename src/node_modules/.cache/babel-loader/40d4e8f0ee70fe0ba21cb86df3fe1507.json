{"ast":null,"code":"/*!\n * wavesurfer.js 5.2.0 (2021-08-16)\n * https://wavesurfer-js.org\n * @license BSD-3-Clause\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n  if (typeof exports === 'object' && typeof module === 'object') module.exports = factory();else if (typeof define === 'function' && define.amd) define(\"WaveSurfer\", [], factory);else if (typeof exports === 'object') exports[\"WaveSurfer\"] = factory();else root[\"WaveSurfer\"] = factory();\n})(self, function () {\n  return (\n    /******/\n    (() => {\n      // webpackBootstrap\n\n      /******/\n      var __webpack_modules__ = {\n        /***/\n        \"./src/drawer.canvasentry.js\":\n        /*!***********************************!*\\\n          !*** ./src/drawer.canvasentry.js ***!\n          \\***********************************/\n\n        /***/\n        (module, exports, __webpack_require__) => {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          var _style = _interopRequireDefault(__webpack_require__(\n          /*! ./util/style */\n          \"./src/util/style.js\"));\n\n          var _getId = _interopRequireDefault(__webpack_require__(\n          /*! ./util/get-id */\n          \"./src/util/get-id.js\"));\n\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            return Constructor;\n          }\n          /**\n           * The `CanvasEntry` class represents an element consisting of a wave `canvas`\n           * and an (optional) progress wave `canvas`.\n           *\n           * The `MultiCanvas` renderer uses one or more `CanvasEntry` instances to\n           * render a waveform, depending on the zoom level.\n           */\n\n\n          var CanvasEntry = /*#__PURE__*/function () {\n            function CanvasEntry() {\n              _classCallCheck(this, CanvasEntry);\n              /**\n               * The wave node\n               *\n               * @type {HTMLCanvasElement}\n               */\n\n\n              this.wave = null;\n              /**\n               * The wave canvas rendering context\n               *\n               * @type {CanvasRenderingContext2D}\n               */\n\n              this.waveCtx = null;\n              /**\n               * The (optional) progress wave node\n               *\n               * @type {HTMLCanvasElement}\n               */\n\n              this.progress = null;\n              /**\n               * The (optional) progress wave canvas rendering context\n               *\n               * @type {CanvasRenderingContext2D}\n               */\n\n              this.progressCtx = null;\n              /**\n               * Start of the area the canvas should render, between 0 and 1\n               *\n               * @type {number}\n               */\n\n              this.start = 0;\n              /**\n               * End of the area the canvas should render, between 0 and 1\n               *\n               * @type {number}\n               */\n\n              this.end = 1;\n              /**\n               * Unique identifier for this entry\n               *\n               * @type {string}\n               */\n\n              this.id = (0, _getId.default)(typeof this.constructor.name !== 'undefined' ? this.constructor.name.toLowerCase() + '_' : 'canvasentry_');\n              /**\n               * Canvas 2d context attributes\n               *\n               * @type {object}\n               */\n\n              this.canvasContextAttributes = {};\n            }\n            /**\n             * Store the wave canvas element and create the 2D rendering context\n             *\n             * @param {HTMLCanvasElement} element The wave `canvas` element.\n             */\n\n\n            _createClass(CanvasEntry, [{\n              key: \"initWave\",\n              value: function initWave(element) {\n                this.wave = element;\n                this.waveCtx = this.wave.getContext('2d', this.canvasContextAttributes);\n              }\n              /**\n               * Store the progress wave canvas element and create the 2D rendering\n               * context\n               *\n               * @param {HTMLCanvasElement} element The progress wave `canvas` element.\n               */\n\n            }, {\n              key: \"initProgress\",\n              value: function initProgress(element) {\n                this.progress = element;\n                this.progressCtx = this.progress.getContext('2d', this.canvasContextAttributes);\n              }\n              /**\n               * Update the dimensions\n               *\n               * @param {number} elementWidth Width of the entry\n               * @param {number} totalWidth Total width of the multi canvas renderer\n               * @param {number} width The new width of the element\n               * @param {number} height The new height of the element\n               */\n\n            }, {\n              key: \"updateDimensions\",\n              value: function updateDimensions(elementWidth, totalWidth, width, height) {\n                // where the canvas starts and ends in the waveform, represented as a\n                // decimal between 0 and 1\n                this.start = this.wave.offsetLeft / totalWidth || 0;\n                this.end = this.start + elementWidth / totalWidth; // set wave canvas dimensions\n\n                this.wave.width = width;\n                this.wave.height = height;\n                var elementSize = {\n                  width: elementWidth + 'px'\n                };\n                (0, _style.default)(this.wave, elementSize);\n\n                if (this.hasProgressCanvas) {\n                  // set progress canvas dimensions\n                  this.progress.width = width;\n                  this.progress.height = height;\n                  (0, _style.default)(this.progress, elementSize);\n                }\n              }\n              /**\n               * Clear the wave and progress rendering contexts\n               */\n\n            }, {\n              key: \"clearWave\",\n              value: function clearWave() {\n                // wave\n                this.waveCtx.clearRect(0, 0, this.waveCtx.canvas.width, this.waveCtx.canvas.height); // progress\n\n                if (this.hasProgressCanvas) {\n                  this.progressCtx.clearRect(0, 0, this.progressCtx.canvas.width, this.progressCtx.canvas.height);\n                }\n              }\n              /**\n               * Set the fill styles for wave and progress\n               *\n               * @param {string} waveColor Fill color for the wave canvas\n               * @param {?string} progressColor Fill color for the progress canvas\n               */\n\n            }, {\n              key: \"setFillStyles\",\n              value: function setFillStyles(waveColor, progressColor) {\n                this.waveCtx.fillStyle = waveColor;\n\n                if (this.hasProgressCanvas) {\n                  this.progressCtx.fillStyle = progressColor;\n                }\n              }\n              /**\n               * Set the canvas transforms for wave and progress\n               *\n               * @param {boolean} vertical Whether to render vertically\n               */\n\n            }, {\n              key: \"applyCanvasTransforms\",\n              value: function applyCanvasTransforms(vertical) {\n                if (vertical) {\n                  // Reflect the waveform across the line y = -x\n                  this.waveCtx.setTransform(0, 1, 1, 0, 0, 0);\n\n                  if (this.hasProgressCanvas) {\n                    this.progressCtx.setTransform(0, 1, 1, 0, 0, 0);\n                  }\n                }\n              }\n              /**\n               * Draw a rectangle for wave and progress\n               *\n               * @param {number} x X start position\n               * @param {number} y Y start position\n               * @param {number} width Width of the rectangle\n               * @param {number} height Height of the rectangle\n               * @param {number} radius Radius of the rectangle\n               */\n\n            }, {\n              key: \"fillRects\",\n              value: function fillRects(x, y, width, height, radius) {\n                this.fillRectToContext(this.waveCtx, x, y, width, height, radius);\n\n                if (this.hasProgressCanvas) {\n                  this.fillRectToContext(this.progressCtx, x, y, width, height, radius);\n                }\n              }\n              /**\n               * Draw the actual rectangle on a `canvas` element\n               *\n               * @param {CanvasRenderingContext2D} ctx Rendering context of target canvas\n               * @param {number} x X start position\n               * @param {number} y Y start position\n               * @param {number} width Width of the rectangle\n               * @param {number} height Height of the rectangle\n               * @param {number} radius Radius of the rectangle\n               */\n\n            }, {\n              key: \"fillRectToContext\",\n              value: function fillRectToContext(ctx, x, y, width, height, radius) {\n                if (!ctx) {\n                  return;\n                }\n\n                if (radius) {\n                  this.drawRoundedRect(ctx, x, y, width, height, radius);\n                } else {\n                  ctx.fillRect(x, y, width, height);\n                }\n              }\n              /**\n               * Draw a rounded rectangle on Canvas\n               *\n               * @param {CanvasRenderingContext2D} ctx Canvas context\n               * @param {number} x X-position of the rectangle\n               * @param {number} y Y-position of the rectangle\n               * @param {number} width Width of the rectangle\n               * @param {number} height Height of the rectangle\n               * @param {number} radius Radius of the rectangle\n               *\n               * @return {void}\n               * @example drawRoundedRect(ctx, 50, 50, 5, 10, 3)\n               */\n\n            }, {\n              key: \"drawRoundedRect\",\n              value: function drawRoundedRect(ctx, x, y, width, height, radius) {\n                if (height === 0) {\n                  return;\n                } // peaks are float values from -1 to 1. Use absolute height values in\n                // order to correctly calculate rounded rectangle coordinates\n\n\n                if (height < 0) {\n                  height *= -1;\n                  y -= height;\n                }\n\n                ctx.beginPath();\n                ctx.moveTo(x + radius, y);\n                ctx.lineTo(x + width - radius, y);\n                ctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n                ctx.lineTo(x + width, y + height - radius);\n                ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n                ctx.lineTo(x + radius, y + height);\n                ctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n                ctx.lineTo(x, y + radius);\n                ctx.quadraticCurveTo(x, y, x + radius, y);\n                ctx.closePath();\n                ctx.fill();\n              }\n              /**\n               * Render the actual wave and progress lines\n               *\n               * @param {number[]} peaks Array with peaks data\n               * @param {number} absmax Maximum peak value (absolute)\n               * @param {number} halfH Half the height of the waveform\n               * @param {number} offsetY Offset to the top\n               * @param {number} start The x-offset of the beginning of the area that\n               * should be rendered\n               * @param {number} end The x-offset of the end of the area that\n               * should be rendered\n               */\n\n            }, {\n              key: \"drawLines\",\n              value: function drawLines(peaks, absmax, halfH, offsetY, start, end) {\n                this.drawLineToContext(this.waveCtx, peaks, absmax, halfH, offsetY, start, end);\n\n                if (this.hasProgressCanvas) {\n                  this.drawLineToContext(this.progressCtx, peaks, absmax, halfH, offsetY, start, end);\n                }\n              }\n              /**\n               * Render the actual waveform line on a `canvas` element\n               *\n               * @param {CanvasRenderingContext2D} ctx Rendering context of target canvas\n               * @param {number[]} peaks Array with peaks data\n               * @param {number} absmax Maximum peak value (absolute)\n               * @param {number} halfH Half the height of the waveform\n               * @param {number} offsetY Offset to the top\n               * @param {number} start The x-offset of the beginning of the area that\n               * should be rendered\n               * @param {number} end The x-offset of the end of the area that\n               * should be rendered\n               */\n\n            }, {\n              key: \"drawLineToContext\",\n              value: function drawLineToContext(ctx, peaks, absmax, halfH, offsetY, start, end) {\n                if (!ctx) {\n                  return;\n                }\n\n                var length = peaks.length / 2;\n                var first = Math.round(length * this.start); // use one more peak value to make sure we join peaks at ends -- unless,\n                // of course, this is the last canvas\n\n                var last = Math.round(length * this.end) + 1;\n                var canvasStart = first;\n                var canvasEnd = last;\n                var scale = this.wave.width / (canvasEnd - canvasStart - 1); // optimization\n\n                var halfOffset = halfH + offsetY;\n                var absmaxHalf = absmax / halfH;\n                ctx.beginPath();\n                ctx.moveTo((canvasStart - first) * scale, halfOffset);\n                ctx.lineTo((canvasStart - first) * scale, halfOffset - Math.round((peaks[2 * canvasStart] || 0) / absmaxHalf));\n                var i, peak, h;\n\n                for (i = canvasStart; i < canvasEnd; i++) {\n                  peak = peaks[2 * i] || 0;\n                  h = Math.round(peak / absmaxHalf);\n                  ctx.lineTo((i - first) * scale + this.halfPixel, halfOffset - h);\n                } // draw the bottom edge going backwards, to make a single\n                // closed hull to fill\n\n\n                var j = canvasEnd - 1;\n\n                for (j; j >= canvasStart; j--) {\n                  peak = peaks[2 * j + 1] || 0;\n                  h = Math.round(peak / absmaxHalf);\n                  ctx.lineTo((j - first) * scale + this.halfPixel, halfOffset - h);\n                }\n\n                ctx.lineTo((canvasStart - first) * scale, halfOffset - Math.round((peaks[2 * canvasStart + 1] || 0) / absmaxHalf));\n                ctx.closePath();\n                ctx.fill();\n              }\n              /**\n               * Destroys this entry\n               */\n\n            }, {\n              key: \"destroy\",\n              value: function destroy() {\n                this.waveCtx = null;\n                this.wave = null;\n                this.progressCtx = null;\n                this.progress = null;\n              }\n              /**\n               * Return image data of the wave `canvas` element\n               *\n               * When using a `type` of `'blob'`, this will return a `Promise` that\n               * resolves with a `Blob` instance.\n               *\n               * @param {string} format='image/png' An optional value of a format type.\n               * @param {number} quality=0.92 An optional value between 0 and 1.\n               * @param {string} type='dataURL' Either 'dataURL' or 'blob'.\n               * @return {string|Promise} When using the default `'dataURL'` `type` this\n               * returns a data URL. When using the `'blob'` `type` this returns a\n               * `Promise` that resolves with a `Blob` instance.\n               */\n\n            }, {\n              key: \"getImage\",\n              value: function getImage(format, quality, type) {\n                var _this = this;\n\n                if (type === 'blob') {\n                  return new Promise(function (resolve) {\n                    _this.wave.toBlob(resolve, format, quality);\n                  });\n                } else if (type === 'dataURL') {\n                  return this.wave.toDataURL(format, quality);\n                }\n              }\n            }]);\n\n            return CanvasEntry;\n          }();\n\n          exports.default = CanvasEntry;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/drawer.js\":\n        /*!***********************!*\\\n          !*** ./src/drawer.js ***!\n          \\***********************/\n\n        /***/\n        (module, exports, __webpack_require__) => {\n          \"use strict\";\n\n          function _typeof(obj) {\n            \"@babel/helpers - typeof\";\n\n            if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n              _typeof = function _typeof(obj) {\n                return typeof obj;\n              };\n            } else {\n              _typeof = function _typeof(obj) {\n                return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n              };\n            }\n\n            return _typeof(obj);\n          }\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          var util = _interopRequireWildcard(__webpack_require__(\n          /*! ./util */\n          \"./src/util/index.js\"));\n\n          function _getRequireWildcardCache(nodeInterop) {\n            if (typeof WeakMap !== \"function\") return null;\n            var cacheBabelInterop = new WeakMap();\n            var cacheNodeInterop = new WeakMap();\n            return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n              return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n            })(nodeInterop);\n          }\n\n          function _interopRequireWildcard(obj, nodeInterop) {\n            if (!nodeInterop && obj && obj.__esModule) {\n              return obj;\n            }\n\n            if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n              return {\n                default: obj\n              };\n            }\n\n            var cache = _getRequireWildcardCache(nodeInterop);\n\n            if (cache && cache.has(obj)) {\n              return cache.get(obj);\n            }\n\n            var newObj = {};\n            var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n            for (var key in obj) {\n              if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n                var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n                if (desc && (desc.get || desc.set)) {\n                  Object.defineProperty(newObj, key, desc);\n                } else {\n                  newObj[key] = obj[key];\n                }\n              }\n            }\n\n            newObj.default = obj;\n\n            if (cache) {\n              cache.set(obj, newObj);\n            }\n\n            return newObj;\n          }\n\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            return Constructor;\n          }\n\n          function _inherits(subClass, superClass) {\n            if (typeof superClass !== \"function\" && superClass !== null) {\n              throw new TypeError(\"Super expression must either be null or a function\");\n            }\n\n            subClass.prototype = Object.create(superClass && superClass.prototype, {\n              constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true\n              }\n            });\n            if (superClass) _setPrototypeOf(subClass, superClass);\n          }\n\n          function _setPrototypeOf(o, p) {\n            _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n              o.__proto__ = p;\n              return o;\n            };\n\n            return _setPrototypeOf(o, p);\n          }\n\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n            return function _createSuperInternal() {\n              var Super = _getPrototypeOf(Derived),\n                  result;\n\n              if (hasNativeReflectConstruct) {\n                var NewTarget = _getPrototypeOf(this).constructor;\n\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n\n              return _possibleConstructorReturn(this, result);\n            };\n          }\n\n          function _possibleConstructorReturn(self, call) {\n            if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n              return call;\n            } else if (call !== void 0) {\n              throw new TypeError(\"Derived constructors may only return object or undefined\");\n            }\n\n            return _assertThisInitialized(self);\n          }\n\n          function _assertThisInitialized(self) {\n            if (self === void 0) {\n              throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            }\n\n            return self;\n          }\n\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n\n            try {\n              Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n\n          function _getPrototypeOf(o) {\n            _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n              return o.__proto__ || Object.getPrototypeOf(o);\n            };\n            return _getPrototypeOf(o);\n          }\n          /**\n           * Parent class for renderers\n           *\n           * @extends {Observer}\n           */\n\n\n          var Drawer = /*#__PURE__*/function (_util$Observer) {\n            _inherits(Drawer, _util$Observer);\n\n            var _super = _createSuper(Drawer);\n            /**\n             * @param {HTMLElement} container The container node of the wavesurfer instance\n             * @param {WavesurferParams} params The wavesurfer initialisation options\n             */\n\n\n            function Drawer(container, params) {\n              var _this;\n\n              _classCallCheck(this, Drawer);\n\n              _this = _super.call(this);\n              _this.container = util.withOrientation(container, params.vertical);\n              /**\n               * @type {WavesurferParams}\n               */\n\n              _this.params = params;\n              /**\n               * The width of the renderer\n               * @type {number}\n               */\n\n              _this.width = 0;\n              /**\n               * The height of the renderer\n               * @type {number}\n               */\n\n              _this.height = params.height * _this.params.pixelRatio;\n              _this.lastPos = 0;\n              /**\n               * The `<wave>` element which is added to the container\n               * @type {HTMLElement}\n               */\n\n              _this.wrapper = null;\n              return _this;\n            }\n            /**\n             * Alias of `util.style`\n             *\n             * @param {HTMLElement} el The element that the styles will be applied to\n             * @param {Object} styles The map of propName: attribute, both are used as-is\n             * @return {HTMLElement} el\n             */\n\n\n            _createClass(Drawer, [{\n              key: \"style\",\n              value: function style(el, styles) {\n                return util.style(el, styles);\n              }\n              /**\n               * Create the wrapper `<wave>` element, style it and set up the events for\n               * interaction\n               */\n\n            }, {\n              key: \"createWrapper\",\n              value: function createWrapper() {\n                this.wrapper = util.withOrientation(this.container.appendChild(document.createElement('wave')), this.params.vertical);\n                this.style(this.wrapper, {\n                  display: 'block',\n                  position: 'relative',\n                  userSelect: 'none',\n                  webkitUserSelect: 'none',\n                  height: this.params.height + 'px'\n                });\n\n                if (this.params.fillParent || this.params.scrollParent) {\n                  this.style(this.wrapper, {\n                    width: '100%',\n                    overflowX: this.params.hideScrollbar ? 'hidden' : 'auto',\n                    overflowY: 'hidden'\n                  });\n                }\n\n                this.setupWrapperEvents();\n              }\n              /**\n               * Handle click event\n               *\n               * @param {Event} e Click event\n               * @param {?boolean} noPrevent Set to true to not call `e.preventDefault()`\n               * @return {number} Playback position from 0 to 1\n               */\n\n            }, {\n              key: \"handleEvent\",\n              value: function handleEvent(e, noPrevent) {\n                !noPrevent && e.preventDefault();\n                var clientX = util.withOrientation(e.targetTouches ? e.targetTouches[0] : e, this.params.vertical).clientX;\n                var bbox = this.wrapper.getBoundingClientRect();\n                var nominalWidth = this.width;\n                var parentWidth = this.getWidth();\n                var progressPixels = this.getProgressPixels(bbox, clientX);\n                var progress;\n\n                if (!this.params.fillParent && nominalWidth < parentWidth) {\n                  progress = progressPixels * (this.params.pixelRatio / nominalWidth) || 0;\n                } else {\n                  progress = (progressPixels + this.wrapper.scrollLeft) / this.wrapper.scrollWidth || 0;\n                }\n\n                return util.clamp(progress, 0, 1);\n              }\n            }, {\n              key: \"getProgressPixels\",\n              value: function getProgressPixels(wrapperBbox, clientX) {\n                if (this.params.rtl) {\n                  return wrapperBbox.right - clientX;\n                } else {\n                  return clientX - wrapperBbox.left;\n                }\n              }\n            }, {\n              key: \"setupWrapperEvents\",\n              value: function setupWrapperEvents() {\n                var _this2 = this;\n\n                this.wrapper.addEventListener('click', function (e) {\n                  var orientedEvent = util.withOrientation(e, _this2.params.vertical);\n                  var scrollbarHeight = _this2.wrapper.offsetHeight - _this2.wrapper.clientHeight;\n\n                  if (scrollbarHeight !== 0) {\n                    // scrollbar is visible.  Check if click was on it\n                    var bbox = _this2.wrapper.getBoundingClientRect();\n\n                    if (orientedEvent.clientY >= bbox.bottom - scrollbarHeight) {\n                      // ignore mousedown as it was on the scrollbar\n                      return;\n                    }\n                  }\n\n                  if (_this2.params.interact) {\n                    _this2.fireEvent('click', e, _this2.handleEvent(e));\n                  }\n                });\n                this.wrapper.addEventListener('dblclick', function (e) {\n                  if (_this2.params.interact) {\n                    _this2.fireEvent('dblclick', e, _this2.handleEvent(e));\n                  }\n                });\n                this.wrapper.addEventListener('scroll', function (e) {\n                  return _this2.fireEvent('scroll', e);\n                });\n              }\n              /**\n               * Draw peaks on the canvas\n               *\n               * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays\n               * for split channel rendering\n               * @param {number} length The width of the area that should be drawn\n               * @param {number} start The x-offset of the beginning of the area that\n               * should be rendered\n               * @param {number} end The x-offset of the end of the area that should be\n               * rendered\n               */\n\n            }, {\n              key: \"drawPeaks\",\n              value: function drawPeaks(peaks, length, start, end) {\n                if (!this.setWidth(length)) {\n                  this.clearWave();\n                }\n\n                this.params.barWidth ? this.drawBars(peaks, 0, start, end) : this.drawWave(peaks, 0, start, end);\n              }\n              /**\n               * Scroll to the beginning\n               */\n\n            }, {\n              key: \"resetScroll\",\n              value: function resetScroll() {\n                if (this.wrapper !== null) {\n                  this.wrapper.scrollLeft = 0;\n                }\n              }\n              /**\n               * Recenter the view-port at a certain percent of the waveform\n               *\n               * @param {number} percent Value from 0 to 1 on the waveform\n               */\n\n            }, {\n              key: \"recenter\",\n              value: function recenter(percent) {\n                var position = this.wrapper.scrollWidth * percent;\n                this.recenterOnPosition(position, true);\n              }\n              /**\n               * Recenter the view-port on a position, either scroll there immediately or\n               * in steps of 5 pixels\n               *\n               * @param {number} position X-offset in pixels\n               * @param {boolean} immediate Set to true to immediately scroll somewhere\n               */\n\n            }, {\n              key: \"recenterOnPosition\",\n              value: function recenterOnPosition(position, immediate) {\n                var scrollLeft = this.wrapper.scrollLeft;\n                var half = ~~(this.wrapper.clientWidth / 2);\n                var maxScroll = this.wrapper.scrollWidth - this.wrapper.clientWidth;\n                var target = position - half;\n                var offset = target - scrollLeft;\n\n                if (maxScroll == 0) {\n                  // no need to continue if scrollbar is not there\n                  return;\n                } // if the cursor is currently visible...\n\n\n                if (!immediate && -half <= offset && offset < half) {\n                  // set rate at which waveform is centered\n                  var rate = this.params.autoCenterRate; // make rate depend on width of view and length of waveform\n\n                  rate /= half;\n                  rate *= maxScroll;\n                  offset = Math.max(-rate, Math.min(rate, offset));\n                  target = scrollLeft + offset;\n                } // limit target to valid range (0 to maxScroll)\n\n\n                target = Math.max(0, Math.min(maxScroll, target)); // no use attempting to scroll if we're not moving\n\n                if (target != scrollLeft) {\n                  this.wrapper.scrollLeft = target;\n                }\n              }\n              /**\n               * Get the current scroll position in pixels\n               *\n               * @return {number} Horizontal scroll position in pixels\n               */\n\n            }, {\n              key: \"getScrollX\",\n              value: function getScrollX() {\n                var x = 0;\n\n                if (this.wrapper) {\n                  var pixelRatio = this.params.pixelRatio;\n                  x = Math.round(this.wrapper.scrollLeft * pixelRatio); // In cases of elastic scroll (safari with mouse wheel) you can\n                  // scroll beyond the limits of the container\n                  // Calculate and floor the scrollable extent to make sure an out\n                  // of bounds value is not returned\n                  // Ticket #1312\n\n                  if (this.params.scrollParent) {\n                    var maxScroll = ~~(this.wrapper.scrollWidth * pixelRatio - this.getWidth());\n                    x = Math.min(maxScroll, Math.max(0, x));\n                  }\n                }\n\n                return x;\n              }\n              /**\n               * Get the width of the container\n               *\n               * @return {number} The width of the container\n               */\n\n            }, {\n              key: \"getWidth\",\n              value: function getWidth() {\n                return Math.round(this.container.clientWidth * this.params.pixelRatio);\n              }\n              /**\n               * Set the width of the container\n               *\n               * @param {number} width The new width of the container\n               * @return {boolean} Whether the width of the container was updated or not\n               */\n\n            }, {\n              key: \"setWidth\",\n              value: function setWidth(width) {\n                if (this.width == width) {\n                  return false;\n                }\n\n                this.width = width;\n\n                if (this.params.fillParent || this.params.scrollParent) {\n                  this.style(this.wrapper, {\n                    width: ''\n                  });\n                } else {\n                  var newWidth = ~~(this.width / this.params.pixelRatio) + 'px';\n                  this.style(this.wrapper, {\n                    width: newWidth\n                  });\n                }\n\n                this.updateSize();\n                return true;\n              }\n              /**\n               * Set the height of the container\n               *\n               * @param {number} height The new height of the container.\n               * @return {boolean} Whether the height of the container was updated or not\n               */\n\n            }, {\n              key: \"setHeight\",\n              value: function setHeight(height) {\n                if (height == this.height) {\n                  return false;\n                }\n\n                this.height = height;\n                this.style(this.wrapper, {\n                  height: ~~(this.height / this.params.pixelRatio) + 'px'\n                });\n                this.updateSize();\n                return true;\n              }\n              /**\n               * Called by wavesurfer when progress should be rendered\n               *\n               * @param {number} progress From 0 to 1\n               */\n\n            }, {\n              key: \"progress\",\n              value: function progress(_progress) {\n                var minPxDelta = 1 / this.params.pixelRatio;\n                var pos = Math.round(_progress * this.width) * minPxDelta;\n\n                if (pos < this.lastPos || pos - this.lastPos >= minPxDelta) {\n                  this.lastPos = pos;\n\n                  if (this.params.scrollParent && this.params.autoCenter) {\n                    var newPos = ~~(this.wrapper.scrollWidth * _progress);\n                    this.recenterOnPosition(newPos, this.params.autoCenterImmediately);\n                  }\n\n                  this.updateProgress(pos);\n                }\n              }\n              /**\n               * This is called when wavesurfer is destroyed\n               */\n\n            }, {\n              key: \"destroy\",\n              value: function destroy() {\n                this.unAll();\n\n                if (this.wrapper) {\n                  if (this.wrapper.parentNode == this.container.domElement) {\n                    this.container.removeChild(this.wrapper.domElement);\n                  }\n\n                  this.wrapper = null;\n                }\n              }\n              /* Renderer-specific methods */\n\n              /**\n               * Called after cursor related params have changed.\n               *\n               * @abstract\n               */\n\n            }, {\n              key: \"updateCursor\",\n              value: function updateCursor() {}\n              /**\n               * Called when the size of the container changes so the renderer can adjust\n               *\n               * @abstract\n               */\n\n            }, {\n              key: \"updateSize\",\n              value: function updateSize() {}\n              /**\n               * Draw a waveform with bars\n               *\n               * @abstract\n               * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays for split channel\n               * rendering\n               * @param {number} channelIndex The index of the current channel. Normally\n               * should be 0\n               * @param {number} start The x-offset of the beginning of the area that\n               * should be rendered\n               * @param {number} end The x-offset of the end of the area that should be\n               * rendered\n               */\n\n            }, {\n              key: \"drawBars\",\n              value: function drawBars(peaks, channelIndex, start, end) {}\n              /**\n               * Draw a waveform\n               *\n               * @abstract\n               * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays for split channel\n               * rendering\n               * @param {number} channelIndex The index of the current channel. Normally\n               * should be 0\n               * @param {number} start The x-offset of the beginning of the area that\n               * should be rendered\n               * @param {number} end The x-offset of the end of the area that should be\n               * rendered\n               */\n\n            }, {\n              key: \"drawWave\",\n              value: function drawWave(peaks, channelIndex, start, end) {}\n              /**\n               * Clear the waveform\n               *\n               * @abstract\n               */\n\n            }, {\n              key: \"clearWave\",\n              value: function clearWave() {}\n              /**\n               * Render the new progress\n               *\n               * @abstract\n               * @param {number} position X-Offset of progress position in pixels\n               */\n\n            }, {\n              key: \"updateProgress\",\n              value: function updateProgress(position) {}\n            }]);\n\n            return Drawer;\n          }(util.Observer);\n\n          exports.default = Drawer;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/drawer.multicanvas.js\":\n        /*!***********************************!*\\\n          !*** ./src/drawer.multicanvas.js ***!\n          \\***********************************/\n\n        /***/\n        (module, exports, __webpack_require__) => {\n          \"use strict\";\n\n          function _typeof(obj) {\n            \"@babel/helpers - typeof\";\n\n            if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n              _typeof = function _typeof(obj) {\n                return typeof obj;\n              };\n            } else {\n              _typeof = function _typeof(obj) {\n                return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n              };\n            }\n\n            return _typeof(obj);\n          }\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          var _drawer = _interopRequireDefault(__webpack_require__(\n          /*! ./drawer */\n          \"./src/drawer.js\"));\n\n          var util = _interopRequireWildcard(__webpack_require__(\n          /*! ./util */\n          \"./src/util/index.js\"));\n\n          var _drawer2 = _interopRequireDefault(__webpack_require__(\n          /*! ./drawer.canvasentry */\n          \"./src/drawer.canvasentry.js\"));\n\n          function _getRequireWildcardCache(nodeInterop) {\n            if (typeof WeakMap !== \"function\") return null;\n            var cacheBabelInterop = new WeakMap();\n            var cacheNodeInterop = new WeakMap();\n            return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n              return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n            })(nodeInterop);\n          }\n\n          function _interopRequireWildcard(obj, nodeInterop) {\n            if (!nodeInterop && obj && obj.__esModule) {\n              return obj;\n            }\n\n            if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n              return {\n                default: obj\n              };\n            }\n\n            var cache = _getRequireWildcardCache(nodeInterop);\n\n            if (cache && cache.has(obj)) {\n              return cache.get(obj);\n            }\n\n            var newObj = {};\n            var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n            for (var key in obj) {\n              if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n                var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n                if (desc && (desc.get || desc.set)) {\n                  Object.defineProperty(newObj, key, desc);\n                } else {\n                  newObj[key] = obj[key];\n                }\n              }\n            }\n\n            newObj.default = obj;\n\n            if (cache) {\n              cache.set(obj, newObj);\n            }\n\n            return newObj;\n          }\n\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            return Constructor;\n          }\n\n          function _inherits(subClass, superClass) {\n            if (typeof superClass !== \"function\" && superClass !== null) {\n              throw new TypeError(\"Super expression must either be null or a function\");\n            }\n\n            subClass.prototype = Object.create(superClass && superClass.prototype, {\n              constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true\n              }\n            });\n            if (superClass) _setPrototypeOf(subClass, superClass);\n          }\n\n          function _setPrototypeOf(o, p) {\n            _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n              o.__proto__ = p;\n              return o;\n            };\n\n            return _setPrototypeOf(o, p);\n          }\n\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n            return function _createSuperInternal() {\n              var Super = _getPrototypeOf(Derived),\n                  result;\n\n              if (hasNativeReflectConstruct) {\n                var NewTarget = _getPrototypeOf(this).constructor;\n\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n\n              return _possibleConstructorReturn(this, result);\n            };\n          }\n\n          function _possibleConstructorReturn(self, call) {\n            if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n              return call;\n            } else if (call !== void 0) {\n              throw new TypeError(\"Derived constructors may only return object or undefined\");\n            }\n\n            return _assertThisInitialized(self);\n          }\n\n          function _assertThisInitialized(self) {\n            if (self === void 0) {\n              throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            }\n\n            return self;\n          }\n\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n\n            try {\n              Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n\n          function _getPrototypeOf(o) {\n            _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n              return o.__proto__ || Object.getPrototypeOf(o);\n            };\n            return _getPrototypeOf(o);\n          }\n          /**\n           * MultiCanvas renderer for wavesurfer. Is currently the default and sole\n           * builtin renderer.\n           *\n           * A `MultiCanvas` consists of one or more `CanvasEntry` instances, depending\n           * on the zoom level.\n           */\n\n\n          var MultiCanvas = /*#__PURE__*/function (_Drawer) {\n            _inherits(MultiCanvas, _Drawer);\n\n            var _super = _createSuper(MultiCanvas);\n            /**\n             * @param {HTMLElement} container The container node of the wavesurfer instance\n             * @param {WavesurferParams} params The wavesurfer initialisation options\n             */\n\n\n            function MultiCanvas(container, params) {\n              var _this;\n\n              _classCallCheck(this, MultiCanvas);\n\n              _this = _super.call(this, container, params);\n              /**\n               * @type {number}\n               */\n\n              _this.maxCanvasWidth = params.maxCanvasWidth;\n              /**\n               * @type {number}\n               */\n\n              _this.maxCanvasElementWidth = Math.round(params.maxCanvasWidth / params.pixelRatio);\n              /**\n               * Whether or not the progress wave is rendered. If the `waveColor`\n               * and `progressColor` are the same color it is not.\n               *\n               * @type {boolean}\n               */\n\n              _this.hasProgressCanvas = params.waveColor != params.progressColor;\n              /**\n               * @type {number}\n               */\n\n              _this.halfPixel = 0.5 / params.pixelRatio;\n              /**\n               * List of `CanvasEntry` instances.\n               *\n               * @type {Array}\n               */\n\n              _this.canvases = [];\n              /**\n               * @type {HTMLElement}\n               */\n\n              _this.progressWave = null;\n              /**\n               * Class used to generate entries.\n               *\n               * @type {function}\n               */\n\n              _this.EntryClass = _drawer2.default;\n              /**\n               * Canvas 2d context attributes.\n               *\n               * @type {object}\n               */\n\n              _this.canvasContextAttributes = params.drawingContextAttributes;\n              /**\n               * Overlap added between entries to prevent vertical white stripes\n               * between `canvas` elements.\n               *\n               * @type {number}\n               */\n\n              _this.overlap = 2 * Math.ceil(params.pixelRatio / 2);\n              /**\n               * The radius of the wave bars. Makes bars rounded\n               *\n               * @type {number}\n               */\n\n              _this.barRadius = params.barRadius || 0;\n              /**\n               * Whether to render the waveform vertically. Defaults to false.\n               *\n               * @type {boolean}\n               */\n\n              _this.vertical = params.vertical;\n              return _this;\n            }\n            /**\n             * Initialize the drawer\n             */\n\n\n            _createClass(MultiCanvas, [{\n              key: \"init\",\n              value: function init() {\n                this.createWrapper();\n                this.createElements();\n              }\n              /**\n               * Create the canvas elements and style them\n               *\n               */\n\n            }, {\n              key: \"createElements\",\n              value: function createElements() {\n                this.progressWave = util.withOrientation(this.wrapper.appendChild(document.createElement('wave')), this.params.vertical);\n                this.style(this.progressWave, {\n                  position: 'absolute',\n                  zIndex: 3,\n                  left: 0,\n                  top: 0,\n                  bottom: 0,\n                  overflow: 'hidden',\n                  width: '0',\n                  display: 'none',\n                  boxSizing: 'border-box',\n                  borderRightStyle: 'solid',\n                  pointerEvents: 'none'\n                });\n                this.addCanvas();\n                this.updateCursor();\n              }\n              /**\n               * Update cursor style\n               */\n\n            }, {\n              key: \"updateCursor\",\n              value: function updateCursor() {\n                this.style(this.progressWave, {\n                  borderRightWidth: this.params.cursorWidth + 'px',\n                  borderRightColor: this.params.cursorColor\n                });\n              }\n              /**\n               * Adjust to the updated size by adding or removing canvases\n               */\n\n            }, {\n              key: \"updateSize\",\n              value: function updateSize() {\n                var _this2 = this;\n\n                var totalWidth = Math.round(this.width / this.params.pixelRatio);\n                var requiredCanvases = Math.ceil(totalWidth / (this.maxCanvasElementWidth + this.overlap)); // add required canvases\n\n                while (this.canvases.length < requiredCanvases) {\n                  this.addCanvas();\n                } // remove older existing canvases, if any\n\n\n                while (this.canvases.length > requiredCanvases) {\n                  this.removeCanvas();\n                }\n\n                var canvasWidth = this.maxCanvasWidth + this.overlap;\n                var lastCanvas = this.canvases.length - 1;\n                this.canvases.forEach(function (entry, i) {\n                  if (i == lastCanvas) {\n                    canvasWidth = _this2.width - _this2.maxCanvasWidth * lastCanvas;\n                  }\n\n                  _this2.updateDimensions(entry, canvasWidth, _this2.height);\n\n                  entry.clearWave();\n                });\n              }\n              /**\n               * Add a canvas to the canvas list\n               *\n               */\n\n            }, {\n              key: \"addCanvas\",\n              value: function addCanvas() {\n                var entry = new this.EntryClass();\n                entry.canvasContextAttributes = this.canvasContextAttributes;\n                entry.hasProgressCanvas = this.hasProgressCanvas;\n                entry.halfPixel = this.halfPixel;\n                var leftOffset = this.maxCanvasElementWidth * this.canvases.length; // wave\n\n                var wave = util.withOrientation(this.wrapper.appendChild(document.createElement('canvas')), this.params.vertical);\n                this.style(wave, {\n                  position: 'absolute',\n                  zIndex: 2,\n                  left: leftOffset + 'px',\n                  top: 0,\n                  bottom: 0,\n                  height: '100%',\n                  pointerEvents: 'none'\n                });\n                entry.initWave(wave); // progress\n\n                if (this.hasProgressCanvas) {\n                  var progress = util.withOrientation(this.progressWave.appendChild(document.createElement('canvas')), this.params.vertical);\n                  this.style(progress, {\n                    position: 'absolute',\n                    left: leftOffset + 'px',\n                    top: 0,\n                    bottom: 0,\n                    height: '100%'\n                  });\n                  entry.initProgress(progress);\n                }\n\n                this.canvases.push(entry);\n              }\n              /**\n               * Pop single canvas from the list\n               *\n               */\n\n            }, {\n              key: \"removeCanvas\",\n              value: function removeCanvas() {\n                var lastEntry = this.canvases[this.canvases.length - 1]; // wave\n\n                lastEntry.wave.parentElement.removeChild(lastEntry.wave.domElement); // progress\n\n                if (this.hasProgressCanvas) {\n                  lastEntry.progress.parentElement.removeChild(lastEntry.progress.domElement);\n                } // cleanup\n\n\n                if (lastEntry) {\n                  lastEntry.destroy();\n                  lastEntry = null;\n                }\n\n                this.canvases.pop();\n              }\n              /**\n               * Update the dimensions of a canvas element\n               *\n               * @param {CanvasEntry} entry Target entry\n               * @param {number} width The new width of the element\n               * @param {number} height The new height of the element\n               */\n\n            }, {\n              key: \"updateDimensions\",\n              value: function updateDimensions(entry, width, height) {\n                var elementWidth = Math.round(width / this.params.pixelRatio);\n                var totalWidth = Math.round(this.width / this.params.pixelRatio); // update canvas dimensions\n\n                entry.updateDimensions(elementWidth, totalWidth, width, height); // style element\n\n                this.style(this.progressWave, {\n                  display: 'block'\n                });\n              }\n              /**\n               * Clear the whole multi-canvas\n               */\n\n            }, {\n              key: \"clearWave\",\n              value: function clearWave() {\n                var _this3 = this;\n\n                util.frame(function () {\n                  _this3.canvases.forEach(function (entry) {\n                    return entry.clearWave();\n                  });\n                })();\n              }\n              /**\n               * Draw a waveform with bars\n               *\n               * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays\n               * for split channel rendering\n               * @param {number} channelIndex The index of the current channel. Normally\n               * should be 0. Must be an integer.\n               * @param {number} start The x-offset of the beginning of the area that\n               * should be rendered\n               * @param {number} end The x-offset of the end of the area that should be\n               * rendered\n               * @returns {void}\n               */\n\n            }, {\n              key: \"drawBars\",\n              value: function drawBars(peaks, channelIndex, start, end) {\n                var _this4 = this;\n\n                return this.prepareDraw(peaks, channelIndex, start, end, function (_ref) {\n                  var absmax = _ref.absmax,\n                      hasMinVals = _ref.hasMinVals,\n                      height = _ref.height,\n                      offsetY = _ref.offsetY,\n                      halfH = _ref.halfH,\n                      peaks = _ref.peaks,\n                      ch = _ref.channelIndex; // if drawBars was called within ws.empty we don't pass a start and\n                  // don't want anything to happen\n\n                  if (start === undefined) {\n                    return;\n                  } // Skip every other value if there are negatives.\n\n\n                  var peakIndexScale = hasMinVals ? 2 : 1;\n                  var length = peaks.length / peakIndexScale;\n                  var bar = _this4.params.barWidth * _this4.params.pixelRatio;\n                  var gap = _this4.params.barGap === null ? Math.max(_this4.params.pixelRatio, ~~(bar / 2)) : Math.max(_this4.params.pixelRatio, _this4.params.barGap * _this4.params.pixelRatio);\n                  var step = bar + gap;\n                  var scale = length / _this4.width;\n                  var first = start;\n                  var last = end;\n                  var i = first;\n\n                  for (i; i < last; i += step) {\n                    var peak = peaks[Math.floor(i * scale * peakIndexScale)] || 0;\n                    var h = Math.round(peak / absmax * halfH);\n                    /* in case of silences, allow the user to specify that we\n                     * always draw *something* (normally a 1px high bar) */\n\n                    if (h == 0 && _this4.params.barMinHeight) {\n                      h = _this4.params.barMinHeight;\n                    }\n\n                    _this4.fillRect(i + _this4.halfPixel, halfH - h + offsetY, bar + _this4.halfPixel, h * 2, _this4.barRadius, ch);\n                  }\n                });\n              }\n              /**\n               * Draw a waveform\n               *\n               * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays\n               * for split channel rendering\n               * @param {number} channelIndex The index of the current channel. Normally\n               * should be 0\n               * @param {number?} start The x-offset of the beginning of the area that\n               * should be rendered (If this isn't set only a flat line is rendered)\n               * @param {number?} end The x-offset of the end of the area that should be\n               * rendered\n               * @returns {void}\n               */\n\n            }, {\n              key: \"drawWave\",\n              value: function drawWave(peaks, channelIndex, start, end) {\n                var _this5 = this;\n\n                return this.prepareDraw(peaks, channelIndex, start, end, function (_ref2) {\n                  var absmax = _ref2.absmax,\n                      hasMinVals = _ref2.hasMinVals,\n                      height = _ref2.height,\n                      offsetY = _ref2.offsetY,\n                      halfH = _ref2.halfH,\n                      peaks = _ref2.peaks,\n                      channelIndex = _ref2.channelIndex;\n\n                  if (!hasMinVals) {\n                    var reflectedPeaks = [];\n                    var len = peaks.length;\n                    var i = 0;\n\n                    for (i; i < len; i++) {\n                      reflectedPeaks[2 * i] = peaks[i];\n                      reflectedPeaks[2 * i + 1] = -peaks[i];\n                    }\n\n                    peaks = reflectedPeaks;\n                  } // if drawWave was called within ws.empty we don't pass a start and\n                  // end and simply want a flat line\n\n\n                  if (start !== undefined) {\n                    _this5.drawLine(peaks, absmax, halfH, offsetY, start, end, channelIndex);\n                  } // always draw a median line\n\n\n                  _this5.fillRect(0, halfH + offsetY - _this5.halfPixel, _this5.width, _this5.halfPixel, _this5.barRadius, channelIndex);\n                });\n              }\n              /**\n               * Tell the canvas entries to render their portion of the waveform\n               *\n               * @param {number[]} peaks Peaks data\n               * @param {number} absmax Maximum peak value (absolute)\n               * @param {number} halfH Half the height of the waveform\n               * @param {number} offsetY Offset to the top\n               * @param {number} start The x-offset of the beginning of the area that\n               * should be rendered\n               * @param {number} end The x-offset of the end of the area that\n               * should be rendered\n               * @param {channelIndex} channelIndex The channel index of the line drawn\n               */\n\n            }, {\n              key: \"drawLine\",\n              value: function drawLine(peaks, absmax, halfH, offsetY, start, end, channelIndex) {\n                var _this6 = this;\n\n                var _ref3 = this.params.splitChannelsOptions.channelColors[channelIndex] || {},\n                    waveColor = _ref3.waveColor,\n                    progressColor = _ref3.progressColor;\n\n                this.canvases.forEach(function (entry, i) {\n                  _this6.setFillStyles(entry, waveColor, progressColor);\n\n                  _this6.applyCanvasTransforms(entry, _this6.params.vertical);\n\n                  entry.drawLines(peaks, absmax, halfH, offsetY, start, end);\n                });\n              }\n              /**\n               * Draw a rectangle on the multi-canvas\n               *\n               * @param {number} x X-position of the rectangle\n               * @param {number} y Y-position of the rectangle\n               * @param {number} width Width of the rectangle\n               * @param {number} height Height of the rectangle\n               * @param {number} radius Radius of the rectangle\n               * @param {channelIndex} channelIndex The channel index of the bar drawn\n               */\n\n            }, {\n              key: \"fillRect\",\n              value: function fillRect(x, y, width, height, radius, channelIndex) {\n                var startCanvas = Math.floor(x / this.maxCanvasWidth);\n                var endCanvas = Math.min(Math.ceil((x + width) / this.maxCanvasWidth) + 1, this.canvases.length);\n                var i = startCanvas;\n\n                for (i; i < endCanvas; i++) {\n                  var entry = this.canvases[i];\n                  var leftOffset = i * this.maxCanvasWidth;\n                  var intersection = {\n                    x1: Math.max(x, i * this.maxCanvasWidth),\n                    y1: y,\n                    x2: Math.min(x + width, i * this.maxCanvasWidth + entry.wave.width),\n                    y2: y + height\n                  };\n\n                  if (intersection.x1 < intersection.x2) {\n                    var _ref4 = this.params.splitChannelsOptions.channelColors[channelIndex] || {},\n                        waveColor = _ref4.waveColor,\n                        progressColor = _ref4.progressColor;\n\n                    this.setFillStyles(entry, waveColor, progressColor);\n                    this.applyCanvasTransforms(entry, this.params.vertical);\n                    entry.fillRects(intersection.x1 - leftOffset, intersection.y1, intersection.x2 - intersection.x1, intersection.y2 - intersection.y1, radius);\n                  }\n                }\n              }\n              /**\n               * Returns whether to hide the channel from being drawn based on params.\n               *\n               * @param {number} channelIndex The index of the current channel.\n               * @returns {bool} True to hide the channel, false to draw.\n               */\n\n            }, {\n              key: \"hideChannel\",\n              value: function hideChannel(channelIndex) {\n                return this.params.splitChannels && this.params.splitChannelsOptions.filterChannels.includes(channelIndex);\n              }\n              /**\n               * Performs preparation tasks and calculations which are shared by `drawBars`\n               * and `drawWave`\n               *\n               * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays for\n               * split channel rendering\n               * @param {number} channelIndex The index of the current channel. Normally\n               * should be 0\n               * @param {number?} start The x-offset of the beginning of the area that\n               * should be rendered. If this isn't set only a flat line is rendered\n               * @param {number?} end The x-offset of the end of the area that should be\n               * rendered\n               * @param {function} fn The render function to call, e.g. `drawWave`\n               * @param {number} drawIndex The index of the current channel after filtering.\n               * @param {number?} normalizedMax Maximum modulation value across channels for use with relativeNormalization. Ignored when undefined\n               * @returns {void}\n               */\n\n            }, {\n              key: \"prepareDraw\",\n              value: function prepareDraw(peaks, channelIndex, start, end, fn, drawIndex, normalizedMax) {\n                var _this7 = this;\n\n                return util.frame(function () {\n                  // Split channels and call this function with the channelIndex set\n                  if (peaks[0] instanceof Array) {\n                    var channels = peaks;\n\n                    if (_this7.params.splitChannels) {\n                      var filteredChannels = channels.filter(function (c, i) {\n                        return !_this7.hideChannel(i);\n                      });\n\n                      if (!_this7.params.splitChannelsOptions.overlay) {\n                        _this7.setHeight(Math.max(filteredChannels.length, 1) * _this7.params.height * _this7.params.pixelRatio);\n                      }\n\n                      var overallAbsMax;\n\n                      if (_this7.params.splitChannelsOptions && _this7.params.splitChannelsOptions.relativeNormalization) {\n                        // calculate maximum peak across channels to use for normalization\n                        overallAbsMax = util.max(channels.map(function (channelPeaks) {\n                          return util.absMax(channelPeaks);\n                        }));\n                      }\n\n                      return channels.forEach(function (channelPeaks, i) {\n                        return _this7.prepareDraw(channelPeaks, i, start, end, fn, filteredChannels.indexOf(channelPeaks), overallAbsMax);\n                      });\n                    }\n\n                    peaks = channels[0];\n                  } // Return and do not draw channel peaks if hidden.\n\n\n                  if (_this7.hideChannel(channelIndex)) {\n                    return;\n                  } // calculate maximum modulation value, either from the barHeight\n                  // parameter or if normalize=true from the largest value in the peak\n                  // set\n\n\n                  var absmax = 1 / _this7.params.barHeight;\n\n                  if (_this7.params.normalize) {\n                    absmax = normalizedMax === undefined ? util.absMax(peaks) : normalizedMax;\n                  } // Bar wave draws the bottom only as a reflection of the top,\n                  // so we don't need negative values\n\n\n                  var hasMinVals = [].some.call(peaks, function (val) {\n                    return val < 0;\n                  });\n                  var height = _this7.params.height * _this7.params.pixelRatio;\n                  var halfH = height / 2;\n                  var offsetY = height * drawIndex || 0; // Override offsetY if overlay is true\n\n                  if (_this7.params.splitChannelsOptions && _this7.params.splitChannelsOptions.overlay) {\n                    offsetY = 0;\n                  }\n\n                  return fn({\n                    absmax: absmax,\n                    hasMinVals: hasMinVals,\n                    height: height,\n                    offsetY: offsetY,\n                    halfH: halfH,\n                    peaks: peaks,\n                    channelIndex: channelIndex\n                  });\n                })();\n              }\n              /**\n               * Set the fill styles for a certain entry (wave and progress)\n               *\n               * @param {CanvasEntry} entry Target entry\n               * @param {string} waveColor Wave color to draw this entry\n               * @param {string} progressColor Progress color to draw this entry\n               */\n\n            }, {\n              key: \"setFillStyles\",\n              value: function setFillStyles(entry) {\n                var waveColor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.params.waveColor;\n                var progressColor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.params.progressColor;\n                entry.setFillStyles(waveColor, progressColor);\n              }\n              /**\n               * Set the canvas transforms for a certain entry (wave and progress)\n               *\n               * @param {CanvasEntry} entry Target entry\n               * @param {boolean} vertical Whether to render the waveform vertically\n               */\n\n            }, {\n              key: \"applyCanvasTransforms\",\n              value: function applyCanvasTransforms(entry) {\n                var vertical = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n                entry.applyCanvasTransforms(vertical);\n              }\n              /**\n               * Return image data of the multi-canvas\n               *\n               * When using a `type` of `'blob'`, this will return a `Promise`.\n               *\n               * @param {string} format='image/png' An optional value of a format type.\n               * @param {number} quality=0.92 An optional value between 0 and 1.\n               * @param {string} type='dataURL' Either 'dataURL' or 'blob'.\n               * @return {string|string[]|Promise} When using the default `'dataURL'`\n               * `type` this returns a single data URL or an array of data URLs,\n               * one for each canvas. When using the `'blob'` `type` this returns a\n               * `Promise` that resolves with an array of `Blob` instances, one for each\n               * canvas.\n               */\n\n            }, {\n              key: \"getImage\",\n              value: function getImage(format, quality, type) {\n                if (type === 'blob') {\n                  return Promise.all(this.canvases.map(function (entry) {\n                    return entry.getImage(format, quality, type);\n                  }));\n                } else if (type === 'dataURL') {\n                  var images = this.canvases.map(function (entry) {\n                    return entry.getImage(format, quality, type);\n                  });\n                  return images.length > 1 ? images : images[0];\n                }\n              }\n              /**\n               * Render the new progress\n               *\n               * @param {number} position X-offset of progress position in pixels\n               */\n\n            }, {\n              key: \"updateProgress\",\n              value: function updateProgress(position) {\n                this.style(this.progressWave, {\n                  width: position + 'px'\n                });\n              }\n            }]);\n\n            return MultiCanvas;\n          }(_drawer.default);\n\n          exports.default = MultiCanvas;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/mediaelement-webaudio.js\":\n        /*!**************************************!*\\\n          !*** ./src/mediaelement-webaudio.js ***!\n          \\**************************************/\n\n        /***/\n        (module, exports, __webpack_require__) => {\n          \"use strict\";\n\n          function _typeof(obj) {\n            \"@babel/helpers - typeof\";\n\n            if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n              _typeof = function _typeof(obj) {\n                return typeof obj;\n              };\n            } else {\n              _typeof = function _typeof(obj) {\n                return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n              };\n            }\n\n            return _typeof(obj);\n          }\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          var _mediaelement = _interopRequireDefault(__webpack_require__(\n          /*! ./mediaelement */\n          \"./src/mediaelement.js\"));\n\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            return Constructor;\n          }\n\n          function _get(target, property, receiver) {\n            if (typeof Reflect !== \"undefined\" && Reflect.get) {\n              _get = Reflect.get;\n            } else {\n              _get = function _get(target, property, receiver) {\n                var base = _superPropBase(target, property);\n\n                if (!base) return;\n                var desc = Object.getOwnPropertyDescriptor(base, property);\n\n                if (desc.get) {\n                  return desc.get.call(receiver);\n                }\n\n                return desc.value;\n              };\n            }\n\n            return _get(target, property, receiver || target);\n          }\n\n          function _superPropBase(object, property) {\n            while (!Object.prototype.hasOwnProperty.call(object, property)) {\n              object = _getPrototypeOf(object);\n              if (object === null) break;\n            }\n\n            return object;\n          }\n\n          function _inherits(subClass, superClass) {\n            if (typeof superClass !== \"function\" && superClass !== null) {\n              throw new TypeError(\"Super expression must either be null or a function\");\n            }\n\n            subClass.prototype = Object.create(superClass && superClass.prototype, {\n              constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true\n              }\n            });\n            if (superClass) _setPrototypeOf(subClass, superClass);\n          }\n\n          function _setPrototypeOf(o, p) {\n            _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n              o.__proto__ = p;\n              return o;\n            };\n\n            return _setPrototypeOf(o, p);\n          }\n\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n            return function _createSuperInternal() {\n              var Super = _getPrototypeOf(Derived),\n                  result;\n\n              if (hasNativeReflectConstruct) {\n                var NewTarget = _getPrototypeOf(this).constructor;\n\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n\n              return _possibleConstructorReturn(this, result);\n            };\n          }\n\n          function _possibleConstructorReturn(self, call) {\n            if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n              return call;\n            } else if (call !== void 0) {\n              throw new TypeError(\"Derived constructors may only return object or undefined\");\n            }\n\n            return _assertThisInitialized(self);\n          }\n\n          function _assertThisInitialized(self) {\n            if (self === void 0) {\n              throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            }\n\n            return self;\n          }\n\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n\n            try {\n              Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n\n          function _getPrototypeOf(o) {\n            _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n              return o.__proto__ || Object.getPrototypeOf(o);\n            };\n            return _getPrototypeOf(o);\n          }\n          /**\n           * MediaElementWebAudio backend: load audio via an HTML5 audio tag, but playback with the WebAudio API.\n           * The advantage here is that the html5 <audio> tag can perform range requests on the server and not\n           * buffer the entire file in one request, and you still get the filtering and scripting functionality\n           * of the webaudio API.\n           * Note that in order to use range requests and prevent buffering, you must provide peak data.\n           *\n           * @since 3.2.0\n           */\n\n\n          var MediaElementWebAudio = /*#__PURE__*/function (_MediaElement) {\n            _inherits(MediaElementWebAudio, _MediaElement);\n\n            var _super = _createSuper(MediaElementWebAudio);\n            /**\n             * Construct the backend\n             *\n             * @param {WavesurferParams} params Wavesurfer parameters\n             */\n\n\n            function MediaElementWebAudio(params) {\n              var _this;\n\n              _classCallCheck(this, MediaElementWebAudio);\n\n              _this = _super.call(this, params);\n              /** @private */\n\n              _this.params = params;\n              /** @private */\n\n              _this.sourceMediaElement = null;\n              return _this;\n            }\n            /**\n             * Initialise the backend, called in `wavesurfer.createBackend()`\n             */\n\n\n            _createClass(MediaElementWebAudio, [{\n              key: \"init\",\n              value: function init() {\n                this.setPlaybackRate(this.params.audioRate);\n                this.createTimer();\n                this.createVolumeNode();\n                this.createScriptNode();\n                this.createAnalyserNode();\n              }\n              /**\n               * Private method called by both `load` (from url)\n               * and `loadElt` (existing media element) methods.\n               *\n               * @param {HTMLMediaElement} media HTML5 Audio or Video element\n               * @param {number[]|Number.<Array[]>} peaks Array of peak data\n               * @param {string} preload HTML 5 preload attribute value\n               * @private\n               */\n\n            }, {\n              key: \"_load\",\n              value: function _load(media, peaks, preload) {\n                _get(_getPrototypeOf(MediaElementWebAudio.prototype), \"_load\", this).call(this, media, peaks, preload);\n\n                this.createMediaElementSource(media);\n              }\n              /**\n               * Create MediaElementSource node\n               *\n               * @since 3.2.0\n               * @param {HTMLMediaElement} mediaElement HTML5 Audio to load\n               */\n\n            }, {\n              key: \"createMediaElementSource\",\n              value: function createMediaElementSource(mediaElement) {\n                this.sourceMediaElement = this.ac.createMediaElementSource(mediaElement);\n                this.sourceMediaElement.connect(this.analyser);\n              }\n            }, {\n              key: \"play\",\n              value: function play(start, end) {\n                this.resumeAudioContext();\n                return _get(_getPrototypeOf(MediaElementWebAudio.prototype), \"play\", this).call(this, start, end);\n              }\n              /**\n               * This is called when wavesurfer is destroyed\n               *\n               */\n\n            }, {\n              key: \"destroy\",\n              value: function destroy() {\n                _get(_getPrototypeOf(MediaElementWebAudio.prototype), \"destroy\", this).call(this);\n\n                this.destroyWebAudio();\n              }\n            }]);\n\n            return MediaElementWebAudio;\n          }(_mediaelement.default);\n\n          exports.default = MediaElementWebAudio;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/mediaelement.js\":\n        /*!*****************************!*\\\n          !*** ./src/mediaelement.js ***!\n          \\*****************************/\n\n        /***/\n        (module, exports, __webpack_require__) => {\n          \"use strict\";\n\n          function _typeof(obj) {\n            \"@babel/helpers - typeof\";\n\n            if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n              _typeof = function _typeof(obj) {\n                return typeof obj;\n              };\n            } else {\n              _typeof = function _typeof(obj) {\n                return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n              };\n            }\n\n            return _typeof(obj);\n          }\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          var _webaudio = _interopRequireDefault(__webpack_require__(\n          /*! ./webaudio */\n          \"./src/webaudio.js\"));\n\n          var util = _interopRequireWildcard(__webpack_require__(\n          /*! ./util */\n          \"./src/util/index.js\"));\n\n          function _getRequireWildcardCache(nodeInterop) {\n            if (typeof WeakMap !== \"function\") return null;\n            var cacheBabelInterop = new WeakMap();\n            var cacheNodeInterop = new WeakMap();\n            return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n              return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n            })(nodeInterop);\n          }\n\n          function _interopRequireWildcard(obj, nodeInterop) {\n            if (!nodeInterop && obj && obj.__esModule) {\n              return obj;\n            }\n\n            if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n              return {\n                default: obj\n              };\n            }\n\n            var cache = _getRequireWildcardCache(nodeInterop);\n\n            if (cache && cache.has(obj)) {\n              return cache.get(obj);\n            }\n\n            var newObj = {};\n            var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n            for (var key in obj) {\n              if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n                var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n                if (desc && (desc.get || desc.set)) {\n                  Object.defineProperty(newObj, key, desc);\n                } else {\n                  newObj[key] = obj[key];\n                }\n              }\n            }\n\n            newObj.default = obj;\n\n            if (cache) {\n              cache.set(obj, newObj);\n            }\n\n            return newObj;\n          }\n\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            return Constructor;\n          }\n\n          function _get(target, property, receiver) {\n            if (typeof Reflect !== \"undefined\" && Reflect.get) {\n              _get = Reflect.get;\n            } else {\n              _get = function _get(target, property, receiver) {\n                var base = _superPropBase(target, property);\n\n                if (!base) return;\n                var desc = Object.getOwnPropertyDescriptor(base, property);\n\n                if (desc.get) {\n                  return desc.get.call(receiver);\n                }\n\n                return desc.value;\n              };\n            }\n\n            return _get(target, property, receiver || target);\n          }\n\n          function _superPropBase(object, property) {\n            while (!Object.prototype.hasOwnProperty.call(object, property)) {\n              object = _getPrototypeOf(object);\n              if (object === null) break;\n            }\n\n            return object;\n          }\n\n          function _inherits(subClass, superClass) {\n            if (typeof superClass !== \"function\" && superClass !== null) {\n              throw new TypeError(\"Super expression must either be null or a function\");\n            }\n\n            subClass.prototype = Object.create(superClass && superClass.prototype, {\n              constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true\n              }\n            });\n            if (superClass) _setPrototypeOf(subClass, superClass);\n          }\n\n          function _setPrototypeOf(o, p) {\n            _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n              o.__proto__ = p;\n              return o;\n            };\n\n            return _setPrototypeOf(o, p);\n          }\n\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n            return function _createSuperInternal() {\n              var Super = _getPrototypeOf(Derived),\n                  result;\n\n              if (hasNativeReflectConstruct) {\n                var NewTarget = _getPrototypeOf(this).constructor;\n\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n\n              return _possibleConstructorReturn(this, result);\n            };\n          }\n\n          function _possibleConstructorReturn(self, call) {\n            if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n              return call;\n            } else if (call !== void 0) {\n              throw new TypeError(\"Derived constructors may only return object or undefined\");\n            }\n\n            return _assertThisInitialized(self);\n          }\n\n          function _assertThisInitialized(self) {\n            if (self === void 0) {\n              throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            }\n\n            return self;\n          }\n\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n\n            try {\n              Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n\n          function _getPrototypeOf(o) {\n            _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n              return o.__proto__ || Object.getPrototypeOf(o);\n            };\n            return _getPrototypeOf(o);\n          }\n          /**\n           * MediaElement backend\n           */\n\n\n          var MediaElement = /*#__PURE__*/function (_WebAudio) {\n            _inherits(MediaElement, _WebAudio);\n\n            var _super = _createSuper(MediaElement);\n            /**\n             * Construct the backend\n             *\n             * @param {WavesurferParams} params Wavesurfer parameters\n             */\n\n\n            function MediaElement(params) {\n              var _this;\n\n              _classCallCheck(this, MediaElement);\n\n              _this = _super.call(this, params);\n              /** @private */\n\n              _this.params = params;\n              /**\n               * Initially a dummy media element to catch errors. Once `_load` is\n               * called, this will contain the actual `HTMLMediaElement`.\n               * @private\n               */\n\n              _this.media = {\n                currentTime: 0,\n                duration: 0,\n                paused: true,\n                playbackRate: 1,\n                play: function play() {},\n                pause: function pause() {},\n                volume: 0\n              };\n              /** @private */\n\n              _this.mediaType = params.mediaType.toLowerCase();\n              /** @private */\n\n              _this.elementPosition = params.elementPosition;\n              /** @private */\n\n              _this.peaks = null;\n              /** @private */\n\n              _this.playbackRate = 1;\n              /** @private */\n\n              _this.volume = 1;\n              /** @private */\n\n              _this.isMuted = false;\n              /** @private */\n\n              _this.buffer = null;\n              /** @private */\n\n              _this.onPlayEnd = null;\n              /** @private */\n\n              _this.mediaListeners = {};\n              return _this;\n            }\n            /**\n             * Initialise the backend, called in `wavesurfer.createBackend()`\n             */\n\n\n            _createClass(MediaElement, [{\n              key: \"init\",\n              value: function init() {\n                this.setPlaybackRate(this.params.audioRate);\n                this.createTimer();\n              }\n              /**\n               * Attach event listeners to media element.\n               */\n\n            }, {\n              key: \"_setupMediaListeners\",\n              value: function _setupMediaListeners() {\n                var _this2 = this;\n\n                this.mediaListeners.error = function () {\n                  _this2.fireEvent('error', 'Error loading media element');\n                };\n\n                this.mediaListeners.canplay = function () {\n                  _this2.fireEvent('canplay');\n                };\n\n                this.mediaListeners.ended = function () {\n                  _this2.fireEvent('finish');\n                }; // listen to and relay play, pause and seeked events to enable\n                // playback control from the external media element\n\n\n                this.mediaListeners.play = function () {\n                  _this2.fireEvent('play');\n                };\n\n                this.mediaListeners.pause = function () {\n                  _this2.fireEvent('pause');\n                };\n\n                this.mediaListeners.seeked = function (event) {\n                  _this2.fireEvent('seek');\n                };\n\n                this.mediaListeners.volumechange = function (event) {\n                  _this2.isMuted = _this2.media.muted;\n\n                  if (_this2.isMuted) {\n                    _this2.volume = 0;\n                  } else {\n                    _this2.volume = _this2.media.volume;\n                  }\n\n                  _this2.fireEvent('volume');\n                }; // reset event listeners\n\n\n                Object.keys(this.mediaListeners).forEach(function (id) {\n                  _this2.media.removeEventListener(id, _this2.mediaListeners[id]);\n\n                  _this2.media.addEventListener(id, _this2.mediaListeners[id]);\n                });\n              }\n              /**\n               * Create a timer to provide a more precise `audioprocess` event.\n               */\n\n            }, {\n              key: \"createTimer\",\n              value: function createTimer() {\n                var _this3 = this;\n\n                var onAudioProcess = function onAudioProcess() {\n                  if (_this3.isPaused()) {\n                    return;\n                  }\n\n                  _this3.fireEvent('audioprocess', _this3.getCurrentTime()); // Call again in the next frame\n\n\n                  util.frame(onAudioProcess)();\n                };\n\n                this.on('play', onAudioProcess); // Update the progress one more time to prevent it from being stuck in\n                // case of lower framerates\n\n                this.on('pause', function () {\n                  _this3.fireEvent('audioprocess', _this3.getCurrentTime());\n                });\n              }\n              /**\n               * Create media element with url as its source,\n               * and append to container element.\n               *\n               * @param {string} url Path to media file\n               * @param {HTMLElement} container HTML element\n               * @param {number[]|Number.<Array[]>} peaks Array of peak data\n               * @param {string} preload HTML 5 preload attribute value\n               * @throws Will throw an error if the `url` argument is not a valid media\n               * element.\n               */\n\n            }, {\n              key: \"load\",\n              value: function load(url, container, peaks, preload) {\n                var media = document.createElement(this.mediaType);\n                media.controls = this.params.mediaControls;\n                media.autoplay = this.params.autoplay || false;\n                media.preload = preload == null ? 'auto' : preload;\n                media.src = url;\n                media.style.width = '100%';\n                var prevMedia = container.querySelector(this.mediaType);\n\n                if (prevMedia) {\n                  container.removeChild(prevMedia);\n                }\n\n                container.appendChild(media);\n\n                this._load(media, peaks, preload);\n              }\n              /**\n               * Load existing media element.\n               *\n               * @param {HTMLMediaElement} elt HTML5 Audio or Video element\n               * @param {number[]|Number.<Array[]>} peaks Array of peak data\n               */\n\n            }, {\n              key: \"loadElt\",\n              value: function loadElt(elt, peaks) {\n                elt.controls = this.params.mediaControls;\n                elt.autoplay = this.params.autoplay || false;\n\n                this._load(elt, peaks, elt.preload);\n              }\n              /**\n               * Method called by both `load` (from url)\n               * and `loadElt` (existing media element) methods.\n               *\n               * @param {HTMLMediaElement} media HTML5 Audio or Video element\n               * @param {number[]|Number.<Array[]>} peaks Array of peak data\n               * @param {string} preload HTML 5 preload attribute value\n               * @throws Will throw an error if the `media` argument is not a valid media\n               * element.\n               * @private\n               */\n\n            }, {\n              key: \"_load\",\n              value: function _load(media, peaks, preload) {\n                // verify media element is valid\n                if (!(media instanceof HTMLMediaElement) || typeof media.addEventListener === 'undefined') {\n                  throw new Error('media parameter is not a valid media element');\n                } // load must be called manually on iOS, otherwise peaks won't draw\n                // until a user interaction triggers load --> 'ready' event\n                //\n                // note that we avoid calling media.load here when given peaks and preload == 'none'\n                // as this almost always triggers some browser fetch of the media.\n\n\n                if (typeof media.load == 'function' && !(peaks && preload == 'none')) {\n                  // Resets the media element and restarts the media resource. Any\n                  // pending events are discarded. How much media data is fetched is\n                  // still affected by the preload attribute.\n                  media.load();\n                }\n\n                this.media = media;\n\n                this._setupMediaListeners();\n\n                this.peaks = peaks;\n                this.onPlayEnd = null;\n                this.buffer = null;\n                this.isMuted = media.muted;\n                this.setPlaybackRate(this.playbackRate);\n                this.setVolume(this.volume);\n              }\n              /**\n               * Used by `wavesurfer.isPlaying()` and `wavesurfer.playPause()`\n               *\n               * @return {boolean} Media paused or not\n               */\n\n            }, {\n              key: \"isPaused\",\n              value: function isPaused() {\n                return !this.media || this.media.paused;\n              }\n              /**\n               * Used by `wavesurfer.getDuration()`\n               *\n               * @return {number} Duration\n               */\n\n            }, {\n              key: \"getDuration\",\n              value: function getDuration() {\n                if (this.explicitDuration) {\n                  return this.explicitDuration;\n                }\n\n                var duration = (this.buffer || this.media).duration;\n\n                if (duration >= Infinity) {\n                  // streaming audio\n                  duration = this.media.seekable.end(0);\n                }\n\n                return duration;\n              }\n              /**\n               * Returns the current time in seconds relative to the audio-clip's\n               * duration.\n               *\n               * @return {number} Current time\n               */\n\n            }, {\n              key: \"getCurrentTime\",\n              value: function getCurrentTime() {\n                return this.media && this.media.currentTime;\n              }\n              /**\n               * Get the position from 0 to 1\n               *\n               * @return {number} Current position\n               */\n\n            }, {\n              key: \"getPlayedPercents\",\n              value: function getPlayedPercents() {\n                return this.getCurrentTime() / this.getDuration() || 0;\n              }\n              /**\n               * Get the audio source playback rate.\n               *\n               * @return {number} Playback rate\n               */\n\n            }, {\n              key: \"getPlaybackRate\",\n              value: function getPlaybackRate() {\n                return this.playbackRate || this.media.playbackRate;\n              }\n              /**\n               * Set the audio source playback rate.\n               *\n               * @param {number} value Playback rate\n               */\n\n            }, {\n              key: \"setPlaybackRate\",\n              value: function setPlaybackRate(value) {\n                this.playbackRate = value || 1;\n                this.media.playbackRate = this.playbackRate;\n              }\n              /**\n               * Used by `wavesurfer.seekTo()`\n               *\n               * @param {number} start Position to start at in seconds\n               */\n\n            }, {\n              key: \"seekTo\",\n              value: function seekTo(start) {\n                if (start != null) {\n                  this.media.currentTime = start;\n                }\n\n                this.clearPlayEnd();\n              }\n              /**\n               * Plays the loaded audio region.\n               *\n               * @param {number} start Start offset in seconds, relative to the beginning\n               * of a clip.\n               * @param {number} end When to stop, relative to the beginning of a clip.\n               * @emits MediaElement#play\n               * @return {Promise} Result\n               */\n\n            }, {\n              key: \"play\",\n              value: function play(start, end) {\n                this.seekTo(start);\n                var promise = this.media.play();\n                end && this.setPlayEnd(end);\n                return promise;\n              }\n              /**\n               * Pauses the loaded audio.\n               *\n               * @emits MediaElement#pause\n               * @return {Promise} Result\n               */\n\n            }, {\n              key: \"pause\",\n              value: function pause() {\n                var promise;\n\n                if (this.media) {\n                  promise = this.media.pause();\n                }\n\n                this.clearPlayEnd();\n                return promise;\n              }\n              /**\n               * Set the play end\n               *\n               * @param {number} end Where to end\n               */\n\n            }, {\n              key: \"setPlayEnd\",\n              value: function setPlayEnd(end) {\n                var _this4 = this;\n\n                this.clearPlayEnd();\n\n                this._onPlayEnd = function (time) {\n                  if (time >= end) {\n                    _this4.pause();\n\n                    _this4.seekTo(end);\n                  }\n                };\n\n                this.on('audioprocess', this._onPlayEnd);\n              }\n              /** @private */\n\n            }, {\n              key: \"clearPlayEnd\",\n              value: function clearPlayEnd() {\n                if (this._onPlayEnd) {\n                  this.un('audioprocess', this._onPlayEnd);\n                  this._onPlayEnd = null;\n                }\n              }\n              /**\n               * Compute the max and min value of the waveform when broken into\n               * <length> subranges.\n               *\n               * @param {number} length How many subranges to break the waveform into.\n               * @param {number} first First sample in the required range.\n               * @param {number} last Last sample in the required range.\n               * @return {number[]|Number.<Array[]>} Array of 2*<length> peaks or array of\n               * arrays of peaks consisting of (max, min) values for each subrange.\n               */\n\n            }, {\n              key: \"getPeaks\",\n              value: function getPeaks(length, first, last) {\n                if (this.buffer) {\n                  return _get(_getPrototypeOf(MediaElement.prototype), \"getPeaks\", this).call(this, length, first, last);\n                }\n\n                return this.peaks || [];\n              }\n              /**\n               * Set the sink id for the media player\n               *\n               * @param {string} deviceId String value representing audio device id.\n               * @returns {Promise} A Promise that resolves to `undefined` when there\n               * are no errors.\n               */\n\n            }, {\n              key: \"setSinkId\",\n              value: function setSinkId(deviceId) {\n                if (deviceId) {\n                  if (!this.media.setSinkId) {\n                    return Promise.reject(new Error('setSinkId is not supported in your browser'));\n                  }\n\n                  return this.media.setSinkId(deviceId);\n                }\n\n                return Promise.reject(new Error('Invalid deviceId: ' + deviceId));\n              }\n              /**\n               * Get the current volume\n               *\n               * @return {number} value A floating point value between 0 and 1.\n               */\n\n            }, {\n              key: \"getVolume\",\n              value: function getVolume() {\n                return this.volume;\n              }\n              /**\n               * Set the audio volume\n               *\n               * @param {number} value A floating point value between 0 and 1.\n               */\n\n            }, {\n              key: \"setVolume\",\n              value: function setVolume(value) {\n                this.volume = value; // no need to change when it's already at that volume\n\n                if (this.media.volume !== this.volume) {\n                  this.media.volume = this.volume;\n                }\n              }\n              /**\n               * Enable or disable muted audio\n               *\n               * @since 4.0.0\n               * @param {boolean} muted Specify `true` to mute audio.\n               */\n\n            }, {\n              key: \"setMute\",\n              value: function setMute(muted) {\n                // This causes a volume change to be emitted too through the\n                // volumechange event listener.\n                this.isMuted = this.media.muted = muted;\n              }\n              /**\n               * This is called when wavesurfer is destroyed\n               *\n               */\n\n            }, {\n              key: \"destroy\",\n              value: function destroy() {\n                var _this5 = this;\n\n                this.pause();\n                this.unAll();\n                this.destroyed = true; // cleanup media event listeners\n\n                Object.keys(this.mediaListeners).forEach(function (id) {\n                  if (_this5.media) {\n                    _this5.media.removeEventListener(id, _this5.mediaListeners[id]);\n                  }\n                });\n\n                if (this.params.removeMediaElementOnDestroy && this.media && this.media.parentNode) {\n                  this.media.parentNode.removeChild(this.media);\n                }\n\n                this.media = null;\n              }\n            }]);\n\n            return MediaElement;\n          }(_webaudio.default);\n\n          exports.default = MediaElement;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/peakcache.js\":\n        /*!**************************!*\\\n          !*** ./src/peakcache.js ***!\n          \\**************************/\n\n        /***/\n        (module, exports) => {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            return Constructor;\n          }\n          /**\n           * Caches the decoded peaks data to improve rendering speed for large audio\n           *\n           * Is used if the option parameter `partialRender` is set to `true`\n           */\n\n\n          var PeakCache = /*#__PURE__*/function () {\n            /**\n             * Instantiate cache\n             */\n            function PeakCache() {\n              _classCallCheck(this, PeakCache);\n\n              this.clearPeakCache();\n            }\n            /**\n             * Empty the cache\n             */\n\n\n            _createClass(PeakCache, [{\n              key: \"clearPeakCache\",\n              value: function clearPeakCache() {\n                /**\n                 * Flat array with entries that are always in pairs to mark the\n                 * beginning and end of each subrange.  This is a convenience so we can\n                 * iterate over the pairs for easy set difference operations.\n                 * @private\n                 */\n                this.peakCacheRanges = [];\n                /**\n                 * Length of the entire cachable region, used for resetting the cache\n                 * when this changes (zoom events, for instance).\n                 * @private\n                 */\n\n                this.peakCacheLength = -1;\n              }\n              /**\n               * Add a range of peaks to the cache\n               *\n               * @param {number} length The length of the range\n               * @param {number} start The x offset of the start of the range\n               * @param {number} end The x offset of the end of the range\n               * @return {Number.<Array[]>} Array with arrays of numbers\n               */\n\n            }, {\n              key: \"addRangeToPeakCache\",\n              value: function addRangeToPeakCache(length, start, end) {\n                if (length != this.peakCacheLength) {\n                  this.clearPeakCache();\n                  this.peakCacheLength = length;\n                } // Return ranges that weren't in the cache before the call.\n\n\n                var uncachedRanges = [];\n                var i = 0; // Skip ranges before the current start.\n\n                while (i < this.peakCacheRanges.length && this.peakCacheRanges[i] < start) {\n                  i++;\n                } // If |i| is even, |start| falls after an existing range.  Otherwise,\n                // |start| falls between an existing range, and the uncached region\n                // starts when we encounter the next node in |peakCacheRanges| or\n                // |end|, whichever comes first.\n\n\n                if (i % 2 == 0) {\n                  uncachedRanges.push(start);\n                }\n\n                while (i < this.peakCacheRanges.length && this.peakCacheRanges[i] <= end) {\n                  uncachedRanges.push(this.peakCacheRanges[i]);\n                  i++;\n                } // If |i| is even, |end| is after all existing ranges.\n\n\n                if (i % 2 == 0) {\n                  uncachedRanges.push(end);\n                } // Filter out the 0-length ranges.\n\n\n                uncachedRanges = uncachedRanges.filter(function (item, pos, arr) {\n                  if (pos == 0) {\n                    return item != arr[pos + 1];\n                  } else if (pos == arr.length - 1) {\n                    return item != arr[pos - 1];\n                  }\n\n                  return item != arr[pos - 1] && item != arr[pos + 1];\n                }); // Merge the two ranges together, uncachedRanges will either contain\n                // wholly new points, or duplicates of points in peakCacheRanges.  If\n                // duplicates are detected, remove both and extend the range.\n\n                this.peakCacheRanges = this.peakCacheRanges.concat(uncachedRanges);\n                this.peakCacheRanges = this.peakCacheRanges.sort(function (a, b) {\n                  return a - b;\n                }).filter(function (item, pos, arr) {\n                  if (pos == 0) {\n                    return item != arr[pos + 1];\n                  } else if (pos == arr.length - 1) {\n                    return item != arr[pos - 1];\n                  }\n\n                  return item != arr[pos - 1] && item != arr[pos + 1];\n                }); // Push the uncached ranges into an array of arrays for ease of\n                // iteration in the functions that call this.\n\n                var uncachedRangePairs = [];\n\n                for (i = 0; i < uncachedRanges.length; i += 2) {\n                  uncachedRangePairs.push([uncachedRanges[i], uncachedRanges[i + 1]]);\n                }\n\n                return uncachedRangePairs;\n              }\n              /**\n               * For testing\n               *\n               * @return {Number.<Array[]>} Array with arrays of numbers\n               */\n\n            }, {\n              key: \"getCacheRanges\",\n              value: function getCacheRanges() {\n                var peakCacheRangePairs = [];\n                var i;\n\n                for (i = 0; i < this.peakCacheRanges.length; i += 2) {\n                  peakCacheRangePairs.push([this.peakCacheRanges[i], this.peakCacheRanges[i + 1]]);\n                }\n\n                return peakCacheRangePairs;\n              }\n            }]);\n\n            return PeakCache;\n          }();\n\n          exports.default = PeakCache;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/util/absMax.js\":\n        /*!****************************!*\\\n          !*** ./src/util/absMax.js ***!\n          \\****************************/\n\n        /***/\n        (module, exports, __webpack_require__) => {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = absMax;\n\n          var _max = _interopRequireDefault(__webpack_require__(\n          /*! ./max */\n          \"./src/util/max.js\"));\n\n          var _min = _interopRequireDefault(__webpack_require__(\n          /*! ./min */\n          \"./src/util/min.js\"));\n\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n          /**\n           * Get the largest absolute value in an array\n           *\n           * @param   {Array} values Array of numbers\n           * @returns {Number} Largest number found\n           * @example console.log(max([-3, 2, 1]), max([-3, 2, 4])); // logs 3 4\n           * @since 4.3.0\n           */\n\n\n          function absMax(values) {\n            var max = (0, _max.default)(values);\n            var min = (0, _min.default)(values);\n            return -min > max ? -min : max;\n          }\n\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/util/clamp.js\":\n        /*!***************************!*\\\n          !*** ./src/util/clamp.js ***!\n          \\***************************/\n\n        /***/\n        (module, exports) => {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = clamp;\n          /**\n           * Returns a number limited to the given range.\n           *\n           * @param {number} val The number to be limited to a range\n           * @param {number} min The lower boundary of the limit range\n           * @param {number} max The upper boundary of the limit range\n           * @returns {number} A number in the range [min, max]\n           */\n\n          function clamp(val, min, max) {\n            return Math.min(Math.max(min, val), max);\n          }\n\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/util/fetch.js\":\n        /*!***************************!*\\\n          !*** ./src/util/fetch.js ***!\n          \\***************************/\n\n        /***/\n        (module, exports, __webpack_require__) => {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = fetchFile;\n\n          var _observer = _interopRequireDefault(__webpack_require__(\n          /*! ./observer */\n          \"./src/util/observer.js\"));\n\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            return Constructor;\n          }\n\n          var ProgressHandler = /*#__PURE__*/function () {\n            /**\n             * Instantiate ProgressHandler\n             *\n             * @param {Observer} instance The `fetchFile` observer instance.\n             * @param {Number} contentLength Content length.\n             * @param {Response} response Response object.\n             */\n            function ProgressHandler(instance, contentLength, response) {\n              _classCallCheck(this, ProgressHandler);\n\n              this.instance = instance;\n              this.instance._reader = response.body.getReader();\n              this.total = parseInt(contentLength, 10);\n              this.loaded = 0;\n            }\n            /**\n             * A method that is called once, immediately after the `ReadableStream``\n             * is constructed.\n             *\n             * @param {ReadableStreamDefaultController} controller Controller instance\n             *     used to control the stream.\n             */\n\n\n            _createClass(ProgressHandler, [{\n              key: \"start\",\n              value: function start(controller) {\n                var _this = this;\n\n                var read = function read() {\n                  // instance._reader.read() returns a promise that resolves\n                  // when a value has been received\n                  _this.instance._reader.read().then(function (_ref) {\n                    var done = _ref.done,\n                        value = _ref.value; // result objects contain two properties:\n                    // done  - true if the stream has already given you all its data.\n                    // value - some data. Always undefined when done is true.\n\n                    if (done) {\n                      // ensure onProgress called when content-length=0\n                      if (_this.total === 0) {\n                        _this.instance.onProgress.call(_this.instance, {\n                          loaded: _this.loaded,\n                          total: _this.total,\n                          lengthComputable: false\n                        });\n                      } // no more data needs to be consumed, close the stream\n\n\n                      controller.close();\n                      return;\n                    }\n\n                    _this.loaded += value.byteLength;\n\n                    _this.instance.onProgress.call(_this.instance, {\n                      loaded: _this.loaded,\n                      total: _this.total,\n                      lengthComputable: !(_this.total === 0)\n                    }); // enqueue the next data chunk into our target stream\n\n\n                    controller.enqueue(value);\n                    read();\n                  }).catch(function (error) {\n                    controller.error(error);\n                  });\n                };\n\n                read();\n              }\n            }]);\n\n            return ProgressHandler;\n          }();\n          /**\n           * Load a file using `fetch`.\n           *\n           * @param {object} options Request options to use. See example below.\n           * @returns {Observer} Observer instance\n           * @example\n           * // default options\n           * let options = {\n           *     url: undefined,\n           *     method: 'GET',\n           *     mode: 'cors',\n           *     credentials: 'same-origin',\n           *     cache: 'default',\n           *     responseType: 'json',\n           *     requestHeaders: [],\n           *     redirect: 'follow',\n           *     referrer: 'client'\n           * };\n           *\n           * // override some options\n           * options.url = '../media/demo.wav';\n          \n           * // available types: 'arraybuffer', 'blob', 'json' or 'text'\n           * options.responseType = 'arraybuffer';\n           *\n           * // make fetch call\n           * let request = util.fetchFile(options);\n           *\n           * // listen for events\n           * request.on('progress', e => {\n           *     console.log('progress', e);\n           * });\n           *\n           * request.on('success', data => {\n           *     console.log('success!', data);\n           * });\n           *\n           * request.on('error', e => {\n           *     console.warn('fetchFile error: ', e);\n           * });\n           */\n\n\n          function fetchFile(options) {\n            if (!options) {\n              throw new Error('fetch options missing');\n            } else if (!options.url) {\n              throw new Error('fetch url missing');\n            }\n\n            var instance = new _observer.default();\n            var fetchHeaders = new Headers();\n            var fetchRequest = new Request(options.url); // add ability to abort\n\n            instance.controller = new AbortController(); // check if headers have to be added\n\n            if (options && options.requestHeaders) {\n              // add custom request headers\n              options.requestHeaders.forEach(function (header) {\n                fetchHeaders.append(header.key, header.value);\n              });\n            } // parse fetch options\n\n\n            var responseType = options.responseType || 'json';\n            var fetchOptions = {\n              method: options.method || 'GET',\n              headers: fetchHeaders,\n              mode: options.mode || 'cors',\n              credentials: options.credentials || 'same-origin',\n              cache: options.cache || 'default',\n              redirect: options.redirect || 'follow',\n              referrer: options.referrer || 'client',\n              signal: instance.controller.signal\n            };\n            fetch(fetchRequest, fetchOptions).then(function (response) {\n              // store response reference\n              instance.response = response;\n              var progressAvailable = true;\n\n              if (!response.body) {\n                // ReadableStream is not yet supported in this browser\n                // see https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream\n                progressAvailable = false;\n              } // Server must send CORS header \"Access-Control-Expose-Headers: content-length\"\n\n\n              var contentLength = response.headers.get('content-length');\n\n              if (contentLength === null) {\n                // Content-Length server response header missing.\n                // Don't evaluate download progress if we can't compare against a total size\n                // see https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS#Access-Control-Expose-Headers\n                progressAvailable = false;\n              }\n\n              if (!progressAvailable) {\n                // not able to check download progress so skip it\n                return response;\n              } // fire progress event when during load\n\n\n              instance.onProgress = function (e) {\n                instance.fireEvent('progress', e);\n              };\n\n              return new Response(new ReadableStream(new ProgressHandler(instance, contentLength, response)), fetchOptions);\n            }).then(function (response) {\n              var errMsg;\n\n              if (response.ok) {\n                switch (responseType) {\n                  case 'arraybuffer':\n                    return response.arrayBuffer();\n\n                  case 'json':\n                    return response.json();\n\n                  case 'blob':\n                    return response.blob();\n\n                  case 'text':\n                    return response.text();\n\n                  default:\n                    errMsg = 'Unknown responseType: ' + responseType;\n                    break;\n                }\n              }\n\n              if (!errMsg) {\n                errMsg = 'HTTP error status: ' + response.status;\n              }\n\n              throw new Error(errMsg);\n            }).then(function (response) {\n              instance.fireEvent('success', response);\n            }).catch(function (error) {\n              instance.fireEvent('error', error);\n            }); // return the fetch request\n\n            instance.fetchRequest = fetchRequest;\n            return instance;\n          }\n\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/util/frame.js\":\n        /*!***************************!*\\\n          !*** ./src/util/frame.js ***!\n          \\***************************/\n\n        /***/\n        (module, exports, __webpack_require__) => {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = frame;\n\n          var _requestAnimationFrame = _interopRequireDefault(__webpack_require__(\n          /*! ./request-animation-frame */\n          \"./src/util/request-animation-frame.js\"));\n\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n          /**\n           * Create a function which will be called at the next requestAnimationFrame\n           * cycle\n           *\n           * @param {function} func The function to call\n           *\n           * @return {func} The function wrapped within a requestAnimationFrame\n           */\n\n\n          function frame(func) {\n            return function () {\n              for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n                args[_key] = arguments[_key];\n              }\n\n              return (0, _requestAnimationFrame.default)(function () {\n                return func.apply(void 0, args);\n              });\n            };\n          }\n\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/util/get-id.js\":\n        /*!****************************!*\\\n          !*** ./src/util/get-id.js ***!\n          \\****************************/\n\n        /***/\n        (module, exports) => {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = getId;\n          /**\n           * Get a random prefixed ID\n           *\n           * @param {String} prefix Prefix to use. Default is `'wavesurfer_'`.\n           * @returns {String} Random prefixed ID\n           * @example\n           * console.log(getId()); // logs 'wavesurfer_b5pors4ru6g'\n           *\n           * let prefix = 'foo-';\n           * console.log(getId(prefix)); // logs 'foo-b5pors4ru6g'\n           */\n\n          function getId(prefix) {\n            if (prefix === undefined) {\n              prefix = 'wavesurfer_';\n            }\n\n            return prefix + Math.random().toString(32).substring(2);\n          }\n\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/util/index.js\":\n        /*!***************************!*\\\n          !*** ./src/util/index.js ***!\n          \\***************************/\n\n        /***/\n        (__unused_webpack_module, exports, __webpack_require__) => {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          Object.defineProperty(exports, \"getId\", {\n            enumerable: true,\n            get: function get() {\n              return _getId.default;\n            }\n          });\n          Object.defineProperty(exports, \"max\", {\n            enumerable: true,\n            get: function get() {\n              return _max.default;\n            }\n          });\n          Object.defineProperty(exports, \"min\", {\n            enumerable: true,\n            get: function get() {\n              return _min.default;\n            }\n          });\n          Object.defineProperty(exports, \"absMax\", {\n            enumerable: true,\n            get: function get() {\n              return _absMax.default;\n            }\n          });\n          Object.defineProperty(exports, \"Observer\", {\n            enumerable: true,\n            get: function get() {\n              return _observer.default;\n            }\n          });\n          Object.defineProperty(exports, \"style\", {\n            enumerable: true,\n            get: function get() {\n              return _style.default;\n            }\n          });\n          Object.defineProperty(exports, \"requestAnimationFrame\", {\n            enumerable: true,\n            get: function get() {\n              return _requestAnimationFrame.default;\n            }\n          });\n          Object.defineProperty(exports, \"frame\", {\n            enumerable: true,\n            get: function get() {\n              return _frame.default;\n            }\n          });\n          Object.defineProperty(exports, \"debounce\", {\n            enumerable: true,\n            get: function get() {\n              return _debounce.default;\n            }\n          });\n          Object.defineProperty(exports, \"preventClick\", {\n            enumerable: true,\n            get: function get() {\n              return _preventClick.default;\n            }\n          });\n          Object.defineProperty(exports, \"fetchFile\", {\n            enumerable: true,\n            get: function get() {\n              return _fetch.default;\n            }\n          });\n          Object.defineProperty(exports, \"clamp\", {\n            enumerable: true,\n            get: function get() {\n              return _clamp.default;\n            }\n          });\n          Object.defineProperty(exports, \"withOrientation\", {\n            enumerable: true,\n            get: function get() {\n              return _orientation.default;\n            }\n          });\n          Object.defineProperty(exports, \"ignoreSilenceMode\", {\n            enumerable: true,\n            get: function get() {\n              return _silenceMode.default;\n            }\n          });\n\n          var _getId = _interopRequireDefault(__webpack_require__(\n          /*! ./get-id */\n          \"./src/util/get-id.js\"));\n\n          var _max = _interopRequireDefault(__webpack_require__(\n          /*! ./max */\n          \"./src/util/max.js\"));\n\n          var _min = _interopRequireDefault(__webpack_require__(\n          /*! ./min */\n          \"./src/util/min.js\"));\n\n          var _absMax = _interopRequireDefault(__webpack_require__(\n          /*! ./absMax */\n          \"./src/util/absMax.js\"));\n\n          var _observer = _interopRequireDefault(__webpack_require__(\n          /*! ./observer */\n          \"./src/util/observer.js\"));\n\n          var _style = _interopRequireDefault(__webpack_require__(\n          /*! ./style */\n          \"./src/util/style.js\"));\n\n          var _requestAnimationFrame = _interopRequireDefault(__webpack_require__(\n          /*! ./request-animation-frame */\n          \"./src/util/request-animation-frame.js\"));\n\n          var _frame = _interopRequireDefault(__webpack_require__(\n          /*! ./frame */\n          \"./src/util/frame.js\"));\n\n          var _debounce = _interopRequireDefault(__webpack_require__(\n          /*! debounce */\n          \"./node_modules/debounce/index.js\"));\n\n          var _preventClick = _interopRequireDefault(__webpack_require__(\n          /*! ./prevent-click */\n          \"./src/util/prevent-click.js\"));\n\n          var _fetch = _interopRequireDefault(__webpack_require__(\n          /*! ./fetch */\n          \"./src/util/fetch.js\"));\n\n          var _clamp = _interopRequireDefault(__webpack_require__(\n          /*! ./clamp */\n          \"./src/util/clamp.js\"));\n\n          var _orientation = _interopRequireDefault(__webpack_require__(\n          /*! ./orientation */\n          \"./src/util/orientation.js\"));\n\n          var _silenceMode = _interopRequireDefault(__webpack_require__(\n          /*! ./silence-mode */\n          \"./src/util/silence-mode.js\"));\n\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n          /***/\n\n        },\n\n        /***/\n        \"./src/util/max.js\":\n        /*!*************************!*\\\n          !*** ./src/util/max.js ***!\n          \\*************************/\n\n        /***/\n        (module, exports) => {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = max;\n          /**\n           * Get the largest value\n           *\n           * @param   {Array} values Array of numbers\n           * @returns {Number} Largest number found\n           * @example console.log(max([1, 2, 3])); // logs 3\n           */\n\n          function max(values) {\n            var largest = -Infinity;\n            Object.keys(values).forEach(function (i) {\n              if (values[i] > largest) {\n                largest = values[i];\n              }\n            });\n            return largest;\n          }\n\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/util/min.js\":\n        /*!*************************!*\\\n          !*** ./src/util/min.js ***!\n          \\*************************/\n\n        /***/\n        (module, exports) => {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = min;\n          /**\n           * Get the smallest value\n           *\n           * @param   {Array} values Array of numbers\n           * @returns {Number} Smallest number found\n           * @example console.log(min([1, 2, 3])); // logs 1\n           */\n\n          function min(values) {\n            var smallest = Number(Infinity);\n            Object.keys(values).forEach(function (i) {\n              if (values[i] < smallest) {\n                smallest = values[i];\n              }\n            });\n            return smallest;\n          }\n\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/util/observer.js\":\n        /*!******************************!*\\\n          !*** ./src/util/observer.js ***!\n          \\******************************/\n\n        /***/\n        (module, exports) => {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            return Constructor;\n          }\n          /**\n           * @typedef {Object} ListenerDescriptor\n           * @property {string} name The name of the event\n           * @property {function} callback The callback\n           * @property {function} un The function to call to remove the listener\n           */\n\n          /**\n           * Observer class\n           */\n\n\n          var Observer = /*#__PURE__*/function () {\n            /**\n             * Instantiate Observer\n             */\n            function Observer() {\n              _classCallCheck(this, Observer);\n              /**\n               * @private\n               * @todo Initialise the handlers here already and remove the conditional\n               * assignment in `on()`\n               */\n\n\n              this._disabledEventEmissions = [];\n              this.handlers = null;\n            }\n            /**\n             * Attach a handler function for an event.\n             *\n             * @param {string} event Name of the event to listen to\n             * @param {function} fn The callback to trigger when the event is fired\n             * @return {ListenerDescriptor} The event descriptor\n             */\n\n\n            _createClass(Observer, [{\n              key: \"on\",\n              value: function on(event, fn) {\n                var _this = this;\n\n                if (!this.handlers) {\n                  this.handlers = {};\n                }\n\n                var handlers = this.handlers[event];\n\n                if (!handlers) {\n                  handlers = this.handlers[event] = [];\n                }\n\n                handlers.push(fn); // Return an event descriptor\n\n                return {\n                  name: event,\n                  callback: fn,\n                  un: function un(e, fn) {\n                    return _this.un(e, fn);\n                  }\n                };\n              }\n              /**\n               * Remove an event handler.\n               *\n               * @param {string} event Name of the event the listener that should be\n               * removed listens to\n               * @param {function} fn The callback that should be removed\n               */\n\n            }, {\n              key: \"un\",\n              value: function un(event, fn) {\n                if (!this.handlers) {\n                  return;\n                }\n\n                var handlers = this.handlers[event];\n                var i;\n\n                if (handlers) {\n                  if (fn) {\n                    for (i = handlers.length - 1; i >= 0; i--) {\n                      if (handlers[i] == fn) {\n                        handlers.splice(i, 1);\n                      }\n                    }\n                  } else {\n                    handlers.length = 0;\n                  }\n                }\n              }\n              /**\n               * Remove all event handlers.\n               */\n\n            }, {\n              key: \"unAll\",\n              value: function unAll() {\n                this.handlers = null;\n              }\n              /**\n               * Attach a handler to an event. The handler is executed at most once per\n               * event type.\n               *\n               * @param {string} event The event to listen to\n               * @param {function} handler The callback that is only to be called once\n               * @return {ListenerDescriptor} The event descriptor\n               */\n\n            }, {\n              key: \"once\",\n              value: function once(event, handler) {\n                var _this2 = this;\n\n                var fn = function fn() {\n                  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n                    args[_key] = arguments[_key];\n                  }\n                  /*  eslint-disable no-invalid-this */\n\n\n                  handler.apply(_this2, args);\n                  /*  eslint-enable no-invalid-this */\n\n                  setTimeout(function () {\n                    _this2.un(event, fn);\n                  }, 0);\n                };\n\n                return this.on(event, fn);\n              }\n              /**\n               * Disable firing a list of events by name. When specified, event handlers for any event type\n               * passed in here will not be called.\n               *\n               * @since 4.0.0\n               * @param {string[]} eventNames an array of event names to disable emissions for\n               * @example\n               * // disable seek and interaction events\n               * wavesurfer.setDisabledEventEmissions(['seek', 'interaction']);\n               */\n\n            }, {\n              key: \"setDisabledEventEmissions\",\n              value: function setDisabledEventEmissions(eventNames) {\n                this._disabledEventEmissions = eventNames;\n              }\n              /**\n               * plugins borrow part of this class without calling the constructor,\n               * so we have to be careful about _disabledEventEmissions\n               */\n\n            }, {\n              key: \"_isDisabledEventEmission\",\n              value: function _isDisabledEventEmission(event) {\n                return this._disabledEventEmissions && this._disabledEventEmissions.includes(event);\n              }\n              /**\n               * Manually fire an event\n               *\n               * @param {string} event The event to fire manually\n               * @param {...any} args The arguments with which to call the listeners\n               */\n\n            }, {\n              key: \"fireEvent\",\n              value: function fireEvent(event) {\n                for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n                  args[_key2 - 1] = arguments[_key2];\n                }\n\n                if (!this.handlers || this._isDisabledEventEmission(event)) {\n                  return;\n                }\n\n                var handlers = this.handlers[event];\n                handlers && handlers.forEach(function (fn) {\n                  fn.apply(void 0, args);\n                });\n              }\n            }]);\n\n            return Observer;\n          }();\n\n          exports.default = Observer;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/util/orientation.js\":\n        /*!*********************************!*\\\n          !*** ./src/util/orientation.js ***!\n          \\*********************************/\n\n        /***/\n        (module, exports) => {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = withOrientation;\n          var verticalPropMap = {\n            width: 'height',\n            height: 'width',\n            overflowX: 'overflowY',\n            overflowY: 'overflowX',\n            clientWidth: 'clientHeight',\n            clientHeight: 'clientWidth',\n            clientX: 'clientY',\n            clientY: 'clientX',\n            scrollWidth: 'scrollHeight',\n            scrollLeft: 'scrollTop',\n            offsetLeft: 'offsetTop',\n            offsetTop: 'offsetLeft',\n            offsetHeight: 'offsetWidth',\n            offsetWidth: 'offsetHeight',\n            left: 'top',\n            right: 'bottom',\n            top: 'left',\n            bottom: 'right',\n            borderRightStyle: 'borderBottomStyle',\n            borderRightWidth: 'borderBottomWidth',\n            borderRightColor: 'borderBottomColor'\n          };\n          /**\n           * Convert a horizontally-oriented property name to a vertical one.\n           *\n           * @param {string} prop A property name\n           * @param {bool} vertical Whether the element is oriented vertically\n           * @returns {string} prop, converted appropriately\n           */\n\n          function mapProp(prop, vertical) {\n            if (Object.prototype.hasOwnProperty.call(verticalPropMap, prop)) {\n              return vertical ? verticalPropMap[prop] : prop;\n            } else {\n              return prop;\n            }\n          }\n\n          var isProxy = Symbol(\"isProxy\");\n          /**\n           * Returns an appropriately oriented object based on vertical.\n           * If vertical is true, attribute getting and setting will be mapped through\n           * verticalPropMap, so that e.g. getting the object's .width will give its\n           * .height instead.\n           * Certain methods of an oriented object will return oriented objects as well.\n           * Oriented objects can't be added to the DOM directly since they are Proxy objects\n           * and thus fail typechecks. Use domElement to get the actual element for this.\n           *\n           * @param {object} target The object to be wrapped and oriented\n           * @param {bool} vertical Whether the element is oriented vertically\n           * @returns {Proxy} An oriented object with attr translation via verticalAttrMap\n           * @since 5.0.0\n           */\n\n          function withOrientation(target, vertical) {\n            if (target[isProxy]) {\n              return target;\n            } else {\n              return new Proxy(target, {\n                get: function get(obj, prop, receiver) {\n                  if (prop === isProxy) {\n                    return true;\n                  } else if (prop === 'domElement') {\n                    return obj;\n                  } else if (prop === 'style') {\n                    return withOrientation(obj.style, vertical);\n                  } else if (prop === 'canvas') {\n                    return withOrientation(obj.canvas, vertical);\n                  } else if (prop === 'getBoundingClientRect') {\n                    return function () {\n                      return withOrientation(obj.getBoundingClientRect.apply(obj, arguments), vertical);\n                    };\n                  } else if (prop === 'getContext') {\n                    return function () {\n                      return withOrientation(obj.getContext.apply(obj, arguments), vertical);\n                    };\n                  } else {\n                    var value = obj[mapProp(prop, vertical)];\n                    return typeof value == 'function' ? value.bind(obj) : value;\n                  }\n                },\n                set: function set(obj, prop, value) {\n                  obj[mapProp(prop, vertical)] = value;\n                  return true;\n                }\n              });\n            }\n          }\n\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/util/prevent-click.js\":\n        /*!***********************************!*\\\n          !*** ./src/util/prevent-click.js ***!\n          \\***********************************/\n\n        /***/\n        (module, exports) => {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = preventClick;\n          /**\n           * Stops propagation of click event and removes event listener\n           *\n           * @private\n           * @param {object} event The click event\n           */\n\n          function preventClickHandler(event) {\n            event.stopPropagation();\n            document.body.removeEventListener('click', preventClickHandler, true);\n          }\n          /**\n           * Starts listening for click event and prevent propagation\n           *\n           * @param {object} values Values\n           */\n\n\n          function preventClick(values) {\n            document.body.addEventListener('click', preventClickHandler, true);\n          }\n\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/util/request-animation-frame.js\":\n        /*!*********************************************!*\\\n          !*** ./src/util/request-animation-frame.js ***!\n          \\*********************************************/\n\n        /***/\n        (module, exports) => {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n          /* eslint-disable valid-jsdoc */\n\n          /**\n           * Returns the `requestAnimationFrame` function for the browser, or a shim with\n           * `setTimeout` if the function is not found\n           *\n           * @return {function} Available `requestAnimationFrame` function for the browser\n           */\n\n          var _default = (window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (callback, element) {\n            return setTimeout(callback, 1000 / 60);\n          }).bind(window);\n\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/util/silence-mode.js\":\n        /*!**********************************!*\\\n          !*** ./src/util/silence-mode.js ***!\n          \\**********************************/\n\n        /***/\n        (module, exports) => {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = ignoreSilenceMode;\n          /**\n           * Ignores device silence mode when using the `WebAudio` backend.\n           *\n           * Many mobile devices contain a hardware button to mute the ringtone for incoming\n           * calls and messages. Unfortunately, on some platforms like iOS, this also mutes\n           * wavesurfer's audio when using the `WebAudio` backend. This function creates a\n           * temporary `<audio>` element that makes sure the WebAudio backend keeps playing\n           * when muting the device ringer.\n           *\n           * @since 5.2.0\n           */\n\n          function ignoreSilenceMode() {\n            // Set the src to a short bit of url encoded as a silent mp3\n            // NOTE The silence MP3 must be high quality, when web audio sounds are played\n            // in parallel the web audio sound is mixed to match the bitrate of the html sound\n            // 0.01 seconds of silence VBR220-260 Joint Stereo 859B\n            var audioData = \"data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADgnABGiAAQBCqgCRMAAgEAH///////////////7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq//////////////////9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==\"; // disable iOS Airplay (setting the attribute in js doesn't work)\n\n            var tmp = document.createElement(\"div\");\n            tmp.innerHTML = '<audio x-webkit-airplay=\"deny\"></audio>';\n            var audioSilentMode = tmp.children.item(0);\n            audioSilentMode.src = audioData;\n            audioSilentMode.preload = \"auto\";\n            audioSilentMode.type = \"audio/mpeg\";\n            audioSilentMode.disableRemotePlayback = true; // play\n\n            audioSilentMode.play(); // cleanup\n\n            audioSilentMode.remove();\n            tmp.remove();\n          }\n\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/util/style.js\":\n        /*!***************************!*\\\n          !*** ./src/util/style.js ***!\n          \\***************************/\n\n        /***/\n        (module, exports) => {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = style;\n          /**\n           * Apply a map of styles to an element\n           *\n           * @param {HTMLElement} el The element that the styles will be applied to\n           * @param {Object} styles The map of propName: attribute, both are used as-is\n           *\n           * @return {HTMLElement} el\n           */\n\n          function style(el, styles) {\n            Object.keys(styles).forEach(function (prop) {\n              if (el.style[prop] !== styles[prop]) {\n                el.style[prop] = styles[prop];\n              }\n            });\n            return el;\n          }\n\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/wavesurfer.js\":\n        /*!***************************!*\\\n          !*** ./src/wavesurfer.js ***!\n          \\***************************/\n\n        /***/\n        (module, exports, __webpack_require__) => {\n          \"use strict\";\n\n          function _typeof(obj) {\n            \"@babel/helpers - typeof\";\n\n            if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n              _typeof = function _typeof(obj) {\n                return typeof obj;\n              };\n            } else {\n              _typeof = function _typeof(obj) {\n                return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n              };\n            }\n\n            return _typeof(obj);\n          }\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          var util = _interopRequireWildcard(__webpack_require__(\n          /*! ./util */\n          \"./src/util/index.js\"));\n\n          var _drawer = _interopRequireDefault(__webpack_require__(\n          /*! ./drawer.multicanvas */\n          \"./src/drawer.multicanvas.js\"));\n\n          var _webaudio = _interopRequireDefault(__webpack_require__(\n          /*! ./webaudio */\n          \"./src/webaudio.js\"));\n\n          var _mediaelement = _interopRequireDefault(__webpack_require__(\n          /*! ./mediaelement */\n          \"./src/mediaelement.js\"));\n\n          var _peakcache = _interopRequireDefault(__webpack_require__(\n          /*! ./peakcache */\n          \"./src/peakcache.js\"));\n\n          var _mediaelementWebaudio = _interopRequireDefault(__webpack_require__(\n          /*! ./mediaelement-webaudio */\n          \"./src/mediaelement-webaudio.js\"));\n\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n\n          function _getRequireWildcardCache(nodeInterop) {\n            if (typeof WeakMap !== \"function\") return null;\n            var cacheBabelInterop = new WeakMap();\n            var cacheNodeInterop = new WeakMap();\n            return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n              return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n            })(nodeInterop);\n          }\n\n          function _interopRequireWildcard(obj, nodeInterop) {\n            if (!nodeInterop && obj && obj.__esModule) {\n              return obj;\n            }\n\n            if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n              return {\n                default: obj\n              };\n            }\n\n            var cache = _getRequireWildcardCache(nodeInterop);\n\n            if (cache && cache.has(obj)) {\n              return cache.get(obj);\n            }\n\n            var newObj = {};\n            var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n            for (var key in obj) {\n              if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n                var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n                if (desc && (desc.get || desc.set)) {\n                  Object.defineProperty(newObj, key, desc);\n                } else {\n                  newObj[key] = obj[key];\n                }\n              }\n            }\n\n            newObj.default = obj;\n\n            if (cache) {\n              cache.set(obj, newObj);\n            }\n\n            return newObj;\n          }\n\n          function _inherits(subClass, superClass) {\n            if (typeof superClass !== \"function\" && superClass !== null) {\n              throw new TypeError(\"Super expression must either be null or a function\");\n            }\n\n            subClass.prototype = Object.create(superClass && superClass.prototype, {\n              constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true\n              }\n            });\n            if (superClass) _setPrototypeOf(subClass, superClass);\n          }\n\n          function _setPrototypeOf(o, p) {\n            _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n              o.__proto__ = p;\n              return o;\n            };\n\n            return _setPrototypeOf(o, p);\n          }\n\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n            return function _createSuperInternal() {\n              var Super = _getPrototypeOf(Derived),\n                  result;\n\n              if (hasNativeReflectConstruct) {\n                var NewTarget = _getPrototypeOf(this).constructor;\n\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n\n              return _possibleConstructorReturn(this, result);\n            };\n          }\n\n          function _possibleConstructorReturn(self, call) {\n            if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n              return call;\n            } else if (call !== void 0) {\n              throw new TypeError(\"Derived constructors may only return object or undefined\");\n            }\n\n            return _assertThisInitialized(self);\n          }\n\n          function _assertThisInitialized(self) {\n            if (self === void 0) {\n              throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            }\n\n            return self;\n          }\n\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n\n            try {\n              Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n\n          function _getPrototypeOf(o) {\n            _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n              return o.__proto__ || Object.getPrototypeOf(o);\n            };\n            return _getPrototypeOf(o);\n          }\n\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            return Constructor;\n          }\n          /*\n           * This work is licensed under a BSD-3-Clause License.\n           */\n\n          /** @external {HTMLElement} https://developer.mozilla.org/en/docs/Web/API/HTMLElement */\n\n          /** @external {OfflineAudioContext} https://developer.mozilla.org/en-US/docs/Web/API/OfflineAudioContext */\n\n          /** @external {File} https://developer.mozilla.org/en-US/docs/Web/API/File */\n\n          /** @external {Blob} https://developer.mozilla.org/en-US/docs/Web/API/Blob */\n\n          /** @external {CanvasRenderingContext2D} https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D */\n\n          /** @external {MediaStreamConstraints} https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamConstraints */\n\n          /** @external {AudioNode} https://developer.mozilla.org/de/docs/Web/API/AudioNode */\n\n          /**\n           * @typedef {Object} WavesurferParams\n           * @property {AudioContext} audioContext=null Use your own previously\n           * initialized AudioContext or leave blank.\n           * @property {number} audioRate=1 Speed at which to play audio. Lower number is\n           * slower.\n           * @property {ScriptProcessorNode} audioScriptProcessor=null Use your own previously\n           * initialized ScriptProcessorNode or leave blank.\n           * @property {boolean} autoCenter=true If a scrollbar is present, center the\n           * waveform on current progress\n           * @property {number} autoCenterRate=5 If autoCenter is active, rate at which the\n           * waveform is centered\n           * @property {boolean} autoCenterImmediately=false If autoCenter is active, immediately\n           * center waveform on current progress\n           * @property {string} backend='WebAudio' `'WebAudio'|'MediaElement'|'MediaElementWebAudio'` In most cases\n           * you don't have to set this manually. MediaElement is a fallback for unsupported browsers.\n           * MediaElementWebAudio allows to use WebAudio API also with big audio files, loading audio like with\n           * MediaElement backend (HTML5 audio tag). You have to use the same methods of MediaElement backend for loading and\n           * playback, giving also peaks, so the audio data are not decoded. In this way you can use WebAudio features, like filters,\n           * also with audio with big duration. For example:\n           * ` wavesurfer.load(url | HTMLMediaElement, peaks, preload, duration);\n           *   wavesurfer.play();\n           *   wavesurfer.setFilter(customFilter);\n           * `\n           * @property {string} backgroundColor=null Change background color of the\n           * waveform container.\n           * @property {number} barHeight=1 The height of the wave bars.\n           * @property {number} barRadius=0 The radius of the wave bars. Makes bars rounded\n           * @property {number} barGap=null The optional spacing between bars of the wave,\n           * if not provided will be calculated in legacy format.\n           * @property {number} barWidth=null Draw the waveform using bars.\n           * @property {number} barMinHeight=null If specified, draw at least a bar of this height,\n           * eliminating waveform gaps\n           * @property {boolean} closeAudioContext=false Close and nullify all audio\n           * contexts when the destroy method is called.\n           * @property {!string|HTMLElement} container CSS selector or HTML element where\n           * the waveform should be drawn. This is the only required parameter.\n           * @property {string} cursorColor='#333' The fill color of the cursor indicating\n           * the playhead position.\n           * @property {number} cursorWidth=1 Measured in pixels.\n           * @property {object} drawingContextAttributes={desynchronized: false} Drawing context\n           * attributes.\n           * @property {number} duration=null Optional audio length so pre-rendered peaks\n           * can be display immediately for example.\n           * @property {boolean} fillParent=true Whether to fill the entire container or\n           * draw only according to `minPxPerSec`.\n           * @property {boolean} forceDecode=false Force decoding of audio using web audio\n           * when zooming to get a more detailed waveform.\n           * @property {number} height=128 The height of the waveform. Measured in\n           * pixels.\n           * @property {boolean} hideScrollbar=false Whether to hide the horizontal\n           * scrollbar when one would normally be shown.\n           * @property {boolean} ignoreSilenceMode=false If true, ignores device silence mode\n           * when using the `WebAudio` backend.\n           * @property {boolean} interact=true Whether the mouse interaction will be\n           * enabled at initialization. You can switch this parameter at any time later\n           * on.\n           * @property {boolean} loopSelection=true (Use with regions plugin) Enable\n           * looping of selected regions\n           * @property {number} maxCanvasWidth=4000 Maximum width of a single canvas in\n           * pixels, excluding a small overlap (2 * `pixelRatio`, rounded up to the next\n           * even integer). If the waveform is longer than this value, additional canvases\n           * will be used to render the waveform, which is useful for very large waveforms\n           * that may be too wide for browsers to draw on a single canvas.\n           * @property {boolean} mediaControls=false (Use with backend `MediaElement` or `MediaElementWebAudio`)\n           * this enables the native controls for the media element\n           * @property {string} mediaType='audio' (Use with backend `MediaElement` or `MediaElementWebAudio`)\n           * `'audio'|'video'` ('video' only for `MediaElement`)\n           * @property {number} minPxPerSec=20 Minimum number of pixels per second of\n           * audio.\n           * @property {boolean} normalize=false If true, normalize by the maximum peak\n           * instead of 1.0.\n           * @property {boolean} partialRender=false Use the PeakCache to improve\n           * rendering speed of large waveforms\n           * @property {number} pixelRatio=window.devicePixelRatio The pixel ratio used to\n           * calculate display\n           * @property {PluginDefinition[]} plugins=[] An array of plugin definitions to\n           * register during instantiation, they will be directly initialised unless they\n           * are added with the `deferInit` property set to true.\n           * @property {string} progressColor='#555' The fill color of the part of the\n           * waveform behind the cursor. When `progressColor` and `waveColor` are the same\n           * the progress wave is not rendered at all.\n           * @property {boolean} removeMediaElementOnDestroy=true Set to false to keep the\n           * media element in the DOM when the player is destroyed. This is useful when\n           * reusing an existing media element via the `loadMediaElement` method.\n           * @property {Object} renderer=MultiCanvas Can be used to inject a custom\n           * renderer.\n           * @property {boolean|number} responsive=false If set to `true` resize the\n           * waveform, when the window is resized. This is debounced with a `100ms`\n           * timeout by default. If this parameter is a number it represents that timeout.\n           * @property {boolean} rtl=false If set to `true`, renders waveform from\n           * right-to-left.\n           * @property {boolean} scrollParent=false Whether to scroll the container with a\n           * lengthy waveform. Otherwise the waveform is shrunk to the container width\n           * (see fillParent).\n           * @property {number} skipLength=2 Number of seconds to skip with the\n           * skipForward() and skipBackward() methods.\n           * @property {boolean} splitChannels=false Render with separate waveforms for\n           * the channels of the audio\n           * @property {SplitChannelOptions} splitChannelsOptions={} Options for splitChannel rendering\n           * @property {boolean} vertical=false Render the waveform vertically instead of horizontally.\n           * @property {string} waveColor='#999' The fill color of the waveform after the\n           * cursor.\n           * @property {object} xhr={} XHR options. For example:\n           * `let xhr = {\n           *     cache: 'default',\n           *     mode: 'cors',\n           *     method: 'GET',\n           *     credentials: 'same-origin',\n           *     redirect: 'follow',\n           *     referrer: 'client',\n           *     requestHeaders: [\n           *         {\n           *             key: 'Authorization',\n           *             value: 'my-token'\n           *         }\n           *     ]\n           * };`\n           */\n\n          /**\n           * @typedef {Object} PluginDefinition\n           * @desc The Object used to describe a plugin\n           * @example wavesurfer.addPlugin(pluginDefinition);\n           * @property {string} name The name of the plugin, the plugin instance will be\n           * added as a property to the wavesurfer instance under this name\n           * @property {?Object} staticProps The properties that should be added to the\n           * wavesurfer instance as static properties\n           * @property {?boolean} deferInit Don't initialise plugin\n           * automatically\n           * @property {Object} params={} The plugin parameters, they are the first parameter\n           * passed to the plugin class constructor function\n           * @property {PluginClass} instance The plugin instance factory, is called with\n           * the dependency specified in extends. Returns the plugin class.\n           */\n\n          /**\n           * @typedef {Object} SplitChannelOptions\n           * @desc parameters applied when splitChannels option is true\n           * @property {boolean} overlay=false determines whether channels are rendered on top of each other or on separate tracks\n           * @property {object} channelColors={} object describing color for each channel. Example:\n           * {\n           *     0: {\n           *         progressColor: 'green',\n           *         waveColor: 'pink'\n           *     },\n           *     1: {\n           *         progressColor: 'orange',\n           *         waveColor: 'purple'\n           *     }\n           * }\n           * @property {number[]} filterChannels=[] indexes of channels to be hidden from rendering\n           * @property {boolean} relativeNormalization=false determines whether\n           * normalization is done per channel or maintains proportionality between\n           * channels. Only applied when normalize and splitChannels are both true.\n           * @since 4.3.0\n           */\n\n          /**\n           * @interface PluginClass\n           *\n           * @desc This is the interface which is implemented by all plugin classes. Note\n           * that this only turns into an observer after being passed through\n           * `wavesurfer.addPlugin`.\n           *\n           * @extends {Observer}\n           */\n\n\n          var PluginClass = /*#__PURE__*/function () {\n            /**\n             * Construct the plugin\n             *\n             * @param {Object} params={} The plugin params (specific to the plugin)\n             * @param {Object} ws The wavesurfer instance\n             */\n            function PluginClass(params, ws) {\n              _classCallCheck(this, PluginClass);\n            }\n            /**\n             * Initialise the plugin\n             *\n             * Start doing something. This is called by\n             * `wavesurfer.initPlugin(pluginName)`\n             */\n\n\n            _createClass(PluginClass, [{\n              key: \"create\",\n              value:\n              /**\n               * Plugin definition factory\n               *\n               * This function must be used to create a plugin definition which can be\n               * used by wavesurfer to correctly instantiate the plugin.\n               *\n               * It returns a `PluginDefinition` object representing the plugin.\n               *\n               * @param {Object} params={} The plugin params (specific to the plugin)\n               */\n              function create(params) {}\n            }, {\n              key: \"init\",\n              value: function init() {}\n              /**\n               * Destroy the plugin instance\n               *\n               * Stop doing something. This is called by\n               * `wavesurfer.destroyPlugin(pluginName)`\n               */\n\n            }, {\n              key: \"destroy\",\n              value: function destroy() {}\n            }]);\n\n            return PluginClass;\n          }();\n          /**\n           * WaveSurfer core library class\n           *\n           * @extends {Observer}\n           * @example\n           * const params = {\n           *   container: '#waveform',\n           *   waveColor: 'violet',\n           *   progressColor: 'purple'\n           * };\n           *\n           * // initialise like this\n           * const wavesurfer = WaveSurfer.create(params);\n           *\n           * // or like this ...\n           * const wavesurfer = new WaveSurfer(params);\n           * wavesurfer.init();\n           *\n           * // load audio file\n           * wavesurfer.load('example/media/demo.wav');\n           */\n\n\n          var WaveSurfer = /*#__PURE__*/function (_util$Observer) {\n            _inherits(WaveSurfer, _util$Observer);\n\n            var _super = _createSuper(WaveSurfer);\n            /**\n             * Initialise wavesurfer instance\n             *\n             * @param {WavesurferParams} params Instantiation options for wavesurfer\n             * @example\n             * const wavesurfer = new WaveSurfer(params);\n             * @returns {this} Wavesurfer instance\n             */\n\n\n            function WaveSurfer(params) {\n              var _this;\n\n              _classCallCheck(this, WaveSurfer);\n\n              _this = _super.call(this);\n              /**\n               * Extract relevant parameters (or defaults)\n               * @private\n               */\n\n              _this.defaultParams = {\n                audioContext: null,\n                audioScriptProcessor: null,\n                audioRate: 1,\n                autoCenter: true,\n                autoCenterRate: 5,\n                autoCenterImmediately: false,\n                backend: 'WebAudio',\n                backgroundColor: null,\n                barHeight: 1,\n                barRadius: 0,\n                barGap: null,\n                barMinHeight: null,\n                container: null,\n                cursorColor: '#333',\n                cursorWidth: 1,\n                dragSelection: true,\n                drawingContextAttributes: {\n                  // Boolean that hints the user agent to reduce the latency\n                  // by desynchronizing the canvas paint cycle from the event\n                  // loop\n                  desynchronized: false\n                },\n                duration: null,\n                fillParent: true,\n                forceDecode: false,\n                height: 128,\n                hideScrollbar: false,\n                ignoreSilenceMode: false,\n                interact: true,\n                loopSelection: true,\n                maxCanvasWidth: 4000,\n                mediaContainer: null,\n                mediaControls: false,\n                mediaType: 'audio',\n                minPxPerSec: 20,\n                normalize: false,\n                partialRender: false,\n                pixelRatio: window.devicePixelRatio || screen.deviceXDPI / screen.logicalXDPI,\n                plugins: [],\n                progressColor: '#555',\n                removeMediaElementOnDestroy: true,\n                renderer: _drawer.default,\n                responsive: false,\n                rtl: false,\n                scrollParent: false,\n                skipLength: 2,\n                splitChannels: false,\n                splitChannelsOptions: {\n                  overlay: false,\n                  channelColors: {},\n                  filterChannels: [],\n                  relativeNormalization: false\n                },\n                vertical: false,\n                waveColor: '#999',\n                xhr: {}\n              };\n              _this.backends = {\n                MediaElement: _mediaelement.default,\n                WebAudio: _webaudio.default,\n                MediaElementWebAudio: _mediaelementWebaudio.default\n              };\n              _this.util = util;\n              _this.params = Object.assign({}, _this.defaultParams, params);\n              _this.params.splitChannelsOptions = Object.assign({}, _this.defaultParams.splitChannelsOptions, params.splitChannelsOptions);\n              /** @private */\n\n              _this.container = 'string' == typeof params.container ? document.querySelector(_this.params.container) : _this.params.container;\n\n              if (!_this.container) {\n                throw new Error('Container element not found');\n              }\n\n              if (_this.params.mediaContainer == null) {\n                /** @private */\n                _this.mediaContainer = _this.container;\n              } else if (typeof _this.params.mediaContainer == 'string') {\n                /** @private */\n                _this.mediaContainer = document.querySelector(_this.params.mediaContainer);\n              } else {\n                /** @private */\n                _this.mediaContainer = _this.params.mediaContainer;\n              }\n\n              if (!_this.mediaContainer) {\n                throw new Error('Media Container element not found');\n              }\n\n              if (_this.params.maxCanvasWidth <= 1) {\n                throw new Error('maxCanvasWidth must be greater than 1');\n              } else if (_this.params.maxCanvasWidth % 2 == 1) {\n                throw new Error('maxCanvasWidth must be an even number');\n              }\n\n              if (_this.params.rtl === true) {\n                if (_this.params.vertical === true) {\n                  util.style(_this.container, {\n                    transform: 'rotateX(180deg)'\n                  });\n                } else {\n                  util.style(_this.container, {\n                    transform: 'rotateY(180deg)'\n                  });\n                }\n              }\n\n              if (_this.params.backgroundColor) {\n                _this.setBackgroundColor(_this.params.backgroundColor);\n              }\n              /**\n               * @private Used to save the current volume when muting so we can\n               * restore once unmuted\n               * @type {number}\n               */\n\n\n              _this.savedVolume = 0;\n              /**\n               * @private The current muted state\n               * @type {boolean}\n               */\n\n              _this.isMuted = false;\n              /**\n               * @private Will hold a list of event descriptors that need to be\n               * canceled on subsequent loads of audio\n               * @type {Object[]}\n               */\n\n              _this.tmpEvents = [];\n              /**\n               * @private Holds any running audio downloads\n               * @type {Observer}\n               */\n\n              _this.currentRequest = null;\n              /** @private */\n\n              _this.arraybuffer = null;\n              /** @private */\n\n              _this.drawer = null;\n              /** @private */\n\n              _this.backend = null;\n              /** @private */\n\n              _this.peakCache = null; // cache constructor objects\n\n              if (typeof _this.params.renderer !== 'function') {\n                throw new Error('Renderer parameter is invalid');\n              }\n              /**\n               * @private The uninitialised Drawer class\n               */\n\n\n              _this.Drawer = _this.params.renderer;\n              /**\n               * @private The uninitialised Backend class\n               */\n              // Back compat\n\n              if (_this.params.backend == 'AudioElement') {\n                _this.params.backend = 'MediaElement';\n              }\n\n              if ((_this.params.backend == 'WebAudio' || _this.params.backend === 'MediaElementWebAudio') && !_webaudio.default.prototype.supportsWebAudio.call(null)) {\n                _this.params.backend = 'MediaElement';\n              }\n\n              _this.Backend = _this.backends[_this.params.backend];\n              /**\n               * @private map of plugin names that are currently initialised\n               */\n\n              _this.initialisedPluginList = {};\n              /** @private */\n\n              _this.isDestroyed = false;\n              /**\n               * Get the current ready status.\n               *\n               * @example const isReady = wavesurfer.isReady;\n               * @return {boolean}\n               */\n\n              _this.isReady = false; // responsive debounced event listener. If this.params.responsive is not\n              // set, this is never called. Use 100ms or this.params.responsive as\n              // timeout for the debounce function.\n\n              var prevWidth = 0;\n              _this._onResize = util.debounce(function () {\n                if (prevWidth != _this.drawer.wrapper.clientWidth && !_this.params.scrollParent) {\n                  prevWidth = _this.drawer.wrapper.clientWidth;\n\n                  _this.drawer.fireEvent('redraw');\n                }\n              }, typeof _this.params.responsive === 'number' ? _this.params.responsive : 100);\n              return _possibleConstructorReturn(_this, _assertThisInitialized(_this));\n            }\n            /**\n             * Initialise the wave\n             *\n             * @example\n             * var wavesurfer = new WaveSurfer(params);\n             * wavesurfer.init();\n             * @return {this} The wavesurfer instance\n             */\n\n\n            _createClass(WaveSurfer, [{\n              key: \"init\",\n              value: function init() {\n                this.registerPlugins(this.params.plugins);\n                this.createDrawer();\n                this.createBackend();\n                this.createPeakCache();\n                return this;\n              }\n              /**\n               * Add and initialise array of plugins (if `plugin.deferInit` is falsey),\n               * this function is called in the init function of wavesurfer\n               *\n               * @param {PluginDefinition[]} plugins An array of plugin definitions\n               * @emits {WaveSurfer#plugins-registered} Called with the array of plugin definitions\n               * @return {this} The wavesurfer instance\n               */\n\n            }, {\n              key: \"registerPlugins\",\n              value: function registerPlugins(plugins) {\n                var _this2 = this; // first instantiate all the plugins\n\n\n                plugins.forEach(function (plugin) {\n                  return _this2.addPlugin(plugin);\n                }); // now run the init functions\n\n                plugins.forEach(function (plugin) {\n                  // call init function of the plugin if deferInit is falsey\n                  // in that case you would manually use initPlugins()\n                  if (!plugin.deferInit) {\n                    _this2.initPlugin(plugin.name);\n                  }\n                });\n                this.fireEvent('plugins-registered', plugins);\n                return this;\n              }\n              /**\n               * Get a map of plugin names that are currently initialised\n               *\n               * @example wavesurfer.getPlugins();\n               * @return {Object} Object with plugin names\n               */\n\n            }, {\n              key: \"getActivePlugins\",\n              value: function getActivePlugins() {\n                return this.initialisedPluginList;\n              }\n              /**\n               * Add a plugin object to wavesurfer\n               *\n               * @param {PluginDefinition} plugin A plugin definition\n               * @emits {WaveSurfer#plugin-added} Called with the name of the plugin that was added\n               * @example wavesurfer.addPlugin(WaveSurfer.minimap());\n               * @return {this} The wavesurfer instance\n               */\n\n            }, {\n              key: \"addPlugin\",\n              value: function addPlugin(plugin) {\n                var _this3 = this;\n\n                if (!plugin.name) {\n                  throw new Error('Plugin does not have a name!');\n                }\n\n                if (!plugin.instance) {\n                  throw new Error(\"Plugin \".concat(plugin.name, \" does not have an instance property!\"));\n                } // staticProps properties are applied to wavesurfer instance\n\n\n                if (plugin.staticProps) {\n                  Object.keys(plugin.staticProps).forEach(function (pluginStaticProp) {\n                    /**\n                     * Properties defined in a plugin definition's `staticProps` property are added as\n                     * staticProps properties of the WaveSurfer instance\n                     */\n                    _this3[pluginStaticProp] = plugin.staticProps[pluginStaticProp];\n                  });\n                }\n\n                var Instance = plugin.instance; // turn the plugin instance into an observer\n\n                var observerPrototypeKeys = Object.getOwnPropertyNames(util.Observer.prototype);\n                observerPrototypeKeys.forEach(function (key) {\n                  Instance.prototype[key] = util.Observer.prototype[key];\n                });\n                /**\n                 * Instantiated plugin classes are added as a property of the wavesurfer\n                 * instance\n                 * @type {Object}\n                 */\n\n                this[plugin.name] = new Instance(plugin.params || {}, this);\n                this.fireEvent('plugin-added', plugin.name);\n                return this;\n              }\n              /**\n               * Initialise a plugin\n               *\n               * @param {string} name A plugin name\n               * @emits WaveSurfer#plugin-initialised\n               * @example wavesurfer.initPlugin('minimap');\n               * @return {this} The wavesurfer instance\n               */\n\n            }, {\n              key: \"initPlugin\",\n              value: function initPlugin(name) {\n                if (!this[name]) {\n                  throw new Error(\"Plugin \".concat(name, \" has not been added yet!\"));\n                }\n\n                if (this.initialisedPluginList[name]) {\n                  // destroy any already initialised plugins\n                  this.destroyPlugin(name);\n                }\n\n                this[name].init();\n                this.initialisedPluginList[name] = true;\n                this.fireEvent('plugin-initialised', name);\n                return this;\n              }\n              /**\n               * Destroy a plugin\n               *\n               * @param {string} name A plugin name\n               * @emits WaveSurfer#plugin-destroyed\n               * @example wavesurfer.destroyPlugin('minimap');\n               * @returns {this} The wavesurfer instance\n               */\n\n            }, {\n              key: \"destroyPlugin\",\n              value: function destroyPlugin(name) {\n                if (!this[name]) {\n                  throw new Error(\"Plugin \".concat(name, \" has not been added yet and cannot be destroyed!\"));\n                }\n\n                if (!this.initialisedPluginList[name]) {\n                  throw new Error(\"Plugin \".concat(name, \" is not active and cannot be destroyed!\"));\n                }\n\n                if (typeof this[name].destroy !== 'function') {\n                  throw new Error(\"Plugin \".concat(name, \" does not have a destroy function!\"));\n                }\n\n                this[name].destroy();\n                delete this.initialisedPluginList[name];\n                this.fireEvent('plugin-destroyed', name);\n                return this;\n              }\n              /**\n               * Destroy all initialised plugins. Convenience function to use when\n               * wavesurfer is removed\n               *\n               * @private\n               */\n\n            }, {\n              key: \"destroyAllPlugins\",\n              value: function destroyAllPlugins() {\n                var _this4 = this;\n\n                Object.keys(this.initialisedPluginList).forEach(function (name) {\n                  return _this4.destroyPlugin(name);\n                });\n              }\n              /**\n               * Create the drawer and draw the waveform\n               *\n               * @private\n               * @emits WaveSurfer#drawer-created\n               */\n\n            }, {\n              key: \"createDrawer\",\n              value: function createDrawer() {\n                var _this5 = this;\n\n                this.drawer = new this.Drawer(this.container, this.params);\n                this.drawer.init();\n                this.fireEvent('drawer-created', this.drawer);\n\n                if (this.params.responsive !== false) {\n                  window.addEventListener('resize', this._onResize, true);\n                  window.addEventListener('orientationchange', this._onResize, true);\n                }\n\n                this.drawer.on('redraw', function () {\n                  _this5.drawBuffer();\n\n                  _this5.drawer.progress(_this5.backend.getPlayedPercents());\n                }); // Click-to-seek\n\n                this.drawer.on('click', function (e, progress) {\n                  setTimeout(function () {\n                    return _this5.seekTo(progress);\n                  }, 0);\n                }); // Relay the scroll event from the drawer\n\n                this.drawer.on('scroll', function (e) {\n                  if (_this5.params.partialRender) {\n                    _this5.drawBuffer();\n                  }\n\n                  _this5.fireEvent('scroll', e);\n                });\n              }\n              /**\n               * Create the backend\n               *\n               * @private\n               * @emits WaveSurfer#backend-created\n               */\n\n            }, {\n              key: \"createBackend\",\n              value: function createBackend() {\n                var _this6 = this;\n\n                if (this.backend) {\n                  this.backend.destroy();\n                }\n\n                this.backend = new this.Backend(this.params);\n                this.backend.init();\n                this.fireEvent('backend-created', this.backend);\n                this.backend.on('finish', function () {\n                  _this6.drawer.progress(_this6.backend.getPlayedPercents());\n\n                  _this6.fireEvent('finish');\n                });\n                this.backend.on('play', function () {\n                  return _this6.fireEvent('play');\n                });\n                this.backend.on('pause', function () {\n                  return _this6.fireEvent('pause');\n                });\n                this.backend.on('audioprocess', function (time) {\n                  _this6.drawer.progress(_this6.backend.getPlayedPercents());\n\n                  _this6.fireEvent('audioprocess', time);\n                }); // only needed for MediaElement and MediaElementWebAudio backend\n\n                if (this.params.backend === 'MediaElement' || this.params.backend === 'MediaElementWebAudio') {\n                  this.backend.on('seek', function () {\n                    _this6.drawer.progress(_this6.backend.getPlayedPercents());\n                  });\n                  this.backend.on('volume', function () {\n                    var newVolume = _this6.getVolume();\n\n                    _this6.fireEvent('volume', newVolume);\n\n                    if (_this6.backend.isMuted !== _this6.isMuted) {\n                      _this6.isMuted = _this6.backend.isMuted;\n\n                      _this6.fireEvent('mute', _this6.isMuted);\n                    }\n                  });\n                }\n              }\n              /**\n               * Create the peak cache\n               *\n               * @private\n               */\n\n            }, {\n              key: \"createPeakCache\",\n              value: function createPeakCache() {\n                if (this.params.partialRender) {\n                  this.peakCache = new _peakcache.default();\n                }\n              }\n              /**\n               * Get the duration of the audio clip\n               *\n               * @example const duration = wavesurfer.getDuration();\n               * @return {number} Duration in seconds\n               */\n\n            }, {\n              key: \"getDuration\",\n              value: function getDuration() {\n                return this.backend.getDuration();\n              }\n              /**\n               * Get the current playback position\n               *\n               * @example const currentTime = wavesurfer.getCurrentTime();\n               * @return {number} Playback position in seconds\n               */\n\n            }, {\n              key: \"getCurrentTime\",\n              value: function getCurrentTime() {\n                return this.backend.getCurrentTime();\n              }\n              /**\n               * Set the current play time in seconds.\n               *\n               * @param {number} seconds A positive number in seconds. E.g. 10 means 10\n               * seconds, 60 means 1 minute\n               */\n\n            }, {\n              key: \"setCurrentTime\",\n              value: function setCurrentTime(seconds) {\n                if (seconds >= this.getDuration()) {\n                  this.seekTo(1);\n                } else {\n                  this.seekTo(seconds / this.getDuration());\n                }\n              }\n              /**\n               * Starts playback from the current position. Optional start and end\n               * measured in seconds can be used to set the range of audio to play.\n               *\n               * @param {?number} start Position to start at\n               * @param {?number} end Position to end at\n               * @emits WaveSurfer#interaction\n               * @return {Promise} Result of the backend play method\n               * @example\n               * // play from second 1 to 5\n               * wavesurfer.play(1, 5);\n               */\n\n            }, {\n              key: \"play\",\n              value: function play(start, end) {\n                var _this7 = this;\n\n                if (this.params.ignoreSilenceMode) {\n                  // ignores device hardware silence mode\n                  util.ignoreSilenceMode();\n                }\n\n                this.fireEvent('interaction', function () {\n                  return _this7.play(start, end);\n                });\n                return this.backend.play(start, end);\n              }\n              /**\n               * Set a point in seconds for playback to stop at.\n               *\n               * @param {number} position Position (in seconds) to stop at\n               * @version 3.3.0\n               */\n\n            }, {\n              key: \"setPlayEnd\",\n              value: function setPlayEnd(position) {\n                this.backend.setPlayEnd(position);\n              }\n              /**\n               * Stops and pauses playback\n               *\n               * @example wavesurfer.pause();\n               * @return {Promise} Result of the backend pause method\n               */\n\n            }, {\n              key: \"pause\",\n              value: function pause() {\n                if (!this.backend.isPaused()) {\n                  return this.backend.pause();\n                }\n              }\n              /**\n               * Toggle playback\n               *\n               * @example wavesurfer.playPause();\n               * @return {Promise} Result of the backend play or pause method\n               */\n\n            }, {\n              key: \"playPause\",\n              value: function playPause() {\n                return this.backend.isPaused() ? this.play() : this.pause();\n              }\n              /**\n               * Get the current playback state\n               *\n               * @example const isPlaying = wavesurfer.isPlaying();\n               * @return {boolean} False if paused, true if playing\n               */\n\n            }, {\n              key: \"isPlaying\",\n              value: function isPlaying() {\n                return !this.backend.isPaused();\n              }\n              /**\n               * Skip backward\n               *\n               * @param {?number} seconds Amount to skip back, if not specified `skipLength`\n               * is used\n               * @example wavesurfer.skipBackward();\n               */\n\n            }, {\n              key: \"skipBackward\",\n              value: function skipBackward(seconds) {\n                this.skip(-seconds || -this.params.skipLength);\n              }\n              /**\n               * Skip forward\n               *\n               * @param {?number} seconds Amount to skip back, if not specified `skipLength`\n               * is used\n               * @example wavesurfer.skipForward();\n               */\n\n            }, {\n              key: \"skipForward\",\n              value: function skipForward(seconds) {\n                this.skip(seconds || this.params.skipLength);\n              }\n              /**\n               * Skip a number of seconds from the current position (use a negative value\n               * to go backwards).\n               *\n               * @param {number} offset Amount to skip back or forwards\n               * @example\n               * // go back 2 seconds\n               * wavesurfer.skip(-2);\n               */\n\n            }, {\n              key: \"skip\",\n              value: function skip(offset) {\n                var duration = this.getDuration() || 1;\n                var position = this.getCurrentTime() || 0;\n                position = Math.max(0, Math.min(duration, position + (offset || 0)));\n                this.seekAndCenter(position / duration);\n              }\n              /**\n               * Seeks to a position and centers the view\n               *\n               * @param {number} progress Between 0 (=beginning) and 1 (=end)\n               * @example\n               * // seek and go to the middle of the audio\n               * wavesurfer.seekTo(0.5);\n               */\n\n            }, {\n              key: \"seekAndCenter\",\n              value: function seekAndCenter(progress) {\n                this.seekTo(progress);\n                this.drawer.recenter(progress);\n              }\n              /**\n               * Seeks to a position\n               *\n               * @param {number} progress Between 0 (=beginning) and 1 (=end)\n               * @emits WaveSurfer#interaction\n               * @emits WaveSurfer#seek\n               * @example\n               * // seek to the middle of the audio\n               * wavesurfer.seekTo(0.5);\n               */\n\n            }, {\n              key: \"seekTo\",\n              value: function seekTo(progress) {\n                var _this8 = this; // return an error if progress is not a number between 0 and 1\n\n\n                if (typeof progress !== 'number' || !isFinite(progress) || progress < 0 || progress > 1) {\n                  throw new Error('Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!');\n                }\n\n                this.fireEvent('interaction', function () {\n                  return _this8.seekTo(progress);\n                });\n                var isWebAudioBackend = this.params.backend === 'WebAudio';\n                var paused = this.backend.isPaused();\n\n                if (isWebAudioBackend && !paused) {\n                  this.backend.pause();\n                } // avoid small scrolls while paused seeking\n\n\n                var oldScrollParent = this.params.scrollParent;\n                this.params.scrollParent = false;\n                this.backend.seekTo(progress * this.getDuration());\n                this.drawer.progress(progress);\n\n                if (isWebAudioBackend && !paused) {\n                  this.backend.play();\n                }\n\n                this.params.scrollParent = oldScrollParent;\n                this.fireEvent('seek', progress);\n              }\n              /**\n               * Stops and goes to the beginning.\n               *\n               * @example wavesurfer.stop();\n               */\n\n            }, {\n              key: \"stop\",\n              value: function stop() {\n                this.pause();\n                this.seekTo(0);\n                this.drawer.progress(0);\n              }\n              /**\n               * Sets the ID of the audio device to use for output and returns a Promise.\n               *\n               * @param {string} deviceId String value representing underlying output\n               * device\n               * @returns {Promise} `Promise` that resolves to `undefined` when there are\n               * no errors detected.\n               */\n\n            }, {\n              key: \"setSinkId\",\n              value: function setSinkId(deviceId) {\n                return this.backend.setSinkId(deviceId);\n              }\n              /**\n               * Set the playback volume.\n               *\n               * @param {number} newVolume A value between 0 and 1, 0 being no\n               * volume and 1 being full volume.\n               * @emits WaveSurfer#volume\n               */\n\n            }, {\n              key: \"setVolume\",\n              value: function setVolume(newVolume) {\n                this.backend.setVolume(newVolume);\n                this.fireEvent('volume', newVolume);\n              }\n              /**\n               * Get the playback volume.\n               *\n               * @return {number} A value between 0 and 1, 0 being no\n               * volume and 1 being full volume.\n               */\n\n            }, {\n              key: \"getVolume\",\n              value: function getVolume() {\n                return this.backend.getVolume();\n              }\n              /**\n               * Set the playback rate.\n               *\n               * @param {number} rate A positive number. E.g. 0.5 means half the normal\n               * speed, 2 means double speed and so on.\n               * @example wavesurfer.setPlaybackRate(2);\n               */\n\n            }, {\n              key: \"setPlaybackRate\",\n              value: function setPlaybackRate(rate) {\n                this.backend.setPlaybackRate(rate);\n              }\n              /**\n               * Get the playback rate.\n               *\n               * @return {number} The current playback rate.\n               */\n\n            }, {\n              key: \"getPlaybackRate\",\n              value: function getPlaybackRate() {\n                return this.backend.getPlaybackRate();\n              }\n              /**\n               * Toggle the volume on and off. If not currently muted it will save the\n               * current volume value and turn the volume off. If currently muted then it\n               * will restore the volume to the saved value, and then rest the saved\n               * value.\n               *\n               * @example wavesurfer.toggleMute();\n               */\n\n            }, {\n              key: \"toggleMute\",\n              value: function toggleMute() {\n                this.setMute(!this.isMuted);\n              }\n              /**\n               * Enable or disable muted audio\n               *\n               * @param {boolean} mute Specify `true` to mute audio.\n               * @emits WaveSurfer#volume\n               * @emits WaveSurfer#mute\n               * @example\n               * // unmute\n               * wavesurfer.setMute(false);\n               * console.log(wavesurfer.getMute()) // logs false\n               */\n\n            }, {\n              key: \"setMute\",\n              value: function setMute(mute) {\n                // ignore all muting requests if the audio is already in that state\n                if (mute === this.isMuted) {\n                  this.fireEvent('mute', this.isMuted);\n                  return;\n                }\n\n                if (this.backend.setMute) {\n                  // Backends such as the MediaElement backend have their own handling\n                  // of mute, let them handle it.\n                  this.backend.setMute(mute);\n                  this.isMuted = mute;\n                } else {\n                  if (mute) {\n                    // If currently not muted then save current volume,\n                    // turn off the volume and update the mute properties\n                    this.savedVolume = this.backend.getVolume();\n                    this.backend.setVolume(0);\n                    this.isMuted = true;\n                    this.fireEvent('volume', 0);\n                  } else {\n                    // If currently muted then restore to the saved volume\n                    // and update the mute properties\n                    this.backend.setVolume(this.savedVolume);\n                    this.isMuted = false;\n                    this.fireEvent('volume', this.savedVolume);\n                  }\n                }\n\n                this.fireEvent('mute', this.isMuted);\n              }\n              /**\n               * Get the current mute status.\n               *\n               * @example const isMuted = wavesurfer.getMute();\n               * @return {boolean} Current mute status\n               */\n\n            }, {\n              key: \"getMute\",\n              value: function getMute() {\n                return this.isMuted;\n              }\n              /**\n               * Get the list of current set filters as an array.\n               *\n               * Filters must be set with setFilters method first\n               *\n               * @return {array} List of enabled filters\n               */\n\n            }, {\n              key: \"getFilters\",\n              value: function getFilters() {\n                return this.backend.filters || [];\n              }\n              /**\n               * Toggles `scrollParent` and redraws\n               *\n               * @example wavesurfer.toggleScroll();\n               */\n\n            }, {\n              key: \"toggleScroll\",\n              value: function toggleScroll() {\n                this.params.scrollParent = !this.params.scrollParent;\n                this.drawBuffer();\n              }\n              /**\n               * Toggle mouse interaction\n               *\n               * @example wavesurfer.toggleInteraction();\n               */\n\n            }, {\n              key: \"toggleInteraction\",\n              value: function toggleInteraction() {\n                this.params.interact = !this.params.interact;\n              }\n              /**\n               * Get the fill color of the waveform after the cursor.\n               *\n               * @return {string} A CSS color string.\n               */\n\n            }, {\n              key: \"getWaveColor\",\n              value: function getWaveColor() {\n                return this.params.waveColor;\n              }\n              /**\n               * Set the fill color of the waveform after the cursor.\n               *\n               * @param {string} color A CSS color string.\n               * @example wavesurfer.setWaveColor('#ddd');\n               */\n\n            }, {\n              key: \"setWaveColor\",\n              value: function setWaveColor(color) {\n                this.params.waveColor = color;\n                this.drawBuffer();\n              }\n              /**\n               * Get the fill color of the waveform behind the cursor.\n               *\n               * @return {string} A CSS color string.\n               */\n\n            }, {\n              key: \"getProgressColor\",\n              value: function getProgressColor() {\n                return this.params.progressColor;\n              }\n              /**\n               * Set the fill color of the waveform behind the cursor.\n               *\n               * @param {string} color A CSS color string.\n               * @example wavesurfer.setProgressColor('#400');\n               */\n\n            }, {\n              key: \"setProgressColor\",\n              value: function setProgressColor(color) {\n                this.params.progressColor = color;\n                this.drawBuffer();\n              }\n              /**\n               * Get the background color of the waveform container.\n               *\n               * @return {string} A CSS color string.\n               */\n\n            }, {\n              key: \"getBackgroundColor\",\n              value: function getBackgroundColor() {\n                return this.params.backgroundColor;\n              }\n              /**\n               * Set the background color of the waveform container.\n               *\n               * @param {string} color A CSS color string.\n               * @example wavesurfer.setBackgroundColor('#FF00FF');\n               */\n\n            }, {\n              key: \"setBackgroundColor\",\n              value: function setBackgroundColor(color) {\n                this.params.backgroundColor = color;\n                util.style(this.container, {\n                  background: this.params.backgroundColor\n                });\n              }\n              /**\n               * Get the fill color of the cursor indicating the playhead\n               * position.\n               *\n               * @return {string} A CSS color string.\n               */\n\n            }, {\n              key: \"getCursorColor\",\n              value: function getCursorColor() {\n                return this.params.cursorColor;\n              }\n              /**\n               * Set the fill color of the cursor indicating the playhead\n               * position.\n               *\n               * @param {string} color A CSS color string.\n               * @example wavesurfer.setCursorColor('#222');\n               */\n\n            }, {\n              key: \"setCursorColor\",\n              value: function setCursorColor(color) {\n                this.params.cursorColor = color;\n                this.drawer.updateCursor();\n              }\n              /**\n               * Get the height of the waveform.\n               *\n               * @return {number} Height measured in pixels.\n               */\n\n            }, {\n              key: \"getHeight\",\n              value: function getHeight() {\n                return this.params.height;\n              }\n              /**\n               * Set the height of the waveform.\n               *\n               * @param {number} height Height measured in pixels.\n               * @example wavesurfer.setHeight(200);\n               */\n\n            }, {\n              key: \"setHeight\",\n              value: function setHeight(height) {\n                this.params.height = height;\n                this.drawer.setHeight(height * this.params.pixelRatio);\n                this.drawBuffer();\n              }\n              /**\n               * Hide channels from being drawn on the waveform if splitting channels.\n               *\n               * For example, if we want to draw only the peaks for the right stereo channel:\n               *\n               * const wavesurfer = new WaveSurfer.create({...splitChannels: true});\n               * wavesurfer.load('stereo_audio.mp3');\n               *\n               * wavesurfer.setFilteredChannel([0]); <-- hide left channel peaks.\n               *\n               * @param {array} channelIndices Channels to be filtered out from drawing.\n               * @version 4.0.0\n               */\n\n            }, {\n              key: \"setFilteredChannels\",\n              value: function setFilteredChannels(channelIndices) {\n                this.params.splitChannelsOptions.filterChannels = channelIndices;\n                this.drawBuffer();\n              }\n              /**\n               * Get the correct peaks for current wave view-port and render wave\n               *\n               * @private\n               * @emits WaveSurfer#redraw\n               */\n\n            }, {\n              key: \"drawBuffer\",\n              value: function drawBuffer() {\n                var nominalWidth = Math.round(this.getDuration() * this.params.minPxPerSec * this.params.pixelRatio);\n                var parentWidth = this.drawer.getWidth();\n                var width = nominalWidth; // always start at 0 after zooming for scrolling : issue redraw left part\n\n                var start = 0;\n                var end = Math.max(start + parentWidth, width); // Fill container\n\n                if (this.params.fillParent && (!this.params.scrollParent || nominalWidth < parentWidth)) {\n                  width = parentWidth;\n                  start = 0;\n                  end = width;\n                }\n\n                var peaks;\n\n                if (this.params.partialRender) {\n                  var newRanges = this.peakCache.addRangeToPeakCache(width, start, end);\n                  var i;\n\n                  for (i = 0; i < newRanges.length; i++) {\n                    peaks = this.backend.getPeaks(width, newRanges[i][0], newRanges[i][1]);\n                    this.drawer.drawPeaks(peaks, width, newRanges[i][0], newRanges[i][1]);\n                  }\n                } else {\n                  peaks = this.backend.getPeaks(width, start, end);\n                  this.drawer.drawPeaks(peaks, width, start, end);\n                }\n\n                this.fireEvent('redraw', peaks, width);\n              }\n              /**\n               * Horizontally zooms the waveform in and out. It also changes the parameter\n               * `minPxPerSec` and enables the `scrollParent` option. Calling the function\n               * with a falsey parameter will reset the zoom state.\n               *\n               * @param {?number} pxPerSec Number of horizontal pixels per second of\n               * audio, if none is set the waveform returns to unzoomed state\n               * @emits WaveSurfer#zoom\n               * @example wavesurfer.zoom(20);\n               */\n\n            }, {\n              key: \"zoom\",\n              value: function zoom(pxPerSec) {\n                if (!pxPerSec) {\n                  this.params.minPxPerSec = this.defaultParams.minPxPerSec;\n                  this.params.scrollParent = false;\n                } else {\n                  this.params.minPxPerSec = pxPerSec;\n                  this.params.scrollParent = true;\n                }\n\n                this.drawBuffer();\n                this.drawer.progress(this.backend.getPlayedPercents());\n                this.drawer.recenter(this.getCurrentTime() / this.getDuration());\n                this.fireEvent('zoom', pxPerSec);\n              }\n              /**\n               * Decode buffer and load\n               *\n               * @private\n               * @param {ArrayBuffer} arraybuffer Buffer to process\n               */\n\n            }, {\n              key: \"loadArrayBuffer\",\n              value: function loadArrayBuffer(arraybuffer) {\n                var _this9 = this;\n\n                this.decodeArrayBuffer(arraybuffer, function (data) {\n                  if (!_this9.isDestroyed) {\n                    _this9.loadDecodedBuffer(data);\n                  }\n                });\n              }\n              /**\n               * Directly load an externally decoded AudioBuffer\n               *\n               * @private\n               * @param {AudioBuffer} buffer Buffer to process\n               * @emits WaveSurfer#ready\n               */\n\n            }, {\n              key: \"loadDecodedBuffer\",\n              value: function loadDecodedBuffer(buffer) {\n                this.backend.load(buffer);\n                this.drawBuffer();\n                this.isReady = true;\n                this.fireEvent('ready');\n              }\n              /**\n               * Loads audio data from a Blob or File object\n               *\n               * @param {Blob|File} blob Audio data\n               * @example\n               */\n\n            }, {\n              key: \"loadBlob\",\n              value: function loadBlob(blob) {\n                var _this10 = this; // Create file reader\n\n\n                var reader = new FileReader();\n                reader.addEventListener('progress', function (e) {\n                  return _this10.onProgress(e);\n                });\n                reader.addEventListener('load', function (e) {\n                  return _this10.loadArrayBuffer(e.target.result);\n                });\n                reader.addEventListener('error', function () {\n                  return _this10.fireEvent('error', 'Error reading file');\n                });\n                reader.readAsArrayBuffer(blob);\n                this.empty();\n              }\n              /**\n               * Loads audio and re-renders the waveform.\n               *\n               * @param {string|HTMLMediaElement} url The url of the audio file or the\n               * audio element with the audio\n               * @param {number[]|Number.<Array[]>} peaks Wavesurfer does not have to decode\n               * the audio to render the waveform if this is specified\n               * @param {?string} preload (Use with backend `MediaElement` and `MediaElementWebAudio`)\n               * `'none'|'metadata'|'auto'` Preload attribute for the media element\n               * @param {?number} duration The duration of the audio. This is used to\n               * render the peaks data in the correct size for the audio duration (as\n               * befits the current `minPxPerSec` and zoom value) without having to decode\n               * the audio.\n               * @returns {void}\n               * @throws Will throw an error if the `url` argument is empty.\n               * @example\n               * // uses fetch or media element to load file (depending on backend)\n               * wavesurfer.load('http://example.com/demo.wav');\n               *\n               * // setting preload attribute with media element backend and supplying\n               * // peaks\n               * wavesurfer.load(\n               *   'http://example.com/demo.wav',\n               *   [0.0218, 0.0183, 0.0165, 0.0198, 0.2137, 0.2888],\n               *   true\n               * );\n               */\n\n            }, {\n              key: \"load\",\n              value: function load(url, peaks, preload, duration) {\n                if (!url) {\n                  throw new Error('url parameter cannot be empty');\n                }\n\n                this.empty();\n\n                if (preload) {\n                  // check whether the preload attribute will be usable and if not log\n                  // a warning listing the reasons why not and nullify the variable\n                  var preloadIgnoreReasons = {\n                    \"Preload is not 'auto', 'none' or 'metadata'\": ['auto', 'metadata', 'none'].indexOf(preload) === -1,\n                    'Peaks are not provided': !peaks,\n                    \"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'\": ['MediaElement', 'MediaElementWebAudio'].indexOf(this.params.backend) === -1,\n                    'Url is not of type string': typeof url !== 'string'\n                  };\n                  var activeReasons = Object.keys(preloadIgnoreReasons).filter(function (reason) {\n                    return preloadIgnoreReasons[reason];\n                  });\n\n                  if (activeReasons.length) {\n                    // eslint-disable-next-line no-console\n                    console.warn('Preload parameter of wavesurfer.load will be ignored because:\\n\\t- ' + activeReasons.join('\\n\\t- ')); // stop invalid values from being used\n\n                    preload = null;\n                  }\n                } // loadBuffer(url, peaks, duration) requires that url is a string\n                // but users can pass in a HTMLMediaElement to WaveSurfer\n\n\n                if (this.params.backend === 'WebAudio' && url instanceof HTMLMediaElement) {\n                  url = url.src;\n                }\n\n                switch (this.params.backend) {\n                  case 'WebAudio':\n                    return this.loadBuffer(url, peaks, duration);\n\n                  case 'MediaElement':\n                  case 'MediaElementWebAudio':\n                    return this.loadMediaElement(url, peaks, preload, duration);\n                }\n              }\n              /**\n               * Loads audio using Web Audio buffer backend.\n               *\n               * @private\n               * @emits WaveSurfer#waveform-ready\n               * @param {string} url URL of audio file\n               * @param {number[]|Number.<Array[]>} peaks Peaks data\n               * @param {?number} duration Optional duration of audio file\n               * @returns {void}\n               */\n\n            }, {\n              key: \"loadBuffer\",\n              value: function loadBuffer(url, peaks, duration) {\n                var _this11 = this;\n\n                var load = function load(action) {\n                  if (action) {\n                    _this11.tmpEvents.push(_this11.once('ready', action));\n                  }\n\n                  return _this11.getArrayBuffer(url, function (data) {\n                    return _this11.loadArrayBuffer(data);\n                  });\n                };\n\n                if (peaks) {\n                  this.backend.setPeaks(peaks, duration);\n                  this.drawBuffer();\n                  this.fireEvent('waveform-ready');\n                  this.tmpEvents.push(this.once('interaction', load));\n                } else {\n                  return load();\n                }\n              }\n              /**\n               * Either create a media element, or load an existing media element.\n               *\n               * @private\n               * @emits WaveSurfer#waveform-ready\n               * @param {string|HTMLMediaElement} urlOrElt Either a path to a media file, or an\n               * existing HTML5 Audio/Video Element\n               * @param {number[]|Number.<Array[]>} peaks Array of peaks. Required to bypass web audio\n               * dependency\n               * @param {?boolean} preload Set to true if the preload attribute of the\n               * audio element should be enabled\n               * @param {?number} duration Optional duration of audio file\n               */\n\n            }, {\n              key: \"loadMediaElement\",\n              value: function loadMediaElement(urlOrElt, peaks, preload, duration) {\n                var _this12 = this;\n\n                var url = urlOrElt;\n\n                if (typeof urlOrElt === 'string') {\n                  this.backend.load(url, this.mediaContainer, peaks, preload);\n                } else {\n                  var elt = urlOrElt;\n                  this.backend.loadElt(elt, peaks); // If peaks are not provided,\n                  // url = element.src so we can get peaks with web audio\n\n                  url = elt.src;\n                }\n\n                this.tmpEvents.push(this.backend.once('canplay', function () {\n                  // ignore when backend was already destroyed\n                  if (!_this12.backend.destroyed) {\n                    _this12.drawBuffer();\n\n                    _this12.isReady = true;\n\n                    _this12.fireEvent('ready');\n                  }\n                }), this.backend.once('error', function (err) {\n                  return _this12.fireEvent('error', err);\n                })); // If peaks are provided, render them and fire the `waveform-ready` event.\n\n                if (peaks) {\n                  this.backend.setPeaks(peaks, duration);\n                  this.drawBuffer();\n                  this.fireEvent('waveform-ready');\n                } // If no pre-decoded peaks are provided, or are provided with\n                // forceDecode flag, attempt to download the audio file and decode it\n                // with Web Audio.\n\n\n                if ((!peaks || this.params.forceDecode) && this.backend.supportsWebAudio()) {\n                  this.getArrayBuffer(url, function (arraybuffer) {\n                    _this12.decodeArrayBuffer(arraybuffer, function (buffer) {\n                      _this12.backend.buffer = buffer;\n\n                      _this12.backend.setPeaks(null);\n\n                      _this12.drawBuffer();\n\n                      _this12.fireEvent('waveform-ready');\n                    });\n                  });\n                }\n              }\n              /**\n               * Decode an array buffer and pass data to a callback\n               *\n               * @private\n               * @param {Object} arraybuffer The array buffer to decode\n               * @param {function} callback The function to call on complete\n               */\n\n            }, {\n              key: \"decodeArrayBuffer\",\n              value: function decodeArrayBuffer(arraybuffer, callback) {\n                var _this13 = this;\n\n                if (!this.isDestroyed) {\n                  this.arraybuffer = arraybuffer;\n                  this.backend.decodeArrayBuffer(arraybuffer, function (data) {\n                    // Only use the decoded data if we haven't been destroyed or\n                    // another decode started in the meantime\n                    if (!_this13.isDestroyed && _this13.arraybuffer == arraybuffer) {\n                      callback(data);\n                      _this13.arraybuffer = null;\n                    }\n                  }, function () {\n                    return _this13.fireEvent('error', 'Error decoding audiobuffer');\n                  });\n                }\n              }\n              /**\n               * Load an array buffer using fetch and pass the result to a callback\n               *\n               * @param {string} url The URL of the file object\n               * @param {function} callback The function to call on complete\n               * @returns {util.fetchFile} fetch call\n               * @private\n               */\n\n            }, {\n              key: \"getArrayBuffer\",\n              value: function getArrayBuffer(url, callback) {\n                var _this14 = this;\n\n                var options = Object.assign({\n                  url: url,\n                  responseType: 'arraybuffer'\n                }, this.params.xhr);\n                var request = util.fetchFile(options);\n                this.currentRequest = request;\n                this.tmpEvents.push(request.on('progress', function (e) {\n                  _this14.onProgress(e);\n                }), request.on('success', function (data) {\n                  callback(data);\n                  _this14.currentRequest = null;\n                }), request.on('error', function (e) {\n                  _this14.fireEvent('error', e);\n\n                  _this14.currentRequest = null;\n                }));\n                return request;\n              }\n              /**\n               * Called while the audio file is loading\n               *\n               * @private\n               * @param {Event} e Progress event\n               * @emits WaveSurfer#loading\n               */\n\n            }, {\n              key: \"onProgress\",\n              value: function onProgress(e) {\n                var percentComplete;\n\n                if (e.lengthComputable) {\n                  percentComplete = e.loaded / e.total;\n                } else {\n                  // Approximate progress with an asymptotic\n                  // function, and assume downloads in the 1-3 MB range.\n                  percentComplete = e.loaded / (e.loaded + 1000000);\n                }\n\n                this.fireEvent('loading', Math.round(percentComplete * 100), e.target);\n              }\n              /**\n               * Exports PCM data into a JSON array and optionally opens in a new window\n               * as valid JSON Blob instance.\n               *\n               * @param {number} length=1024 The scale in which to export the peaks\n               * @param {number} accuracy=10000\n               * @param {?boolean} noWindow Set to true to disable opening a new\n               * window with the JSON\n               * @param {number} start Start index\n               * @param {number} end End index\n               * @return {Promise} Promise that resolves with array of peaks\n               */\n\n            }, {\n              key: \"exportPCM\",\n              value: function exportPCM(length, accuracy, noWindow, start, end) {\n                length = length || 1024;\n                start = start || 0;\n                accuracy = accuracy || 10000;\n                noWindow = noWindow || false;\n                var peaks = this.backend.getPeaks(length, start, end);\n                var arr = [].map.call(peaks, function (val) {\n                  return Math.round(val * accuracy) / accuracy;\n                });\n                return new Promise(function (resolve, reject) {\n                  if (!noWindow) {\n                    var blobJSON = new Blob([JSON.stringify(arr)], {\n                      type: 'application/json;charset=utf-8'\n                    });\n                    var objURL = URL.createObjectURL(blobJSON);\n                    window.open(objURL);\n                    URL.revokeObjectURL(objURL);\n                  }\n\n                  resolve(arr);\n                });\n              }\n              /**\n               * Save waveform image as data URI.\n               *\n               * The default format is `'image/png'`. Other supported types are\n               * `'image/jpeg'` and `'image/webp'`.\n               *\n               * @param {string} format='image/png' A string indicating the image format.\n               * The default format type is `'image/png'`.\n               * @param {number} quality=1 A number between 0 and 1 indicating the image\n               * quality to use for image formats that use lossy compression such as\n               * `'image/jpeg'`` and `'image/webp'`.\n               * @param {string} type Image data type to return. Either 'dataURL' (default)\n               * or 'blob'.\n               * @return {string|string[]|Promise} When using `'dataURL'` type this returns\n               * a single data URL or an array of data URLs, one for each canvas. When using\n               * `'blob'` type this returns a `Promise` resolving with an array of `Blob`\n               * instances, one for each canvas.\n               */\n\n            }, {\n              key: \"exportImage\",\n              value: function exportImage(format, quality, type) {\n                if (!format) {\n                  format = 'image/png';\n                }\n\n                if (!quality) {\n                  quality = 1;\n                }\n\n                if (!type) {\n                  type = 'dataURL';\n                }\n\n                return this.drawer.getImage(format, quality, type);\n              }\n              /**\n               * Cancel any fetch request currently in progress\n               */\n\n            }, {\n              key: \"cancelAjax\",\n              value: function cancelAjax() {\n                if (this.currentRequest && this.currentRequest.controller) {\n                  // If the current request has a ProgressHandler, then its ReadableStream might need to be cancelled too\n                  // See: Wavesurfer issue #2042\n                  // See Firefox bug: https://bugzilla.mozilla.org/show_bug.cgi?id=1583815\n                  if (this.currentRequest._reader) {\n                    // Ignoring exceptions thrown by call to cancel()\n                    this.currentRequest._reader.cancel().catch(function (err) {});\n                  }\n\n                  this.currentRequest.controller.abort();\n                  this.currentRequest = null;\n                }\n              }\n              /**\n               * @private\n               */\n\n            }, {\n              key: \"clearTmpEvents\",\n              value: function clearTmpEvents() {\n                this.tmpEvents.forEach(function (e) {\n                  return e.un();\n                });\n              }\n              /**\n               * Display empty waveform.\n               */\n\n            }, {\n              key: \"empty\",\n              value: function empty() {\n                if (!this.backend.isPaused()) {\n                  this.stop();\n                  this.backend.disconnectSource();\n                }\n\n                this.isReady = false;\n                this.cancelAjax();\n                this.clearTmpEvents(); // empty drawer\n\n                this.drawer.progress(0);\n                this.drawer.setWidth(0);\n                this.drawer.drawPeaks({\n                  length: this.drawer.getWidth()\n                }, 0);\n              }\n              /**\n               * Remove events, elements and disconnect WebAudio nodes.\n               *\n               * @emits WaveSurfer#destroy\n               */\n\n            }, {\n              key: \"destroy\",\n              value: function destroy() {\n                this.destroyAllPlugins();\n                this.fireEvent('destroy');\n                this.cancelAjax();\n                this.clearTmpEvents();\n                this.unAll();\n\n                if (this.params.responsive !== false) {\n                  window.removeEventListener('resize', this._onResize, true);\n                  window.removeEventListener('orientationchange', this._onResize, true);\n                }\n\n                if (this.backend) {\n                  this.backend.destroy(); // clears memory usage\n\n                  this.backend = null;\n                }\n\n                if (this.drawer) {\n                  this.drawer.destroy();\n                }\n\n                this.isDestroyed = true;\n                this.isReady = false;\n                this.arraybuffer = null;\n              }\n            }], [{\n              key: \"create\",\n              value:\n              /** @private */\n\n              /** @private */\n\n              /**\n               * Instantiate this class, call its `init` function and returns it\n               *\n               * @param {WavesurferParams} params The wavesurfer parameters\n               * @return {Object} WaveSurfer instance\n               * @example const wavesurfer = WaveSurfer.create(params);\n               */\n              function create(params) {\n                var wavesurfer = new WaveSurfer(params);\n                return wavesurfer.init();\n              }\n              /**\n               * The library version number is available as a static property of the\n               * WaveSurfer class\n               *\n               * @type {String}\n               * @example\n               * console.log('Using wavesurfer.js ' + WaveSurfer.VERSION);\n               */\n\n            }]);\n\n            return WaveSurfer;\n          }(util.Observer);\n\n          exports.default = WaveSurfer;\n          WaveSurfer.VERSION = \"5.2.0\";\n          WaveSurfer.util = util;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/webaudio.js\":\n        /*!*************************!*\\\n          !*** ./src/webaudio.js ***!\n          \\*************************/\n\n        /***/\n        (module, exports, __webpack_require__) => {\n          \"use strict\";\n\n          function _typeof(obj) {\n            \"@babel/helpers - typeof\";\n\n            if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n              _typeof = function _typeof(obj) {\n                return typeof obj;\n              };\n            } else {\n              _typeof = function _typeof(obj) {\n                return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n              };\n            }\n\n            return _typeof(obj);\n          }\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          var util = _interopRequireWildcard(__webpack_require__(\n          /*! ./util */\n          \"./src/util/index.js\"));\n\n          function _getRequireWildcardCache(nodeInterop) {\n            if (typeof WeakMap !== \"function\") return null;\n            var cacheBabelInterop = new WeakMap();\n            var cacheNodeInterop = new WeakMap();\n            return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n              return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n            })(nodeInterop);\n          }\n\n          function _interopRequireWildcard(obj, nodeInterop) {\n            if (!nodeInterop && obj && obj.__esModule) {\n              return obj;\n            }\n\n            if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n              return {\n                default: obj\n              };\n            }\n\n            var cache = _getRequireWildcardCache(nodeInterop);\n\n            if (cache && cache.has(obj)) {\n              return cache.get(obj);\n            }\n\n            var newObj = {};\n            var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n            for (var key in obj) {\n              if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n                var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n                if (desc && (desc.get || desc.set)) {\n                  Object.defineProperty(newObj, key, desc);\n                } else {\n                  newObj[key] = obj[key];\n                }\n              }\n            }\n\n            newObj.default = obj;\n\n            if (cache) {\n              cache.set(obj, newObj);\n            }\n\n            return newObj;\n          }\n\n          function _defineProperty(obj, key, value) {\n            if (key in obj) {\n              Object.defineProperty(obj, key, {\n                value: value,\n                enumerable: true,\n                configurable: true,\n                writable: true\n              });\n            } else {\n              obj[key] = value;\n            }\n\n            return obj;\n          }\n\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            return Constructor;\n          }\n\n          function _inherits(subClass, superClass) {\n            if (typeof superClass !== \"function\" && superClass !== null) {\n              throw new TypeError(\"Super expression must either be null or a function\");\n            }\n\n            subClass.prototype = Object.create(superClass && superClass.prototype, {\n              constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true\n              }\n            });\n            if (superClass) _setPrototypeOf(subClass, superClass);\n          }\n\n          function _setPrototypeOf(o, p) {\n            _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n              o.__proto__ = p;\n              return o;\n            };\n\n            return _setPrototypeOf(o, p);\n          }\n\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n            return function _createSuperInternal() {\n              var Super = _getPrototypeOf(Derived),\n                  result;\n\n              if (hasNativeReflectConstruct) {\n                var NewTarget = _getPrototypeOf(this).constructor;\n\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n\n              return _possibleConstructorReturn(this, result);\n            };\n          }\n\n          function _possibleConstructorReturn(self, call) {\n            if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n              return call;\n            } else if (call !== void 0) {\n              throw new TypeError(\"Derived constructors may only return object or undefined\");\n            }\n\n            return _assertThisInitialized(self);\n          }\n\n          function _assertThisInitialized(self) {\n            if (self === void 0) {\n              throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            }\n\n            return self;\n          }\n\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n\n            try {\n              Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n\n          function _getPrototypeOf(o) {\n            _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n              return o.__proto__ || Object.getPrototypeOf(o);\n            };\n            return _getPrototypeOf(o);\n          } // using constants to prevent someone writing the string wrong\n\n\n          var PLAYING = 'playing';\n          var PAUSED = 'paused';\n          var FINISHED = 'finished';\n          /**\n           * WebAudio backend\n           *\n           * @extends {Observer}\n           */\n\n          var WebAudio = /*#__PURE__*/function (_util$Observer) {\n            _inherits(WebAudio, _util$Observer);\n\n            var _super = _createSuper(WebAudio);\n            /**\n             * Construct the backend\n             *\n             * @param {WavesurferParams} params Wavesurfer parameters\n             */\n\n\n            function WebAudio(params) {\n              var _this$stateBehaviors, _this$states;\n\n              var _this;\n\n              _classCallCheck(this, WebAudio);\n\n              _this = _super.call(this);\n              /** @private */\n\n              _this.audioContext = null;\n              _this.offlineAudioContext = null;\n              _this.stateBehaviors = (_this$stateBehaviors = {}, _defineProperty(_this$stateBehaviors, PLAYING, {\n                init: function init() {\n                  this.addOnAudioProcess();\n                },\n                getPlayedPercents: function getPlayedPercents() {\n                  var duration = this.getDuration();\n                  return this.getCurrentTime() / duration || 0;\n                },\n                getCurrentTime: function getCurrentTime() {\n                  return this.startPosition + this.getPlayedTime();\n                }\n              }), _defineProperty(_this$stateBehaviors, PAUSED, {\n                init: function init() {\n                  this.removeOnAudioProcess();\n                },\n                getPlayedPercents: function getPlayedPercents() {\n                  var duration = this.getDuration();\n                  return this.getCurrentTime() / duration || 0;\n                },\n                getCurrentTime: function getCurrentTime() {\n                  return this.startPosition;\n                }\n              }), _defineProperty(_this$stateBehaviors, FINISHED, {\n                init: function init() {\n                  this.removeOnAudioProcess();\n                  this.fireEvent('finish');\n                },\n                getPlayedPercents: function getPlayedPercents() {\n                  return 1;\n                },\n                getCurrentTime: function getCurrentTime() {\n                  return this.getDuration();\n                }\n              }), _this$stateBehaviors);\n              _this.params = params;\n              /** ac: Audio Context instance */\n\n              _this.ac = params.audioContext || (_this.supportsWebAudio() ? _this.getAudioContext() : {});\n              /**@private */\n\n              _this.lastPlay = _this.ac.currentTime;\n              /** @private */\n\n              _this.startPosition = 0;\n              /** @private */\n\n              _this.scheduledPause = null;\n              /** @private */\n\n              _this.states = (_this$states = {}, _defineProperty(_this$states, PLAYING, Object.create(_this.stateBehaviors[PLAYING])), _defineProperty(_this$states, PAUSED, Object.create(_this.stateBehaviors[PAUSED])), _defineProperty(_this$states, FINISHED, Object.create(_this.stateBehaviors[FINISHED])), _this$states);\n              /** @private */\n\n              _this.buffer = null;\n              /** @private */\n\n              _this.filters = [];\n              /** gainNode: allows to control audio volume */\n\n              _this.gainNode = null;\n              /** @private */\n\n              _this.mergedPeaks = null;\n              /** @private */\n\n              _this.offlineAc = null;\n              /** @private */\n\n              _this.peaks = null;\n              /** @private */\n\n              _this.playbackRate = 1;\n              /** analyser: provides audio analysis information */\n\n              _this.analyser = null;\n              /** scriptNode: allows processing audio */\n\n              _this.scriptNode = null;\n              /** @private */\n\n              _this.source = null;\n              /** @private */\n\n              _this.splitPeaks = [];\n              /** @private */\n\n              _this.state = null;\n              /** @private */\n\n              _this.explicitDuration = params.duration;\n              /**\n               * Boolean indicating if the backend was destroyed.\n               */\n\n              _this.destroyed = false;\n              return _this;\n            }\n            /**\n             * Initialise the backend, called in `wavesurfer.createBackend()`\n             */\n\n\n            _createClass(WebAudio, [{\n              key: \"supportsWebAudio\",\n              value:\n              /** scriptBufferSize: size of the processing buffer */\n\n              /** audioContext: allows to process audio with WebAudio API */\n\n              /** @private */\n\n              /** @private */\n\n              /**\n               * Does the browser support this backend\n               *\n               * @return {boolean} Whether or not this browser supports this backend\n               */\n              function supportsWebAudio() {\n                return !!(window.AudioContext || window.webkitAudioContext);\n              }\n              /**\n               * Get the audio context used by this backend or create one\n               *\n               * @return {AudioContext} Existing audio context, or creates a new one\n               */\n\n            }, {\n              key: \"getAudioContext\",\n              value: function getAudioContext() {\n                if (!window.WaveSurferAudioContext) {\n                  window.WaveSurferAudioContext = new (window.AudioContext || window.webkitAudioContext)();\n                }\n\n                return window.WaveSurferAudioContext;\n              }\n              /**\n               * Get the offline audio context used by this backend or create one\n               *\n               * @param {number} sampleRate The sample rate to use\n               * @return {OfflineAudioContext} Existing offline audio context, or creates\n               * a new one\n               */\n\n            }, {\n              key: \"getOfflineAudioContext\",\n              value: function getOfflineAudioContext(sampleRate) {\n                if (!window.WaveSurferOfflineAudioContext) {\n                  window.WaveSurferOfflineAudioContext = new (window.OfflineAudioContext || window.webkitOfflineAudioContext)(1, 2, sampleRate);\n                }\n\n                return window.WaveSurferOfflineAudioContext;\n              }\n            }, {\n              key: \"init\",\n              value: function init() {\n                this.createVolumeNode();\n                this.createScriptNode();\n                this.createAnalyserNode();\n                this.setState(PAUSED);\n                this.setPlaybackRate(this.params.audioRate);\n                this.setLength(0);\n              }\n              /** @private */\n\n            }, {\n              key: \"disconnectFilters\",\n              value: function disconnectFilters() {\n                if (this.filters) {\n                  this.filters.forEach(function (filter) {\n                    filter && filter.disconnect();\n                  });\n                  this.filters = null; // Reconnect direct path\n\n                  this.analyser.connect(this.gainNode);\n                }\n              }\n              /**\n               * @private\n               *\n               * @param {string} state The new state\n               */\n\n            }, {\n              key: \"setState\",\n              value: function setState(state) {\n                if (this.state !== this.states[state]) {\n                  this.state = this.states[state];\n                  this.state.init.call(this);\n                }\n              }\n              /**\n               * Unpacked `setFilters()`\n               *\n               * @param {...AudioNode} filters One or more filters to set\n               */\n\n            }, {\n              key: \"setFilter\",\n              value: function setFilter() {\n                for (var _len = arguments.length, filters = new Array(_len), _key = 0; _key < _len; _key++) {\n                  filters[_key] = arguments[_key];\n                }\n\n                this.setFilters(filters);\n              }\n              /**\n               * Insert custom Web Audio nodes into the graph\n               *\n               * @param {AudioNode[]} filters Packed filters array\n               * @example\n               * const lowpass = wavesurfer.backend.ac.createBiquadFilter();\n               * wavesurfer.backend.setFilter(lowpass);\n               */\n\n            }, {\n              key: \"setFilters\",\n              value: function setFilters(filters) {\n                // Remove existing filters\n                this.disconnectFilters(); // Insert filters if filter array not empty\n\n                if (filters && filters.length) {\n                  this.filters = filters; // Disconnect direct path before inserting filters\n\n                  this.analyser.disconnect(); // Connect each filter in turn\n\n                  filters.reduce(function (prev, curr) {\n                    prev.connect(curr);\n                    return curr;\n                  }, this.analyser).connect(this.gainNode);\n                }\n              }\n              /** Create ScriptProcessorNode to process audio */\n\n            }, {\n              key: \"createScriptNode\",\n              value: function createScriptNode() {\n                if (this.params.audioScriptProcessor) {\n                  this.scriptNode = this.params.audioScriptProcessor;\n                } else {\n                  if (this.ac.createScriptProcessor) {\n                    this.scriptNode = this.ac.createScriptProcessor(WebAudio.scriptBufferSize);\n                  } else {\n                    this.scriptNode = this.ac.createJavaScriptNode(WebAudio.scriptBufferSize);\n                  }\n                }\n\n                this.scriptNode.connect(this.ac.destination);\n              }\n              /** @private */\n\n            }, {\n              key: \"addOnAudioProcess\",\n              value: function addOnAudioProcess() {\n                var _this2 = this;\n\n                this.scriptNode.onaudioprocess = function () {\n                  var time = _this2.getCurrentTime();\n\n                  if (time >= _this2.getDuration()) {\n                    _this2.setState(FINISHED);\n\n                    _this2.fireEvent('pause');\n                  } else if (time >= _this2.scheduledPause) {\n                    _this2.pause();\n                  } else if (_this2.state === _this2.states[PLAYING]) {\n                    _this2.fireEvent('audioprocess', time);\n                  }\n                };\n              }\n              /** @private */\n\n            }, {\n              key: \"removeOnAudioProcess\",\n              value: function removeOnAudioProcess() {\n                this.scriptNode.onaudioprocess = null;\n              }\n              /** Create analyser node to perform audio analysis */\n\n            }, {\n              key: \"createAnalyserNode\",\n              value: function createAnalyserNode() {\n                this.analyser = this.ac.createAnalyser();\n                this.analyser.connect(this.gainNode);\n              }\n              /**\n               * Create the gain node needed to control the playback volume.\n               *\n               */\n\n            }, {\n              key: \"createVolumeNode\",\n              value: function createVolumeNode() {\n                // Create gain node using the AudioContext\n                if (this.ac.createGain) {\n                  this.gainNode = this.ac.createGain();\n                } else {\n                  this.gainNode = this.ac.createGainNode();\n                } // Add the gain node to the graph\n\n\n                this.gainNode.connect(this.ac.destination);\n              }\n              /**\n               * Set the sink id for the media player\n               *\n               * @param {string} deviceId String value representing audio device id.\n               * @returns {Promise} A Promise that resolves to `undefined` when there\n               * are no errors.\n               */\n\n            }, {\n              key: \"setSinkId\",\n              value: function setSinkId(deviceId) {\n                if (deviceId) {\n                  /**\n                   * The webaudio API doesn't currently support setting the device\n                   * output. Here we create an HTMLAudioElement, connect the\n                   * webaudio stream to that element and setSinkId there.\n                   */\n                  var audio = new window.Audio();\n\n                  if (!audio.setSinkId) {\n                    return Promise.reject(new Error('setSinkId is not supported in your browser'));\n                  }\n\n                  audio.autoplay = true;\n                  var dest = this.ac.createMediaStreamDestination();\n                  this.gainNode.disconnect();\n                  this.gainNode.connect(dest);\n                  audio.srcObject = dest.stream;\n                  return audio.setSinkId(deviceId);\n                } else {\n                  return Promise.reject(new Error('Invalid deviceId: ' + deviceId));\n                }\n              }\n              /**\n               * Set the audio volume\n               *\n               * @param {number} value A floating point value between 0 and 1.\n               */\n\n            }, {\n              key: \"setVolume\",\n              value: function setVolume(value) {\n                this.gainNode.gain.setValueAtTime(value, this.ac.currentTime);\n              }\n              /**\n               * Get the current volume\n               *\n               * @return {number} value A floating point value between 0 and 1.\n               */\n\n            }, {\n              key: \"getVolume\",\n              value: function getVolume() {\n                return this.gainNode.gain.value;\n              }\n              /**\n               * Decode an array buffer and pass data to a callback\n               *\n               * @private\n               * @param {ArrayBuffer} arraybuffer The array buffer to decode\n               * @param {function} callback The function to call on complete.\n               * @param {function} errback The function to call on error.\n               */\n\n            }, {\n              key: \"decodeArrayBuffer\",\n              value: function decodeArrayBuffer(arraybuffer, callback, errback) {\n                if (!this.offlineAc) {\n                  this.offlineAc = this.getOfflineAudioContext(this.ac && this.ac.sampleRate ? this.ac.sampleRate : 44100);\n                }\n\n                if ('webkitAudioContext' in window) {\n                  // Safari: no support for Promise-based decodeAudioData enabled\n                  // Enable it in Safari using the Experimental Features > Modern WebAudio API option\n                  this.offlineAc.decodeAudioData(arraybuffer, function (data) {\n                    return callback(data);\n                  }, errback);\n                } else {\n                  this.offlineAc.decodeAudioData(arraybuffer).then(function (data) {\n                    return callback(data);\n                  }).catch(function (err) {\n                    return errback(err);\n                  });\n                }\n              }\n              /**\n               * Set pre-decoded peaks\n               *\n               * @param {number[]|Number.<Array[]>} peaks Peaks data\n               * @param {?number} duration Explicit duration\n               */\n\n            }, {\n              key: \"setPeaks\",\n              value: function setPeaks(peaks, duration) {\n                if (duration != null) {\n                  this.explicitDuration = duration;\n                }\n\n                this.peaks = peaks;\n              }\n              /**\n               * Set the rendered length (different from the length of the audio)\n               *\n               * @param {number} length The rendered length\n               */\n\n            }, {\n              key: \"setLength\",\n              value: function setLength(length) {\n                // No resize, we can preserve the cached peaks.\n                if (this.mergedPeaks && length == 2 * this.mergedPeaks.length - 1 + 2) {\n                  return;\n                }\n\n                this.splitPeaks = [];\n                this.mergedPeaks = []; // Set the last element of the sparse array so the peak arrays are\n                // appropriately sized for other calculations.\n\n                var channels = this.buffer ? this.buffer.numberOfChannels : 1;\n                var c;\n\n                for (c = 0; c < channels; c++) {\n                  this.splitPeaks[c] = [];\n                  this.splitPeaks[c][2 * (length - 1)] = 0;\n                  this.splitPeaks[c][2 * (length - 1) + 1] = 0;\n                }\n\n                this.mergedPeaks[2 * (length - 1)] = 0;\n                this.mergedPeaks[2 * (length - 1) + 1] = 0;\n              }\n              /**\n               * Compute the max and min value of the waveform when broken into <length> subranges.\n               *\n               * @param {number} length How many subranges to break the waveform into.\n               * @param {number} first First sample in the required range.\n               * @param {number} last Last sample in the required range.\n               * @return {number[]|Number.<Array[]>} Array of 2*<length> peaks or array of arrays of\n               * peaks consisting of (max, min) values for each subrange.\n               */\n\n            }, {\n              key: \"getPeaks\",\n              value: function getPeaks(length, first, last) {\n                if (this.peaks) {\n                  return this.peaks;\n                }\n\n                if (!this.buffer) {\n                  return [];\n                }\n\n                first = first || 0;\n                last = last || length - 1;\n                this.setLength(length);\n\n                if (!this.buffer) {\n                  return this.params.splitChannels ? this.splitPeaks : this.mergedPeaks;\n                }\n                /**\n                 * The following snippet fixes a buffering data issue on the Safari\n                 * browser which returned undefined It creates the missing buffer based\n                 * on 1 channel, 4096 samples and the sampleRate from the current\n                 * webaudio context 4096 samples seemed to be the best fit for rendering\n                 * will review this code once a stable version of Safari TP is out\n                 */\n\n\n                if (!this.buffer.length) {\n                  var newBuffer = this.createBuffer(1, 4096, this.sampleRate);\n                  this.buffer = newBuffer.buffer;\n                }\n\n                var sampleSize = this.buffer.length / length;\n                var sampleStep = ~~(sampleSize / 10) || 1;\n                var channels = this.buffer.numberOfChannels;\n                var c;\n\n                for (c = 0; c < channels; c++) {\n                  var peaks = this.splitPeaks[c];\n                  var chan = this.buffer.getChannelData(c);\n                  var i = void 0;\n\n                  for (i = first; i <= last; i++) {\n                    var start = ~~(i * sampleSize);\n                    var end = ~~(start + sampleSize);\n                    /**\n                     * Initialize the max and min to the first sample of this\n                     * subrange, so that even if the samples are entirely\n                     * on one side of zero, we still return the true max and\n                     * min values in the subrange.\n                     */\n\n                    var min = chan[start];\n                    var max = min;\n                    var j = void 0;\n\n                    for (j = start; j < end; j += sampleStep) {\n                      var value = chan[j];\n\n                      if (value > max) {\n                        max = value;\n                      }\n\n                      if (value < min) {\n                        min = value;\n                      }\n                    }\n\n                    peaks[2 * i] = max;\n                    peaks[2 * i + 1] = min;\n\n                    if (c == 0 || max > this.mergedPeaks[2 * i]) {\n                      this.mergedPeaks[2 * i] = max;\n                    }\n\n                    if (c == 0 || min < this.mergedPeaks[2 * i + 1]) {\n                      this.mergedPeaks[2 * i + 1] = min;\n                    }\n                  }\n                }\n\n                return this.params.splitChannels ? this.splitPeaks : this.mergedPeaks;\n              }\n              /**\n               * Get the position from 0 to 1\n               *\n               * @return {number} Position\n               */\n\n            }, {\n              key: \"getPlayedPercents\",\n              value: function getPlayedPercents() {\n                return this.state.getPlayedPercents.call(this);\n              }\n              /** @private */\n\n            }, {\n              key: \"disconnectSource\",\n              value: function disconnectSource() {\n                if (this.source) {\n                  this.source.disconnect();\n                }\n              }\n              /**\n               * Destroy all references with WebAudio, disconnecting audio nodes and closing Audio Context\n               */\n\n            }, {\n              key: \"destroyWebAudio\",\n              value: function destroyWebAudio() {\n                this.disconnectFilters();\n                this.disconnectSource();\n                this.gainNode.disconnect();\n                this.scriptNode.disconnect();\n                this.analyser.disconnect(); // close the audioContext if closeAudioContext option is set to true\n\n                if (this.params.closeAudioContext) {\n                  // check if browser supports AudioContext.close()\n                  if (typeof this.ac.close === 'function' && this.ac.state != 'closed') {\n                    this.ac.close();\n                  } // clear the reference to the audiocontext\n\n\n                  this.ac = null; // clear the actual audiocontext, either passed as param or the\n                  // global singleton\n\n                  if (!this.params.audioContext) {\n                    window.WaveSurferAudioContext = null;\n                  } else {\n                    this.params.audioContext = null;\n                  } // clear the offlineAudioContext\n\n\n                  window.WaveSurferOfflineAudioContext = null;\n                }\n              }\n              /**\n               * This is called when wavesurfer is destroyed\n               */\n\n            }, {\n              key: \"destroy\",\n              value: function destroy() {\n                if (!this.isPaused()) {\n                  this.pause();\n                }\n\n                this.unAll();\n                this.buffer = null;\n                this.destroyed = true;\n                this.destroyWebAudio();\n              }\n              /**\n               * Loaded a decoded audio buffer\n               *\n               * @param {Object} buffer Decoded audio buffer to load\n               */\n\n            }, {\n              key: \"load\",\n              value: function load(buffer) {\n                this.startPosition = 0;\n                this.lastPlay = this.ac.currentTime;\n                this.buffer = buffer;\n                this.createSource();\n              }\n              /** @private */\n\n            }, {\n              key: \"createSource\",\n              value: function createSource() {\n                this.disconnectSource();\n                this.source = this.ac.createBufferSource(); // adjust for old browsers\n\n                this.source.start = this.source.start || this.source.noteGrainOn;\n                this.source.stop = this.source.stop || this.source.noteOff;\n                this.setPlaybackRate(this.playbackRate);\n                this.source.buffer = this.buffer;\n                this.source.connect(this.analyser);\n              }\n              /**\n               * @private\n               *\n               * some browsers require an explicit call to #resume before they will play back audio\n               */\n\n            }, {\n              key: \"resumeAudioContext\",\n              value: function resumeAudioContext() {\n                if (this.ac.state == 'suspended') {\n                  this.ac.resume && this.ac.resume();\n                }\n              }\n              /**\n               * Used by `wavesurfer.isPlaying()` and `wavesurfer.playPause()`\n               *\n               * @return {boolean} Whether or not this backend is currently paused\n               */\n\n            }, {\n              key: \"isPaused\",\n              value: function isPaused() {\n                return this.state !== this.states[PLAYING];\n              }\n              /**\n               * Used by `wavesurfer.getDuration()`\n               *\n               * @return {number} Duration of loaded buffer\n               */\n\n            }, {\n              key: \"getDuration\",\n              value: function getDuration() {\n                if (this.explicitDuration) {\n                  return this.explicitDuration;\n                }\n\n                if (!this.buffer) {\n                  return 0;\n                }\n\n                return this.buffer.duration;\n              }\n              /**\n               * Used by `wavesurfer.seekTo()`\n               *\n               * @param {number} start Position to start at in seconds\n               * @param {number} end Position to end at in seconds\n               * @return {{start: number, end: number}} Object containing start and end\n               * positions\n               */\n\n            }, {\n              key: \"seekTo\",\n              value: function seekTo(start, end) {\n                if (!this.buffer) {\n                  return;\n                }\n\n                this.scheduledPause = null;\n\n                if (start == null) {\n                  start = this.getCurrentTime();\n\n                  if (start >= this.getDuration()) {\n                    start = 0;\n                  }\n                }\n\n                if (end == null) {\n                  end = this.getDuration();\n                }\n\n                this.startPosition = start;\n                this.lastPlay = this.ac.currentTime;\n\n                if (this.state === this.states[FINISHED]) {\n                  this.setState(PAUSED);\n                }\n\n                return {\n                  start: start,\n                  end: end\n                };\n              }\n              /**\n               * Get the playback position in seconds\n               *\n               * @return {number} The playback position in seconds\n               */\n\n            }, {\n              key: \"getPlayedTime\",\n              value: function getPlayedTime() {\n                return (this.ac.currentTime - this.lastPlay) * this.playbackRate;\n              }\n              /**\n               * Plays the loaded audio region.\n               *\n               * @param {number} start Start offset in seconds, relative to the beginning\n               * of a clip.\n               * @param {number} end When to stop relative to the beginning of a clip.\n               */\n\n            }, {\n              key: \"play\",\n              value: function play(start, end) {\n                if (!this.buffer) {\n                  return;\n                } // need to re-create source on each playback\n\n\n                this.createSource();\n                var adjustedTime = this.seekTo(start, end);\n                start = adjustedTime.start;\n                end = adjustedTime.end;\n                this.scheduledPause = end;\n                this.source.start(0, start);\n                this.resumeAudioContext();\n                this.setState(PLAYING);\n                this.fireEvent('play');\n              }\n              /**\n               * Pauses the loaded audio.\n               */\n\n            }, {\n              key: \"pause\",\n              value: function pause() {\n                this.scheduledPause = null;\n                this.startPosition += this.getPlayedTime();\n\n                try {\n                  this.source && this.source.stop(0);\n                } catch (err) {// Calling stop can throw the following 2 errors:\n                  // - RangeError (The value specified for when is negative.)\n                  // - InvalidStateNode (The node has not been started by calling start().)\n                  // We can safely ignore both errors, because:\n                  // - The range is surely correct\n                  // - The node might not have been started yet, in which case we just want to carry on without causing any trouble.\n                }\n\n                this.setState(PAUSED);\n                this.fireEvent('pause');\n              }\n              /**\n               * Returns the current time in seconds relative to the audio-clip's\n               * duration.\n               *\n               * @return {number} The current time in seconds\n               */\n\n            }, {\n              key: \"getCurrentTime\",\n              value: function getCurrentTime() {\n                return this.state.getCurrentTime.call(this);\n              }\n              /**\n               * Returns the current playback rate. (0=no playback, 1=normal playback)\n               *\n               * @return {number} The current playback rate\n               */\n\n            }, {\n              key: \"getPlaybackRate\",\n              value: function getPlaybackRate() {\n                return this.playbackRate;\n              }\n              /**\n               * Set the audio source playback rate.\n               *\n               * @param {number} value The playback rate to use\n               */\n\n            }, {\n              key: \"setPlaybackRate\",\n              value: function setPlaybackRate(value) {\n                this.playbackRate = value || 1;\n                this.source && this.source.playbackRate.setValueAtTime(this.playbackRate, this.ac.currentTime);\n              }\n              /**\n               * Set a point in seconds for playback to stop at.\n               *\n               * @param {number} end Position to end at\n               * @version 3.3.0\n               */\n\n            }, {\n              key: \"setPlayEnd\",\n              value: function setPlayEnd(end) {\n                this.scheduledPause = end;\n              }\n            }]);\n\n            return WebAudio;\n          }(util.Observer);\n\n          exports.default = WebAudio;\n          WebAudio.scriptBufferSize = 256;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/debounce/index.js\":\n        /*!****************************************!*\\\n          !*** ./node_modules/debounce/index.js ***!\n          \\****************************************/\n\n        /***/\n        module => {\n          /**\n           * Returns a function, that, as long as it continues to be invoked, will not\n           * be triggered. The function will be called after it stops being called for\n           * N milliseconds. If `immediate` is passed, trigger the function on the\n           * leading edge, instead of the trailing. The function also has a property 'clear' \n           * that is a function which will clear the timer to prevent previously scheduled executions. \n           *\n           * @source underscore.js\n           * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n           * @param {Function} function to wrap\n           * @param {Number} timeout in ms (`100`)\n           * @param {Boolean} whether to execute at the beginning (`false`)\n           * @api public\n           */\n          function debounce(func, wait, immediate) {\n            var timeout, args, context, timestamp, result;\n            if (null == wait) wait = 100;\n\n            function later() {\n              var last = Date.now() - timestamp;\n\n              if (last < wait && last >= 0) {\n                timeout = setTimeout(later, wait - last);\n              } else {\n                timeout = null;\n\n                if (!immediate) {\n                  result = func.apply(context, args);\n                  context = args = null;\n                }\n              }\n            }\n\n            ;\n\n            var debounced = function () {\n              context = this;\n              args = arguments;\n              timestamp = Date.now();\n              var callNow = immediate && !timeout;\n              if (!timeout) timeout = setTimeout(later, wait);\n\n              if (callNow) {\n                result = func.apply(context, args);\n                context = args = null;\n              }\n\n              return result;\n            };\n\n            debounced.clear = function () {\n              if (timeout) {\n                clearTimeout(timeout);\n                timeout = null;\n              }\n            };\n\n            debounced.flush = function () {\n              if (timeout) {\n                result = func.apply(context, args);\n                context = args = null;\n                clearTimeout(timeout);\n                timeout = null;\n              }\n            };\n\n            return debounced;\n          }\n\n          ; // Adds compatibility for ES modules\n\n          debounce.debounce = debounce;\n          module.exports = debounce;\n          /***/\n        }\n        /******/\n\n      };\n      /************************************************************************/\n\n      /******/\n      // The module cache\n\n      /******/\n\n      var __webpack_module_cache__ = {};\n      /******/\n\n      /******/\n      // The require function\n\n      /******/\n\n      function __webpack_require__(moduleId) {\n        /******/\n        // Check if module is in cache\n\n        /******/\n        var cachedModule = __webpack_module_cache__[moduleId];\n        /******/\n\n        if (cachedModule !== undefined) {\n          /******/\n          return cachedModule.exports;\n          /******/\n        }\n        /******/\n        // Create a new module (and put it into the cache)\n\n        /******/\n\n\n        var module = __webpack_module_cache__[moduleId] = {\n          /******/\n          // no module.id needed\n\n          /******/\n          // no module.loaded needed\n\n          /******/\n          exports: {}\n          /******/\n\n        };\n        /******/\n\n        /******/\n        // Execute the module function\n\n        /******/\n\n        __webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n        /******/\n\n        /******/\n        // Return the exports of the module\n\n        /******/\n\n\n        return module.exports;\n        /******/\n      }\n      /******/\n\n      /************************************************************************/\n\n      /******/\n\n      /******/\n      // startup\n\n      /******/\n      // Load entry module and return exports\n\n      /******/\n      // This entry module is referenced by other modules so it can't be inlined\n\n      /******/\n\n\n      var __webpack_exports__ = __webpack_require__(\"./src/wavesurfer.js\");\n      /******/\n\n      /******/\n\n\n      return __webpack_exports__;\n      /******/\n    })()\n  );\n});","map":{"version":3,"sources":["/home/izzy/git/MusMeWebsite-Frontend/src/src/Wavesurfer.js"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","define","amd","self","__webpack_modules__","__webpack_require__","Object","defineProperty","value","default","_style","_interopRequireDefault","_getId","obj","__esModule","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","prototype","CanvasEntry","wave","waveCtx","progress","progressCtx","start","end","id","constructor","name","toLowerCase","canvasContextAttributes","initWave","element","getContext","initProgress","updateDimensions","elementWidth","totalWidth","width","height","offsetLeft","elementSize","hasProgressCanvas","clearWave","clearRect","canvas","setFillStyles","waveColor","progressColor","fillStyle","applyCanvasTransforms","vertical","setTransform","fillRects","x","y","radius","fillRectToContext","ctx","drawRoundedRect","fillRect","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","fill","drawLines","peaks","absmax","halfH","offsetY","drawLineToContext","first","Math","round","last","canvasStart","canvasEnd","scale","halfOffset","absmaxHalf","peak","h","halfPixel","j","destroy","getImage","format","quality","type","_this","Promise","resolve","toBlob","toDataURL","_typeof","Symbol","iterator","util","_interopRequireWildcard","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","hasOwnProperty","call","desc","set","_inherits","subClass","superClass","create","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","arguments","apply","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","Drawer","_util$Observer","_super","container","params","withOrientation","pixelRatio","lastPos","wrapper","style","el","styles","createWrapper","appendChild","document","createElement","display","position","userSelect","webkitUserSelect","fillParent","scrollParent","overflowX","hideScrollbar","overflowY","setupWrapperEvents","handleEvent","noPrevent","preventDefault","clientX","targetTouches","bbox","getBoundingClientRect","nominalWidth","parentWidth","getWidth","progressPixels","getProgressPixels","scrollLeft","scrollWidth","clamp","wrapperBbox","rtl","right","left","_this2","addEventListener","orientedEvent","scrollbarHeight","offsetHeight","clientHeight","clientY","bottom","interact","fireEvent","drawPeaks","setWidth","barWidth","drawBars","drawWave","resetScroll","recenter","percent","recenterOnPosition","immediate","half","clientWidth","maxScroll","offset","rate","autoCenterRate","max","min","getScrollX","newWidth","updateSize","setHeight","_progress","minPxDelta","pos","autoCenter","newPos","autoCenterImmediately","updateProgress","unAll","parentNode","domElement","removeChild","updateCursor","channelIndex","Observer","_drawer","_drawer2","MultiCanvas","_Drawer","maxCanvasWidth","maxCanvasElementWidth","canvases","progressWave","EntryClass","drawingContextAttributes","overlap","ceil","barRadius","init","createElements","zIndex","top","overflow","boxSizing","borderRightStyle","pointerEvents","addCanvas","borderRightWidth","cursorWidth","borderRightColor","cursorColor","requiredCanvases","removeCanvas","canvasWidth","lastCanvas","forEach","entry","leftOffset","push","lastEntry","parentElement","pop","_this3","frame","_this4","prepareDraw","_ref","hasMinVals","ch","undefined","peakIndexScale","bar","gap","barGap","step","floor","barMinHeight","_this5","_ref2","reflectedPeaks","len","drawLine","_this6","_ref3","splitChannelsOptions","channelColors","startCanvas","endCanvas","intersection","x1","y1","x2","y2","_ref4","hideChannel","splitChannels","filterChannels","includes","fn","drawIndex","normalizedMax","_this7","Array","channels","filteredChannels","filter","c","overlay","overallAbsMax","relativeNormalization","map","channelPeaks","absMax","indexOf","barHeight","normalize","some","val","all","images","_mediaelement","_get","property","receiver","base","_superPropBase","object","MediaElementWebAudio","_MediaElement","sourceMediaElement","setPlaybackRate","audioRate","createTimer","createVolumeNode","createScriptNode","createAnalyserNode","_load","media","preload","createMediaElementSource","mediaElement","ac","connect","analyser","play","resumeAudioContext","destroyWebAudio","_webaudio","MediaElement","_WebAudio","currentTime","duration","paused","playbackRate","pause","volume","mediaType","elementPosition","isMuted","buffer","onPlayEnd","mediaListeners","_setupMediaListeners","error","canplay","ended","seeked","event","volumechange","muted","keys","removeEventListener","onAudioProcess","isPaused","getCurrentTime","on","load","url","controls","mediaControls","autoplay","src","prevMedia","querySelector","loadElt","elt","HTMLMediaElement","Error","setVolume","getDuration","explicitDuration","Infinity","seekable","getPlayedPercents","getPlaybackRate","seekTo","clearPlayEnd","promise","setPlayEnd","_onPlayEnd","time","un","getPeaks","setSinkId","deviceId","reject","getVolume","setMute","destroyed","removeMediaElementOnDestroy","PeakCache","clearPeakCache","peakCacheRanges","peakCacheLength","addRangeToPeakCache","uncachedRanges","item","arr","concat","sort","a","b","uncachedRangePairs","getCacheRanges","peakCacheRangePairs","_max","_min","values","fetchFile","_observer","ProgressHandler","contentLength","response","_reader","body","getReader","total","parseInt","loaded","controller","read","then","done","onProgress","lengthComputable","close","byteLength","enqueue","catch","options","fetchHeaders","Headers","fetchRequest","Request","AbortController","requestHeaders","header","append","responseType","fetchOptions","method","headers","mode","credentials","redirect","referrer","signal","fetch","progressAvailable","Response","ReadableStream","errMsg","ok","arrayBuffer","json","blob","text","status","_requestAnimationFrame","func","_len","args","_key","getId","prefix","random","toString","substring","__unused_webpack_module","_absMax","_frame","_debounce","_preventClick","_fetch","_clamp","_orientation","_silenceMode","largest","smallest","Number","_disabledEventEmissions","handlers","callback","splice","once","handler","setTimeout","setDisabledEventEmissions","eventNames","_isDisabledEventEmission","_len2","_key2","verticalPropMap","offsetTop","offsetWidth","mapProp","prop","isProxy","bind","preventClick","preventClickHandler","stopPropagation","_default","window","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","ignoreSilenceMode","audioData","tmp","innerHTML","audioSilentMode","children","disableRemotePlayback","remove","_peakcache","_mediaelementWebaudio","PluginClass","ws","WaveSurfer","defaultParams","audioContext","audioScriptProcessor","backend","backgroundColor","dragSelection","desynchronized","forceDecode","loopSelection","mediaContainer","minPxPerSec","partialRender","devicePixelRatio","screen","deviceXDPI","logicalXDPI","plugins","renderer","responsive","skipLength","xhr","backends","WebAudio","assign","transform","setBackgroundColor","savedVolume","tmpEvents","currentRequest","arraybuffer","drawer","peakCache","supportsWebAudio","Backend","initialisedPluginList","isDestroyed","isReady","prevWidth","_onResize","debounce","registerPlugins","createDrawer","createBackend","createPeakCache","plugin","addPlugin","deferInit","initPlugin","getActivePlugins","pluginStaticProp","Instance","observerPrototypeKeys","getOwnPropertyNames","destroyPlugin","destroyAllPlugins","drawBuffer","newVolume","setCurrentTime","seconds","playPause","isPlaying","skipBackward","skip","skipForward","seekAndCenter","_this8","isFinite","isWebAudioBackend","oldScrollParent","stop","toggleMute","mute","getMute","getFilters","filters","toggleScroll","toggleInteraction","getWaveColor","setWaveColor","color","getProgressColor","setProgressColor","getBackgroundColor","background","getCursorColor","setCursorColor","getHeight","setFilteredChannels","channelIndices","newRanges","zoom","pxPerSec","loadArrayBuffer","_this9","decodeArrayBuffer","data","loadDecodedBuffer","loadBlob","_this10","reader","FileReader","readAsArrayBuffer","empty","preloadIgnoreReasons","activeReasons","reason","console","warn","join","loadBuffer","loadMediaElement","_this11","action","getArrayBuffer","setPeaks","urlOrElt","_this12","err","_this13","_this14","request","percentComplete","exportPCM","accuracy","noWindow","blobJSON","Blob","JSON","stringify","objURL","URL","createObjectURL","open","revokeObjectURL","exportImage","cancelAjax","cancel","abort","clearTmpEvents","disconnectSource","wavesurfer","VERSION","_defineProperty","PLAYING","PAUSED","FINISHED","_this$stateBehaviors","_this$states","offlineAudioContext","stateBehaviors","addOnAudioProcess","startPosition","getPlayedTime","removeOnAudioProcess","getAudioContext","lastPlay","scheduledPause","states","gainNode","mergedPeaks","offlineAc","scriptNode","source","splitPeaks","state","AudioContext","webkitAudioContext","WaveSurferAudioContext","getOfflineAudioContext","sampleRate","WaveSurferOfflineAudioContext","OfflineAudioContext","webkitOfflineAudioContext","setState","setLength","disconnectFilters","disconnect","setFilter","setFilters","reduce","prev","curr","createScriptProcessor","scriptBufferSize","createJavaScriptNode","destination","onaudioprocess","createAnalyser","createGain","createGainNode","audio","Audio","dest","createMediaStreamDestination","srcObject","stream","gain","setValueAtTime","errback","decodeAudioData","numberOfChannels","newBuffer","createBuffer","sampleSize","sampleStep","chan","getChannelData","closeAudioContext","createSource","createBufferSource","noteGrainOn","noteOff","resume","adjustedTime","wait","timeout","context","timestamp","later","Date","now","debounced","callNow","clear","clearTimeout","flush","__webpack_module_cache__","moduleId","cachedModule","__webpack_exports__"],"mappings":"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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,cAAIqiB,WAAW,GAAG,aAAa,YAAY;AACzC;AACF;AACA;AACA;AACA;AACA;AACE,qBAASA,WAAT,CAAqBjZ,MAArB,EAA6BkZ,EAA7B,EAAiC;AAC/BxiB,cAAAA,eAAe,CAAC,IAAD,EAAOuiB,WAAP,CAAf;AACD;AACD;AACF;AACA;AACA;AACA;AACA;;;AAGEzhB,YAAAA,YAAY,CAACyhB,WAAD,EAAc,CAAC;AACzB1hB,cAAAA,GAAG,EAAE,QADoB;AAEzBpB,cAAAA,KAAK;AACL;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI,uBAAS6H,MAAT,CAAgBgC,MAAhB,EAAwB,CAAE;AAbD,aAAD,EAcvB;AACDzI,cAAAA,GAAG,EAAE,MADJ;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","sourcesContent":["/*!\n * wavesurfer.js 5.2.0 (2021-08-16)\n * https://wavesurfer-js.org\n * @license BSD-3-Clause\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"WaveSurfer\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"WaveSurfer\"] = factory();\n\telse\n\t\troot[\"WaveSurfer\"] = factory();\n})(self, function() {\nreturn /******/ (() => { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ \"./src/drawer.canvasentry.js\":\n/*!***********************************!*\\\n  !*** ./src/drawer.canvasentry.js ***!\n  \\***********************************/\n/***/ ((module, exports, __webpack_require__) => {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.default = void 0;\n\nvar _style = _interopRequireDefault(__webpack_require__(/*! ./util/style */ \"./src/util/style.js\"));\n\nvar _getId = _interopRequireDefault(__webpack_require__(/*! ./util/get-id */ \"./src/util/get-id.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * The `CanvasEntry` class represents an element consisting of a wave `canvas`\n * and an (optional) progress wave `canvas`.\n *\n * The `MultiCanvas` renderer uses one or more `CanvasEntry` instances to\n * render a waveform, depending on the zoom level.\n */\nvar CanvasEntry = /*#__PURE__*/function () {\n  function CanvasEntry() {\n    _classCallCheck(this, CanvasEntry);\n\n    /**\n     * The wave node\n     *\n     * @type {HTMLCanvasElement}\n     */\n    this.wave = null;\n    /**\n     * The wave canvas rendering context\n     *\n     * @type {CanvasRenderingContext2D}\n     */\n\n    this.waveCtx = null;\n    /**\n     * The (optional) progress wave node\n     *\n     * @type {HTMLCanvasElement}\n     */\n\n    this.progress = null;\n    /**\n     * The (optional) progress wave canvas rendering context\n     *\n     * @type {CanvasRenderingContext2D}\n     */\n\n    this.progressCtx = null;\n    /**\n     * Start of the area the canvas should render, between 0 and 1\n     *\n     * @type {number}\n     */\n\n    this.start = 0;\n    /**\n     * End of the area the canvas should render, between 0 and 1\n     *\n     * @type {number}\n     */\n\n    this.end = 1;\n    /**\n     * Unique identifier for this entry\n     *\n     * @type {string}\n     */\n\n    this.id = (0, _getId.default)(typeof this.constructor.name !== 'undefined' ? this.constructor.name.toLowerCase() + '_' : 'canvasentry_');\n    /**\n     * Canvas 2d context attributes\n     *\n     * @type {object}\n     */\n\n    this.canvasContextAttributes = {};\n  }\n  /**\n   * Store the wave canvas element and create the 2D rendering context\n   *\n   * @param {HTMLCanvasElement} element The wave `canvas` element.\n   */\n\n\n  _createClass(CanvasEntry, [{\n    key: \"initWave\",\n    value: function initWave(element) {\n      this.wave = element;\n      this.waveCtx = this.wave.getContext('2d', this.canvasContextAttributes);\n    }\n    /**\n     * Store the progress wave canvas element and create the 2D rendering\n     * context\n     *\n     * @param {HTMLCanvasElement} element The progress wave `canvas` element.\n     */\n\n  }, {\n    key: \"initProgress\",\n    value: function initProgress(element) {\n      this.progress = element;\n      this.progressCtx = this.progress.getContext('2d', this.canvasContextAttributes);\n    }\n    /**\n     * Update the dimensions\n     *\n     * @param {number} elementWidth Width of the entry\n     * @param {number} totalWidth Total width of the multi canvas renderer\n     * @param {number} width The new width of the element\n     * @param {number} height The new height of the element\n     */\n\n  }, {\n    key: \"updateDimensions\",\n    value: function updateDimensions(elementWidth, totalWidth, width, height) {\n      // where the canvas starts and ends in the waveform, represented as a\n      // decimal between 0 and 1\n      this.start = this.wave.offsetLeft / totalWidth || 0;\n      this.end = this.start + elementWidth / totalWidth; // set wave canvas dimensions\n\n      this.wave.width = width;\n      this.wave.height = height;\n      var elementSize = {\n        width: elementWidth + 'px'\n      };\n      (0, _style.default)(this.wave, elementSize);\n\n      if (this.hasProgressCanvas) {\n        // set progress canvas dimensions\n        this.progress.width = width;\n        this.progress.height = height;\n        (0, _style.default)(this.progress, elementSize);\n      }\n    }\n    /**\n     * Clear the wave and progress rendering contexts\n     */\n\n  }, {\n    key: \"clearWave\",\n    value: function clearWave() {\n      // wave\n      this.waveCtx.clearRect(0, 0, this.waveCtx.canvas.width, this.waveCtx.canvas.height); // progress\n\n      if (this.hasProgressCanvas) {\n        this.progressCtx.clearRect(0, 0, this.progressCtx.canvas.width, this.progressCtx.canvas.height);\n      }\n    }\n    /**\n     * Set the fill styles for wave and progress\n     *\n     * @param {string} waveColor Fill color for the wave canvas\n     * @param {?string} progressColor Fill color for the progress canvas\n     */\n\n  }, {\n    key: \"setFillStyles\",\n    value: function setFillStyles(waveColor, progressColor) {\n      this.waveCtx.fillStyle = waveColor;\n\n      if (this.hasProgressCanvas) {\n        this.progressCtx.fillStyle = progressColor;\n      }\n    }\n    /**\n     * Set the canvas transforms for wave and progress\n     *\n     * @param {boolean} vertical Whether to render vertically\n     */\n\n  }, {\n    key: \"applyCanvasTransforms\",\n    value: function applyCanvasTransforms(vertical) {\n      if (vertical) {\n        // Reflect the waveform across the line y = -x\n        this.waveCtx.setTransform(0, 1, 1, 0, 0, 0);\n\n        if (this.hasProgressCanvas) {\n          this.progressCtx.setTransform(0, 1, 1, 0, 0, 0);\n        }\n      }\n    }\n    /**\n     * Draw a rectangle for wave and progress\n     *\n     * @param {number} x X start position\n     * @param {number} y Y start position\n     * @param {number} width Width of the rectangle\n     * @param {number} height Height of the rectangle\n     * @param {number} radius Radius of the rectangle\n     */\n\n  }, {\n    key: \"fillRects\",\n    value: function fillRects(x, y, width, height, radius) {\n      this.fillRectToContext(this.waveCtx, x, y, width, height, radius);\n\n      if (this.hasProgressCanvas) {\n        this.fillRectToContext(this.progressCtx, x, y, width, height, radius);\n      }\n    }\n    /**\n     * Draw the actual rectangle on a `canvas` element\n     *\n     * @param {CanvasRenderingContext2D} ctx Rendering context of target canvas\n     * @param {number} x X start position\n     * @param {number} y Y start position\n     * @param {number} width Width of the rectangle\n     * @param {number} height Height of the rectangle\n     * @param {number} radius Radius of the rectangle\n     */\n\n  }, {\n    key: \"fillRectToContext\",\n    value: function fillRectToContext(ctx, x, y, width, height, radius) {\n      if (!ctx) {\n        return;\n      }\n\n      if (radius) {\n        this.drawRoundedRect(ctx, x, y, width, height, radius);\n      } else {\n        ctx.fillRect(x, y, width, height);\n      }\n    }\n    /**\n     * Draw a rounded rectangle on Canvas\n     *\n     * @param {CanvasRenderingContext2D} ctx Canvas context\n     * @param {number} x X-position of the rectangle\n     * @param {number} y Y-position of the rectangle\n     * @param {number} width Width of the rectangle\n     * @param {number} height Height of the rectangle\n     * @param {number} radius Radius of the rectangle\n     *\n     * @return {void}\n     * @example drawRoundedRect(ctx, 50, 50, 5, 10, 3)\n     */\n\n  }, {\n    key: \"drawRoundedRect\",\n    value: function drawRoundedRect(ctx, x, y, width, height, radius) {\n      if (height === 0) {\n        return;\n      } // peaks are float values from -1 to 1. Use absolute height values in\n      // order to correctly calculate rounded rectangle coordinates\n\n\n      if (height < 0) {\n        height *= -1;\n        y -= height;\n      }\n\n      ctx.beginPath();\n      ctx.moveTo(x + radius, y);\n      ctx.lineTo(x + width - radius, y);\n      ctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n      ctx.lineTo(x + width, y + height - radius);\n      ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n      ctx.lineTo(x + radius, y + height);\n      ctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n      ctx.lineTo(x, y + radius);\n      ctx.quadraticCurveTo(x, y, x + radius, y);\n      ctx.closePath();\n      ctx.fill();\n    }\n    /**\n     * Render the actual wave and progress lines\n     *\n     * @param {number[]} peaks Array with peaks data\n     * @param {number} absmax Maximum peak value (absolute)\n     * @param {number} halfH Half the height of the waveform\n     * @param {number} offsetY Offset to the top\n     * @param {number} start The x-offset of the beginning of the area that\n     * should be rendered\n     * @param {number} end The x-offset of the end of the area that\n     * should be rendered\n     */\n\n  }, {\n    key: \"drawLines\",\n    value: function drawLines(peaks, absmax, halfH, offsetY, start, end) {\n      this.drawLineToContext(this.waveCtx, peaks, absmax, halfH, offsetY, start, end);\n\n      if (this.hasProgressCanvas) {\n        this.drawLineToContext(this.progressCtx, peaks, absmax, halfH, offsetY, start, end);\n      }\n    }\n    /**\n     * Render the actual waveform line on a `canvas` element\n     *\n     * @param {CanvasRenderingContext2D} ctx Rendering context of target canvas\n     * @param {number[]} peaks Array with peaks data\n     * @param {number} absmax Maximum peak value (absolute)\n     * @param {number} halfH Half the height of the waveform\n     * @param {number} offsetY Offset to the top\n     * @param {number} start The x-offset of the beginning of the area that\n     * should be rendered\n     * @param {number} end The x-offset of the end of the area that\n     * should be rendered\n     */\n\n  }, {\n    key: \"drawLineToContext\",\n    value: function drawLineToContext(ctx, peaks, absmax, halfH, offsetY, start, end) {\n      if (!ctx) {\n        return;\n      }\n\n      var length = peaks.length / 2;\n      var first = Math.round(length * this.start); // use one more peak value to make sure we join peaks at ends -- unless,\n      // of course, this is the last canvas\n\n      var last = Math.round(length * this.end) + 1;\n      var canvasStart = first;\n      var canvasEnd = last;\n      var scale = this.wave.width / (canvasEnd - canvasStart - 1); // optimization\n\n      var halfOffset = halfH + offsetY;\n      var absmaxHalf = absmax / halfH;\n      ctx.beginPath();\n      ctx.moveTo((canvasStart - first) * scale, halfOffset);\n      ctx.lineTo((canvasStart - first) * scale, halfOffset - Math.round((peaks[2 * canvasStart] || 0) / absmaxHalf));\n      var i, peak, h;\n\n      for (i = canvasStart; i < canvasEnd; i++) {\n        peak = peaks[2 * i] || 0;\n        h = Math.round(peak / absmaxHalf);\n        ctx.lineTo((i - first) * scale + this.halfPixel, halfOffset - h);\n      } // draw the bottom edge going backwards, to make a single\n      // closed hull to fill\n\n\n      var j = canvasEnd - 1;\n\n      for (j; j >= canvasStart; j--) {\n        peak = peaks[2 * j + 1] || 0;\n        h = Math.round(peak / absmaxHalf);\n        ctx.lineTo((j - first) * scale + this.halfPixel, halfOffset - h);\n      }\n\n      ctx.lineTo((canvasStart - first) * scale, halfOffset - Math.round((peaks[2 * canvasStart + 1] || 0) / absmaxHalf));\n      ctx.closePath();\n      ctx.fill();\n    }\n    /**\n     * Destroys this entry\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.waveCtx = null;\n      this.wave = null;\n      this.progressCtx = null;\n      this.progress = null;\n    }\n    /**\n     * Return image data of the wave `canvas` element\n     *\n     * When using a `type` of `'blob'`, this will return a `Promise` that\n     * resolves with a `Blob` instance.\n     *\n     * @param {string} format='image/png' An optional value of a format type.\n     * @param {number} quality=0.92 An optional value between 0 and 1.\n     * @param {string} type='dataURL' Either 'dataURL' or 'blob'.\n     * @return {string|Promise} When using the default `'dataURL'` `type` this\n     * returns a data URL. When using the `'blob'` `type` this returns a\n     * `Promise` that resolves with a `Blob` instance.\n     */\n\n  }, {\n    key: \"getImage\",\n    value: function getImage(format, quality, type) {\n      var _this = this;\n\n      if (type === 'blob') {\n        return new Promise(function (resolve) {\n          _this.wave.toBlob(resolve, format, quality);\n        });\n      } else if (type === 'dataURL') {\n        return this.wave.toDataURL(format, quality);\n      }\n    }\n  }]);\n\n  return CanvasEntry;\n}();\n\nexports.default = CanvasEntry;\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/drawer.js\":\n/*!***********************!*\\\n  !*** ./src/drawer.js ***!\n  \\***********************/\n/***/ ((module, exports, __webpack_require__) => {\n\n\"use strict\";\n\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.default = void 0;\n\nvar util = _interopRequireWildcard(__webpack_require__(/*! ./util */ \"./src/util/index.js\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/**\n * Parent class for renderers\n *\n * @extends {Observer}\n */\nvar Drawer = /*#__PURE__*/function (_util$Observer) {\n  _inherits(Drawer, _util$Observer);\n\n  var _super = _createSuper(Drawer);\n\n  /**\n   * @param {HTMLElement} container The container node of the wavesurfer instance\n   * @param {WavesurferParams} params The wavesurfer initialisation options\n   */\n  function Drawer(container, params) {\n    var _this;\n\n    _classCallCheck(this, Drawer);\n\n    _this = _super.call(this);\n    _this.container = util.withOrientation(container, params.vertical);\n    /**\n     * @type {WavesurferParams}\n     */\n\n    _this.params = params;\n    /**\n     * The width of the renderer\n     * @type {number}\n     */\n\n    _this.width = 0;\n    /**\n     * The height of the renderer\n     * @type {number}\n     */\n\n    _this.height = params.height * _this.params.pixelRatio;\n    _this.lastPos = 0;\n    /**\n     * The `<wave>` element which is added to the container\n     * @type {HTMLElement}\n     */\n\n    _this.wrapper = null;\n    return _this;\n  }\n  /**\n   * Alias of `util.style`\n   *\n   * @param {HTMLElement} el The element that the styles will be applied to\n   * @param {Object} styles The map of propName: attribute, both are used as-is\n   * @return {HTMLElement} el\n   */\n\n\n  _createClass(Drawer, [{\n    key: \"style\",\n    value: function style(el, styles) {\n      return util.style(el, styles);\n    }\n    /**\n     * Create the wrapper `<wave>` element, style it and set up the events for\n     * interaction\n     */\n\n  }, {\n    key: \"createWrapper\",\n    value: function createWrapper() {\n      this.wrapper = util.withOrientation(this.container.appendChild(document.createElement('wave')), this.params.vertical);\n      this.style(this.wrapper, {\n        display: 'block',\n        position: 'relative',\n        userSelect: 'none',\n        webkitUserSelect: 'none',\n        height: this.params.height + 'px'\n      });\n\n      if (this.params.fillParent || this.params.scrollParent) {\n        this.style(this.wrapper, {\n          width: '100%',\n          overflowX: this.params.hideScrollbar ? 'hidden' : 'auto',\n          overflowY: 'hidden'\n        });\n      }\n\n      this.setupWrapperEvents();\n    }\n    /**\n     * Handle click event\n     *\n     * @param {Event} e Click event\n     * @param {?boolean} noPrevent Set to true to not call `e.preventDefault()`\n     * @return {number} Playback position from 0 to 1\n     */\n\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(e, noPrevent) {\n      !noPrevent && e.preventDefault();\n      var clientX = util.withOrientation(e.targetTouches ? e.targetTouches[0] : e, this.params.vertical).clientX;\n      var bbox = this.wrapper.getBoundingClientRect();\n      var nominalWidth = this.width;\n      var parentWidth = this.getWidth();\n      var progressPixels = this.getProgressPixels(bbox, clientX);\n      var progress;\n\n      if (!this.params.fillParent && nominalWidth < parentWidth) {\n        progress = progressPixels * (this.params.pixelRatio / nominalWidth) || 0;\n      } else {\n        progress = (progressPixels + this.wrapper.scrollLeft) / this.wrapper.scrollWidth || 0;\n      }\n\n      return util.clamp(progress, 0, 1);\n    }\n  }, {\n    key: \"getProgressPixels\",\n    value: function getProgressPixels(wrapperBbox, clientX) {\n      if (this.params.rtl) {\n        return wrapperBbox.right - clientX;\n      } else {\n        return clientX - wrapperBbox.left;\n      }\n    }\n  }, {\n    key: \"setupWrapperEvents\",\n    value: function setupWrapperEvents() {\n      var _this2 = this;\n\n      this.wrapper.addEventListener('click', function (e) {\n        var orientedEvent = util.withOrientation(e, _this2.params.vertical);\n        var scrollbarHeight = _this2.wrapper.offsetHeight - _this2.wrapper.clientHeight;\n\n        if (scrollbarHeight !== 0) {\n          // scrollbar is visible.  Check if click was on it\n          var bbox = _this2.wrapper.getBoundingClientRect();\n\n          if (orientedEvent.clientY >= bbox.bottom - scrollbarHeight) {\n            // ignore mousedown as it was on the scrollbar\n            return;\n          }\n        }\n\n        if (_this2.params.interact) {\n          _this2.fireEvent('click', e, _this2.handleEvent(e));\n        }\n      });\n      this.wrapper.addEventListener('dblclick', function (e) {\n        if (_this2.params.interact) {\n          _this2.fireEvent('dblclick', e, _this2.handleEvent(e));\n        }\n      });\n      this.wrapper.addEventListener('scroll', function (e) {\n        return _this2.fireEvent('scroll', e);\n      });\n    }\n    /**\n     * Draw peaks on the canvas\n     *\n     * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays\n     * for split channel rendering\n     * @param {number} length The width of the area that should be drawn\n     * @param {number} start The x-offset of the beginning of the area that\n     * should be rendered\n     * @param {number} end The x-offset of the end of the area that should be\n     * rendered\n     */\n\n  }, {\n    key: \"drawPeaks\",\n    value: function drawPeaks(peaks, length, start, end) {\n      if (!this.setWidth(length)) {\n        this.clearWave();\n      }\n\n      this.params.barWidth ? this.drawBars(peaks, 0, start, end) : this.drawWave(peaks, 0, start, end);\n    }\n    /**\n     * Scroll to the beginning\n     */\n\n  }, {\n    key: \"resetScroll\",\n    value: function resetScroll() {\n      if (this.wrapper !== null) {\n        this.wrapper.scrollLeft = 0;\n      }\n    }\n    /**\n     * Recenter the view-port at a certain percent of the waveform\n     *\n     * @param {number} percent Value from 0 to 1 on the waveform\n     */\n\n  }, {\n    key: \"recenter\",\n    value: function recenter(percent) {\n      var position = this.wrapper.scrollWidth * percent;\n      this.recenterOnPosition(position, true);\n    }\n    /**\n     * Recenter the view-port on a position, either scroll there immediately or\n     * in steps of 5 pixels\n     *\n     * @param {number} position X-offset in pixels\n     * @param {boolean} immediate Set to true to immediately scroll somewhere\n     */\n\n  }, {\n    key: \"recenterOnPosition\",\n    value: function recenterOnPosition(position, immediate) {\n      var scrollLeft = this.wrapper.scrollLeft;\n      var half = ~~(this.wrapper.clientWidth / 2);\n      var maxScroll = this.wrapper.scrollWidth - this.wrapper.clientWidth;\n      var target = position - half;\n      var offset = target - scrollLeft;\n\n      if (maxScroll == 0) {\n        // no need to continue if scrollbar is not there\n        return;\n      } // if the cursor is currently visible...\n\n\n      if (!immediate && -half <= offset && offset < half) {\n        // set rate at which waveform is centered\n        var rate = this.params.autoCenterRate; // make rate depend on width of view and length of waveform\n\n        rate /= half;\n        rate *= maxScroll;\n        offset = Math.max(-rate, Math.min(rate, offset));\n        target = scrollLeft + offset;\n      } // limit target to valid range (0 to maxScroll)\n\n\n      target = Math.max(0, Math.min(maxScroll, target)); // no use attempting to scroll if we're not moving\n\n      if (target != scrollLeft) {\n        this.wrapper.scrollLeft = target;\n      }\n    }\n    /**\n     * Get the current scroll position in pixels\n     *\n     * @return {number} Horizontal scroll position in pixels\n     */\n\n  }, {\n    key: \"getScrollX\",\n    value: function getScrollX() {\n      var x = 0;\n\n      if (this.wrapper) {\n        var pixelRatio = this.params.pixelRatio;\n        x = Math.round(this.wrapper.scrollLeft * pixelRatio); // In cases of elastic scroll (safari with mouse wheel) you can\n        // scroll beyond the limits of the container\n        // Calculate and floor the scrollable extent to make sure an out\n        // of bounds value is not returned\n        // Ticket #1312\n\n        if (this.params.scrollParent) {\n          var maxScroll = ~~(this.wrapper.scrollWidth * pixelRatio - this.getWidth());\n          x = Math.min(maxScroll, Math.max(0, x));\n        }\n      }\n\n      return x;\n    }\n    /**\n     * Get the width of the container\n     *\n     * @return {number} The width of the container\n     */\n\n  }, {\n    key: \"getWidth\",\n    value: function getWidth() {\n      return Math.round(this.container.clientWidth * this.params.pixelRatio);\n    }\n    /**\n     * Set the width of the container\n     *\n     * @param {number} width The new width of the container\n     * @return {boolean} Whether the width of the container was updated or not\n     */\n\n  }, {\n    key: \"setWidth\",\n    value: function setWidth(width) {\n      if (this.width == width) {\n        return false;\n      }\n\n      this.width = width;\n\n      if (this.params.fillParent || this.params.scrollParent) {\n        this.style(this.wrapper, {\n          width: ''\n        });\n      } else {\n        var newWidth = ~~(this.width / this.params.pixelRatio) + 'px';\n        this.style(this.wrapper, {\n          width: newWidth\n        });\n      }\n\n      this.updateSize();\n      return true;\n    }\n    /**\n     * Set the height of the container\n     *\n     * @param {number} height The new height of the container.\n     * @return {boolean} Whether the height of the container was updated or not\n     */\n\n  }, {\n    key: \"setHeight\",\n    value: function setHeight(height) {\n      if (height == this.height) {\n        return false;\n      }\n\n      this.height = height;\n      this.style(this.wrapper, {\n        height: ~~(this.height / this.params.pixelRatio) + 'px'\n      });\n      this.updateSize();\n      return true;\n    }\n    /**\n     * Called by wavesurfer when progress should be rendered\n     *\n     * @param {number} progress From 0 to 1\n     */\n\n  }, {\n    key: \"progress\",\n    value: function progress(_progress) {\n      var minPxDelta = 1 / this.params.pixelRatio;\n      var pos = Math.round(_progress * this.width) * minPxDelta;\n\n      if (pos < this.lastPos || pos - this.lastPos >= minPxDelta) {\n        this.lastPos = pos;\n\n        if (this.params.scrollParent && this.params.autoCenter) {\n          var newPos = ~~(this.wrapper.scrollWidth * _progress);\n          this.recenterOnPosition(newPos, this.params.autoCenterImmediately);\n        }\n\n        this.updateProgress(pos);\n      }\n    }\n    /**\n     * This is called when wavesurfer is destroyed\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.unAll();\n\n      if (this.wrapper) {\n        if (this.wrapper.parentNode == this.container.domElement) {\n          this.container.removeChild(this.wrapper.domElement);\n        }\n\n        this.wrapper = null;\n      }\n    }\n    /* Renderer-specific methods */\n\n    /**\n     * Called after cursor related params have changed.\n     *\n     * @abstract\n     */\n\n  }, {\n    key: \"updateCursor\",\n    value: function updateCursor() {}\n    /**\n     * Called when the size of the container changes so the renderer can adjust\n     *\n     * @abstract\n     */\n\n  }, {\n    key: \"updateSize\",\n    value: function updateSize() {}\n    /**\n     * Draw a waveform with bars\n     *\n     * @abstract\n     * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays for split channel\n     * rendering\n     * @param {number} channelIndex The index of the current channel. Normally\n     * should be 0\n     * @param {number} start The x-offset of the beginning of the area that\n     * should be rendered\n     * @param {number} end The x-offset of the end of the area that should be\n     * rendered\n     */\n\n  }, {\n    key: \"drawBars\",\n    value: function drawBars(peaks, channelIndex, start, end) {}\n    /**\n     * Draw a waveform\n     *\n     * @abstract\n     * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays for split channel\n     * rendering\n     * @param {number} channelIndex The index of the current channel. Normally\n     * should be 0\n     * @param {number} start The x-offset of the beginning of the area that\n     * should be rendered\n     * @param {number} end The x-offset of the end of the area that should be\n     * rendered\n     */\n\n  }, {\n    key: \"drawWave\",\n    value: function drawWave(peaks, channelIndex, start, end) {}\n    /**\n     * Clear the waveform\n     *\n     * @abstract\n     */\n\n  }, {\n    key: \"clearWave\",\n    value: function clearWave() {}\n    /**\n     * Render the new progress\n     *\n     * @abstract\n     * @param {number} position X-Offset of progress position in pixels\n     */\n\n  }, {\n    key: \"updateProgress\",\n    value: function updateProgress(position) {}\n  }]);\n\n  return Drawer;\n}(util.Observer);\n\nexports.default = Drawer;\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/drawer.multicanvas.js\":\n/*!***********************************!*\\\n  !*** ./src/drawer.multicanvas.js ***!\n  \\***********************************/\n/***/ ((module, exports, __webpack_require__) => {\n\n\"use strict\";\n\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.default = void 0;\n\nvar _drawer = _interopRequireDefault(__webpack_require__(/*! ./drawer */ \"./src/drawer.js\"));\n\nvar util = _interopRequireWildcard(__webpack_require__(/*! ./util */ \"./src/util/index.js\"));\n\nvar _drawer2 = _interopRequireDefault(__webpack_require__(/*! ./drawer.canvasentry */ \"./src/drawer.canvasentry.js\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/**\n * MultiCanvas renderer for wavesurfer. Is currently the default and sole\n * builtin renderer.\n *\n * A `MultiCanvas` consists of one or more `CanvasEntry` instances, depending\n * on the zoom level.\n */\nvar MultiCanvas = /*#__PURE__*/function (_Drawer) {\n  _inherits(MultiCanvas, _Drawer);\n\n  var _super = _createSuper(MultiCanvas);\n\n  /**\n   * @param {HTMLElement} container The container node of the wavesurfer instance\n   * @param {WavesurferParams} params The wavesurfer initialisation options\n   */\n  function MultiCanvas(container, params) {\n    var _this;\n\n    _classCallCheck(this, MultiCanvas);\n\n    _this = _super.call(this, container, params);\n    /**\n     * @type {number}\n     */\n\n    _this.maxCanvasWidth = params.maxCanvasWidth;\n    /**\n     * @type {number}\n     */\n\n    _this.maxCanvasElementWidth = Math.round(params.maxCanvasWidth / params.pixelRatio);\n    /**\n     * Whether or not the progress wave is rendered. If the `waveColor`\n     * and `progressColor` are the same color it is not.\n     *\n     * @type {boolean}\n     */\n\n    _this.hasProgressCanvas = params.waveColor != params.progressColor;\n    /**\n     * @type {number}\n     */\n\n    _this.halfPixel = 0.5 / params.pixelRatio;\n    /**\n     * List of `CanvasEntry` instances.\n     *\n     * @type {Array}\n     */\n\n    _this.canvases = [];\n    /**\n     * @type {HTMLElement}\n     */\n\n    _this.progressWave = null;\n    /**\n     * Class used to generate entries.\n     *\n     * @type {function}\n     */\n\n    _this.EntryClass = _drawer2.default;\n    /**\n     * Canvas 2d context attributes.\n     *\n     * @type {object}\n     */\n\n    _this.canvasContextAttributes = params.drawingContextAttributes;\n    /**\n     * Overlap added between entries to prevent vertical white stripes\n     * between `canvas` elements.\n     *\n     * @type {number}\n     */\n\n    _this.overlap = 2 * Math.ceil(params.pixelRatio / 2);\n    /**\n     * The radius of the wave bars. Makes bars rounded\n     *\n     * @type {number}\n     */\n\n    _this.barRadius = params.barRadius || 0;\n    /**\n     * Whether to render the waveform vertically. Defaults to false.\n     *\n     * @type {boolean}\n     */\n\n    _this.vertical = params.vertical;\n    return _this;\n  }\n  /**\n   * Initialize the drawer\n   */\n\n\n  _createClass(MultiCanvas, [{\n    key: \"init\",\n    value: function init() {\n      this.createWrapper();\n      this.createElements();\n    }\n    /**\n     * Create the canvas elements and style them\n     *\n     */\n\n  }, {\n    key: \"createElements\",\n    value: function createElements() {\n      this.progressWave = util.withOrientation(this.wrapper.appendChild(document.createElement('wave')), this.params.vertical);\n      this.style(this.progressWave, {\n        position: 'absolute',\n        zIndex: 3,\n        left: 0,\n        top: 0,\n        bottom: 0,\n        overflow: 'hidden',\n        width: '0',\n        display: 'none',\n        boxSizing: 'border-box',\n        borderRightStyle: 'solid',\n        pointerEvents: 'none'\n      });\n      this.addCanvas();\n      this.updateCursor();\n    }\n    /**\n     * Update cursor style\n     */\n\n  }, {\n    key: \"updateCursor\",\n    value: function updateCursor() {\n      this.style(this.progressWave, {\n        borderRightWidth: this.params.cursorWidth + 'px',\n        borderRightColor: this.params.cursorColor\n      });\n    }\n    /**\n     * Adjust to the updated size by adding or removing canvases\n     */\n\n  }, {\n    key: \"updateSize\",\n    value: function updateSize() {\n      var _this2 = this;\n\n      var totalWidth = Math.round(this.width / this.params.pixelRatio);\n      var requiredCanvases = Math.ceil(totalWidth / (this.maxCanvasElementWidth + this.overlap)); // add required canvases\n\n      while (this.canvases.length < requiredCanvases) {\n        this.addCanvas();\n      } // remove older existing canvases, if any\n\n\n      while (this.canvases.length > requiredCanvases) {\n        this.removeCanvas();\n      }\n\n      var canvasWidth = this.maxCanvasWidth + this.overlap;\n      var lastCanvas = this.canvases.length - 1;\n      this.canvases.forEach(function (entry, i) {\n        if (i == lastCanvas) {\n          canvasWidth = _this2.width - _this2.maxCanvasWidth * lastCanvas;\n        }\n\n        _this2.updateDimensions(entry, canvasWidth, _this2.height);\n\n        entry.clearWave();\n      });\n    }\n    /**\n     * Add a canvas to the canvas list\n     *\n     */\n\n  }, {\n    key: \"addCanvas\",\n    value: function addCanvas() {\n      var entry = new this.EntryClass();\n      entry.canvasContextAttributes = this.canvasContextAttributes;\n      entry.hasProgressCanvas = this.hasProgressCanvas;\n      entry.halfPixel = this.halfPixel;\n      var leftOffset = this.maxCanvasElementWidth * this.canvases.length; // wave\n\n      var wave = util.withOrientation(this.wrapper.appendChild(document.createElement('canvas')), this.params.vertical);\n      this.style(wave, {\n        position: 'absolute',\n        zIndex: 2,\n        left: leftOffset + 'px',\n        top: 0,\n        bottom: 0,\n        height: '100%',\n        pointerEvents: 'none'\n      });\n      entry.initWave(wave); // progress\n\n      if (this.hasProgressCanvas) {\n        var progress = util.withOrientation(this.progressWave.appendChild(document.createElement('canvas')), this.params.vertical);\n        this.style(progress, {\n          position: 'absolute',\n          left: leftOffset + 'px',\n          top: 0,\n          bottom: 0,\n          height: '100%'\n        });\n        entry.initProgress(progress);\n      }\n\n      this.canvases.push(entry);\n    }\n    /**\n     * Pop single canvas from the list\n     *\n     */\n\n  }, {\n    key: \"removeCanvas\",\n    value: function removeCanvas() {\n      var lastEntry = this.canvases[this.canvases.length - 1]; // wave\n\n      lastEntry.wave.parentElement.removeChild(lastEntry.wave.domElement); // progress\n\n      if (this.hasProgressCanvas) {\n        lastEntry.progress.parentElement.removeChild(lastEntry.progress.domElement);\n      } // cleanup\n\n\n      if (lastEntry) {\n        lastEntry.destroy();\n        lastEntry = null;\n      }\n\n      this.canvases.pop();\n    }\n    /**\n     * Update the dimensions of a canvas element\n     *\n     * @param {CanvasEntry} entry Target entry\n     * @param {number} width The new width of the element\n     * @param {number} height The new height of the element\n     */\n\n  }, {\n    key: \"updateDimensions\",\n    value: function updateDimensions(entry, width, height) {\n      var elementWidth = Math.round(width / this.params.pixelRatio);\n      var totalWidth = Math.round(this.width / this.params.pixelRatio); // update canvas dimensions\n\n      entry.updateDimensions(elementWidth, totalWidth, width, height); // style element\n\n      this.style(this.progressWave, {\n        display: 'block'\n      });\n    }\n    /**\n     * Clear the whole multi-canvas\n     */\n\n  }, {\n    key: \"clearWave\",\n    value: function clearWave() {\n      var _this3 = this;\n\n      util.frame(function () {\n        _this3.canvases.forEach(function (entry) {\n          return entry.clearWave();\n        });\n      })();\n    }\n    /**\n     * Draw a waveform with bars\n     *\n     * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays\n     * for split channel rendering\n     * @param {number} channelIndex The index of the current channel. Normally\n     * should be 0. Must be an integer.\n     * @param {number} start The x-offset of the beginning of the area that\n     * should be rendered\n     * @param {number} end The x-offset of the end of the area that should be\n     * rendered\n     * @returns {void}\n     */\n\n  }, {\n    key: \"drawBars\",\n    value: function drawBars(peaks, channelIndex, start, end) {\n      var _this4 = this;\n\n      return this.prepareDraw(peaks, channelIndex, start, end, function (_ref) {\n        var absmax = _ref.absmax,\n            hasMinVals = _ref.hasMinVals,\n            height = _ref.height,\n            offsetY = _ref.offsetY,\n            halfH = _ref.halfH,\n            peaks = _ref.peaks,\n            ch = _ref.channelIndex;\n\n        // if drawBars was called within ws.empty we don't pass a start and\n        // don't want anything to happen\n        if (start === undefined) {\n          return;\n        } // Skip every other value if there are negatives.\n\n\n        var peakIndexScale = hasMinVals ? 2 : 1;\n        var length = peaks.length / peakIndexScale;\n        var bar = _this4.params.barWidth * _this4.params.pixelRatio;\n        var gap = _this4.params.barGap === null ? Math.max(_this4.params.pixelRatio, ~~(bar / 2)) : Math.max(_this4.params.pixelRatio, _this4.params.barGap * _this4.params.pixelRatio);\n        var step = bar + gap;\n        var scale = length / _this4.width;\n        var first = start;\n        var last = end;\n        var i = first;\n\n        for (i; i < last; i += step) {\n          var peak = peaks[Math.floor(i * scale * peakIndexScale)] || 0;\n          var h = Math.round(peak / absmax * halfH);\n          /* in case of silences, allow the user to specify that we\n           * always draw *something* (normally a 1px high bar) */\n\n          if (h == 0 && _this4.params.barMinHeight) {\n            h = _this4.params.barMinHeight;\n          }\n\n          _this4.fillRect(i + _this4.halfPixel, halfH - h + offsetY, bar + _this4.halfPixel, h * 2, _this4.barRadius, ch);\n        }\n      });\n    }\n    /**\n     * Draw a waveform\n     *\n     * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays\n     * for split channel rendering\n     * @param {number} channelIndex The index of the current channel. Normally\n     * should be 0\n     * @param {number?} start The x-offset of the beginning of the area that\n     * should be rendered (If this isn't set only a flat line is rendered)\n     * @param {number?} end The x-offset of the end of the area that should be\n     * rendered\n     * @returns {void}\n     */\n\n  }, {\n    key: \"drawWave\",\n    value: function drawWave(peaks, channelIndex, start, end) {\n      var _this5 = this;\n\n      return this.prepareDraw(peaks, channelIndex, start, end, function (_ref2) {\n        var absmax = _ref2.absmax,\n            hasMinVals = _ref2.hasMinVals,\n            height = _ref2.height,\n            offsetY = _ref2.offsetY,\n            halfH = _ref2.halfH,\n            peaks = _ref2.peaks,\n            channelIndex = _ref2.channelIndex;\n\n        if (!hasMinVals) {\n          var reflectedPeaks = [];\n          var len = peaks.length;\n          var i = 0;\n\n          for (i; i < len; i++) {\n            reflectedPeaks[2 * i] = peaks[i];\n            reflectedPeaks[2 * i + 1] = -peaks[i];\n          }\n\n          peaks = reflectedPeaks;\n        } // if drawWave was called within ws.empty we don't pass a start and\n        // end and simply want a flat line\n\n\n        if (start !== undefined) {\n          _this5.drawLine(peaks, absmax, halfH, offsetY, start, end, channelIndex);\n        } // always draw a median line\n\n\n        _this5.fillRect(0, halfH + offsetY - _this5.halfPixel, _this5.width, _this5.halfPixel, _this5.barRadius, channelIndex);\n      });\n    }\n    /**\n     * Tell the canvas entries to render their portion of the waveform\n     *\n     * @param {number[]} peaks Peaks data\n     * @param {number} absmax Maximum peak value (absolute)\n     * @param {number} halfH Half the height of the waveform\n     * @param {number} offsetY Offset to the top\n     * @param {number} start The x-offset of the beginning of the area that\n     * should be rendered\n     * @param {number} end The x-offset of the end of the area that\n     * should be rendered\n     * @param {channelIndex} channelIndex The channel index of the line drawn\n     */\n\n  }, {\n    key: \"drawLine\",\n    value: function drawLine(peaks, absmax, halfH, offsetY, start, end, channelIndex) {\n      var _this6 = this;\n\n      var _ref3 = this.params.splitChannelsOptions.channelColors[channelIndex] || {},\n          waveColor = _ref3.waveColor,\n          progressColor = _ref3.progressColor;\n\n      this.canvases.forEach(function (entry, i) {\n        _this6.setFillStyles(entry, waveColor, progressColor);\n\n        _this6.applyCanvasTransforms(entry, _this6.params.vertical);\n\n        entry.drawLines(peaks, absmax, halfH, offsetY, start, end);\n      });\n    }\n    /**\n     * Draw a rectangle on the multi-canvas\n     *\n     * @param {number} x X-position of the rectangle\n     * @param {number} y Y-position of the rectangle\n     * @param {number} width Width of the rectangle\n     * @param {number} height Height of the rectangle\n     * @param {number} radius Radius of the rectangle\n     * @param {channelIndex} channelIndex The channel index of the bar drawn\n     */\n\n  }, {\n    key: \"fillRect\",\n    value: function fillRect(x, y, width, height, radius, channelIndex) {\n      var startCanvas = Math.floor(x / this.maxCanvasWidth);\n      var endCanvas = Math.min(Math.ceil((x + width) / this.maxCanvasWidth) + 1, this.canvases.length);\n      var i = startCanvas;\n\n      for (i; i < endCanvas; i++) {\n        var entry = this.canvases[i];\n        var leftOffset = i * this.maxCanvasWidth;\n        var intersection = {\n          x1: Math.max(x, i * this.maxCanvasWidth),\n          y1: y,\n          x2: Math.min(x + width, i * this.maxCanvasWidth + entry.wave.width),\n          y2: y + height\n        };\n\n        if (intersection.x1 < intersection.x2) {\n          var _ref4 = this.params.splitChannelsOptions.channelColors[channelIndex] || {},\n              waveColor = _ref4.waveColor,\n              progressColor = _ref4.progressColor;\n\n          this.setFillStyles(entry, waveColor, progressColor);\n          this.applyCanvasTransforms(entry, this.params.vertical);\n          entry.fillRects(intersection.x1 - leftOffset, intersection.y1, intersection.x2 - intersection.x1, intersection.y2 - intersection.y1, radius);\n        }\n      }\n    }\n    /**\n     * Returns whether to hide the channel from being drawn based on params.\n     *\n     * @param {number} channelIndex The index of the current channel.\n     * @returns {bool} True to hide the channel, false to draw.\n     */\n\n  }, {\n    key: \"hideChannel\",\n    value: function hideChannel(channelIndex) {\n      return this.params.splitChannels && this.params.splitChannelsOptions.filterChannels.includes(channelIndex);\n    }\n    /**\n     * Performs preparation tasks and calculations which are shared by `drawBars`\n     * and `drawWave`\n     *\n     * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays for\n     * split channel rendering\n     * @param {number} channelIndex The index of the current channel. Normally\n     * should be 0\n     * @param {number?} start The x-offset of the beginning of the area that\n     * should be rendered. If this isn't set only a flat line is rendered\n     * @param {number?} end The x-offset of the end of the area that should be\n     * rendered\n     * @param {function} fn The render function to call, e.g. `drawWave`\n     * @param {number} drawIndex The index of the current channel after filtering.\n     * @param {number?} normalizedMax Maximum modulation value across channels for use with relativeNormalization. Ignored when undefined\n     * @returns {void}\n     */\n\n  }, {\n    key: \"prepareDraw\",\n    value: function prepareDraw(peaks, channelIndex, start, end, fn, drawIndex, normalizedMax) {\n      var _this7 = this;\n\n      return util.frame(function () {\n        // Split channels and call this function with the channelIndex set\n        if (peaks[0] instanceof Array) {\n          var channels = peaks;\n\n          if (_this7.params.splitChannels) {\n            var filteredChannels = channels.filter(function (c, i) {\n              return !_this7.hideChannel(i);\n            });\n\n            if (!_this7.params.splitChannelsOptions.overlay) {\n              _this7.setHeight(Math.max(filteredChannels.length, 1) * _this7.params.height * _this7.params.pixelRatio);\n            }\n\n            var overallAbsMax;\n\n            if (_this7.params.splitChannelsOptions && _this7.params.splitChannelsOptions.relativeNormalization) {\n              // calculate maximum peak across channels to use for normalization\n              overallAbsMax = util.max(channels.map(function (channelPeaks) {\n                return util.absMax(channelPeaks);\n              }));\n            }\n\n            return channels.forEach(function (channelPeaks, i) {\n              return _this7.prepareDraw(channelPeaks, i, start, end, fn, filteredChannels.indexOf(channelPeaks), overallAbsMax);\n            });\n          }\n\n          peaks = channels[0];\n        } // Return and do not draw channel peaks if hidden.\n\n\n        if (_this7.hideChannel(channelIndex)) {\n          return;\n        } // calculate maximum modulation value, either from the barHeight\n        // parameter or if normalize=true from the largest value in the peak\n        // set\n\n\n        var absmax = 1 / _this7.params.barHeight;\n\n        if (_this7.params.normalize) {\n          absmax = normalizedMax === undefined ? util.absMax(peaks) : normalizedMax;\n        } // Bar wave draws the bottom only as a reflection of the top,\n        // so we don't need negative values\n\n\n        var hasMinVals = [].some.call(peaks, function (val) {\n          return val < 0;\n        });\n        var height = _this7.params.height * _this7.params.pixelRatio;\n        var halfH = height / 2;\n        var offsetY = height * drawIndex || 0; // Override offsetY if overlay is true\n\n        if (_this7.params.splitChannelsOptions && _this7.params.splitChannelsOptions.overlay) {\n          offsetY = 0;\n        }\n\n        return fn({\n          absmax: absmax,\n          hasMinVals: hasMinVals,\n          height: height,\n          offsetY: offsetY,\n          halfH: halfH,\n          peaks: peaks,\n          channelIndex: channelIndex\n        });\n      })();\n    }\n    /**\n     * Set the fill styles for a certain entry (wave and progress)\n     *\n     * @param {CanvasEntry} entry Target entry\n     * @param {string} waveColor Wave color to draw this entry\n     * @param {string} progressColor Progress color to draw this entry\n     */\n\n  }, {\n    key: \"setFillStyles\",\n    value: function setFillStyles(entry) {\n      var waveColor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.params.waveColor;\n      var progressColor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.params.progressColor;\n      entry.setFillStyles(waveColor, progressColor);\n    }\n    /**\n     * Set the canvas transforms for a certain entry (wave and progress)\n     *\n     * @param {CanvasEntry} entry Target entry\n     * @param {boolean} vertical Whether to render the waveform vertically\n     */\n\n  }, {\n    key: \"applyCanvasTransforms\",\n    value: function applyCanvasTransforms(entry) {\n      var vertical = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      entry.applyCanvasTransforms(vertical);\n    }\n    /**\n     * Return image data of the multi-canvas\n     *\n     * When using a `type` of `'blob'`, this will return a `Promise`.\n     *\n     * @param {string} format='image/png' An optional value of a format type.\n     * @param {number} quality=0.92 An optional value between 0 and 1.\n     * @param {string} type='dataURL' Either 'dataURL' or 'blob'.\n     * @return {string|string[]|Promise} When using the default `'dataURL'`\n     * `type` this returns a single data URL or an array of data URLs,\n     * one for each canvas. When using the `'blob'` `type` this returns a\n     * `Promise` that resolves with an array of `Blob` instances, one for each\n     * canvas.\n     */\n\n  }, {\n    key: \"getImage\",\n    value: function getImage(format, quality, type) {\n      if (type === 'blob') {\n        return Promise.all(this.canvases.map(function (entry) {\n          return entry.getImage(format, quality, type);\n        }));\n      } else if (type === 'dataURL') {\n        var images = this.canvases.map(function (entry) {\n          return entry.getImage(format, quality, type);\n        });\n        return images.length > 1 ? images : images[0];\n      }\n    }\n    /**\n     * Render the new progress\n     *\n     * @param {number} position X-offset of progress position in pixels\n     */\n\n  }, {\n    key: \"updateProgress\",\n    value: function updateProgress(position) {\n      this.style(this.progressWave, {\n        width: position + 'px'\n      });\n    }\n  }]);\n\n  return MultiCanvas;\n}(_drawer.default);\n\nexports.default = MultiCanvas;\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/mediaelement-webaudio.js\":\n/*!**************************************!*\\\n  !*** ./src/mediaelement-webaudio.js ***!\n  \\**************************************/\n/***/ ((module, exports, __webpack_require__) => {\n\n\"use strict\";\n\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.default = void 0;\n\nvar _mediaelement = _interopRequireDefault(__webpack_require__(/*! ./mediaelement */ \"./src/mediaelement.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/**\n * MediaElementWebAudio backend: load audio via an HTML5 audio tag, but playback with the WebAudio API.\n * The advantage here is that the html5 <audio> tag can perform range requests on the server and not\n * buffer the entire file in one request, and you still get the filtering and scripting functionality\n * of the webaudio API.\n * Note that in order to use range requests and prevent buffering, you must provide peak data.\n *\n * @since 3.2.0\n */\nvar MediaElementWebAudio = /*#__PURE__*/function (_MediaElement) {\n  _inherits(MediaElementWebAudio, _MediaElement);\n\n  var _super = _createSuper(MediaElementWebAudio);\n\n  /**\n   * Construct the backend\n   *\n   * @param {WavesurferParams} params Wavesurfer parameters\n   */\n  function MediaElementWebAudio(params) {\n    var _this;\n\n    _classCallCheck(this, MediaElementWebAudio);\n\n    _this = _super.call(this, params);\n    /** @private */\n\n    _this.params = params;\n    /** @private */\n\n    _this.sourceMediaElement = null;\n    return _this;\n  }\n  /**\n   * Initialise the backend, called in `wavesurfer.createBackend()`\n   */\n\n\n  _createClass(MediaElementWebAudio, [{\n    key: \"init\",\n    value: function init() {\n      this.setPlaybackRate(this.params.audioRate);\n      this.createTimer();\n      this.createVolumeNode();\n      this.createScriptNode();\n      this.createAnalyserNode();\n    }\n    /**\n     * Private method called by both `load` (from url)\n     * and `loadElt` (existing media element) methods.\n     *\n     * @param {HTMLMediaElement} media HTML5 Audio or Video element\n     * @param {number[]|Number.<Array[]>} peaks Array of peak data\n     * @param {string} preload HTML 5 preload attribute value\n     * @private\n     */\n\n  }, {\n    key: \"_load\",\n    value: function _load(media, peaks, preload) {\n      _get(_getPrototypeOf(MediaElementWebAudio.prototype), \"_load\", this).call(this, media, peaks, preload);\n\n      this.createMediaElementSource(media);\n    }\n    /**\n     * Create MediaElementSource node\n     *\n     * @since 3.2.0\n     * @param {HTMLMediaElement} mediaElement HTML5 Audio to load\n     */\n\n  }, {\n    key: \"createMediaElementSource\",\n    value: function createMediaElementSource(mediaElement) {\n      this.sourceMediaElement = this.ac.createMediaElementSource(mediaElement);\n      this.sourceMediaElement.connect(this.analyser);\n    }\n  }, {\n    key: \"play\",\n    value: function play(start, end) {\n      this.resumeAudioContext();\n      return _get(_getPrototypeOf(MediaElementWebAudio.prototype), \"play\", this).call(this, start, end);\n    }\n    /**\n     * This is called when wavesurfer is destroyed\n     *\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _get(_getPrototypeOf(MediaElementWebAudio.prototype), \"destroy\", this).call(this);\n\n      this.destroyWebAudio();\n    }\n  }]);\n\n  return MediaElementWebAudio;\n}(_mediaelement.default);\n\nexports.default = MediaElementWebAudio;\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/mediaelement.js\":\n/*!*****************************!*\\\n  !*** ./src/mediaelement.js ***!\n  \\*****************************/\n/***/ ((module, exports, __webpack_require__) => {\n\n\"use strict\";\n\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.default = void 0;\n\nvar _webaudio = _interopRequireDefault(__webpack_require__(/*! ./webaudio */ \"./src/webaudio.js\"));\n\nvar util = _interopRequireWildcard(__webpack_require__(/*! ./util */ \"./src/util/index.js\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/**\n * MediaElement backend\n */\nvar MediaElement = /*#__PURE__*/function (_WebAudio) {\n  _inherits(MediaElement, _WebAudio);\n\n  var _super = _createSuper(MediaElement);\n\n  /**\n   * Construct the backend\n   *\n   * @param {WavesurferParams} params Wavesurfer parameters\n   */\n  function MediaElement(params) {\n    var _this;\n\n    _classCallCheck(this, MediaElement);\n\n    _this = _super.call(this, params);\n    /** @private */\n\n    _this.params = params;\n    /**\n     * Initially a dummy media element to catch errors. Once `_load` is\n     * called, this will contain the actual `HTMLMediaElement`.\n     * @private\n     */\n\n    _this.media = {\n      currentTime: 0,\n      duration: 0,\n      paused: true,\n      playbackRate: 1,\n      play: function play() {},\n      pause: function pause() {},\n      volume: 0\n    };\n    /** @private */\n\n    _this.mediaType = params.mediaType.toLowerCase();\n    /** @private */\n\n    _this.elementPosition = params.elementPosition;\n    /** @private */\n\n    _this.peaks = null;\n    /** @private */\n\n    _this.playbackRate = 1;\n    /** @private */\n\n    _this.volume = 1;\n    /** @private */\n\n    _this.isMuted = false;\n    /** @private */\n\n    _this.buffer = null;\n    /** @private */\n\n    _this.onPlayEnd = null;\n    /** @private */\n\n    _this.mediaListeners = {};\n    return _this;\n  }\n  /**\n   * Initialise the backend, called in `wavesurfer.createBackend()`\n   */\n\n\n  _createClass(MediaElement, [{\n    key: \"init\",\n    value: function init() {\n      this.setPlaybackRate(this.params.audioRate);\n      this.createTimer();\n    }\n    /**\n     * Attach event listeners to media element.\n     */\n\n  }, {\n    key: \"_setupMediaListeners\",\n    value: function _setupMediaListeners() {\n      var _this2 = this;\n\n      this.mediaListeners.error = function () {\n        _this2.fireEvent('error', 'Error loading media element');\n      };\n\n      this.mediaListeners.canplay = function () {\n        _this2.fireEvent('canplay');\n      };\n\n      this.mediaListeners.ended = function () {\n        _this2.fireEvent('finish');\n      }; // listen to and relay play, pause and seeked events to enable\n      // playback control from the external media element\n\n\n      this.mediaListeners.play = function () {\n        _this2.fireEvent('play');\n      };\n\n      this.mediaListeners.pause = function () {\n        _this2.fireEvent('pause');\n      };\n\n      this.mediaListeners.seeked = function (event) {\n        _this2.fireEvent('seek');\n      };\n\n      this.mediaListeners.volumechange = function (event) {\n        _this2.isMuted = _this2.media.muted;\n\n        if (_this2.isMuted) {\n          _this2.volume = 0;\n        } else {\n          _this2.volume = _this2.media.volume;\n        }\n\n        _this2.fireEvent('volume');\n      }; // reset event listeners\n\n\n      Object.keys(this.mediaListeners).forEach(function (id) {\n        _this2.media.removeEventListener(id, _this2.mediaListeners[id]);\n\n        _this2.media.addEventListener(id, _this2.mediaListeners[id]);\n      });\n    }\n    /**\n     * Create a timer to provide a more precise `audioprocess` event.\n     */\n\n  }, {\n    key: \"createTimer\",\n    value: function createTimer() {\n      var _this3 = this;\n\n      var onAudioProcess = function onAudioProcess() {\n        if (_this3.isPaused()) {\n          return;\n        }\n\n        _this3.fireEvent('audioprocess', _this3.getCurrentTime()); // Call again in the next frame\n\n\n        util.frame(onAudioProcess)();\n      };\n\n      this.on('play', onAudioProcess); // Update the progress one more time to prevent it from being stuck in\n      // case of lower framerates\n\n      this.on('pause', function () {\n        _this3.fireEvent('audioprocess', _this3.getCurrentTime());\n      });\n    }\n    /**\n     * Create media element with url as its source,\n     * and append to container element.\n     *\n     * @param {string} url Path to media file\n     * @param {HTMLElement} container HTML element\n     * @param {number[]|Number.<Array[]>} peaks Array of peak data\n     * @param {string} preload HTML 5 preload attribute value\n     * @throws Will throw an error if the `url` argument is not a valid media\n     * element.\n     */\n\n  }, {\n    key: \"load\",\n    value: function load(url, container, peaks, preload) {\n      var media = document.createElement(this.mediaType);\n      media.controls = this.params.mediaControls;\n      media.autoplay = this.params.autoplay || false;\n      media.preload = preload == null ? 'auto' : preload;\n      media.src = url;\n      media.style.width = '100%';\n      var prevMedia = container.querySelector(this.mediaType);\n\n      if (prevMedia) {\n        container.removeChild(prevMedia);\n      }\n\n      container.appendChild(media);\n\n      this._load(media, peaks, preload);\n    }\n    /**\n     * Load existing media element.\n     *\n     * @param {HTMLMediaElement} elt HTML5 Audio or Video element\n     * @param {number[]|Number.<Array[]>} peaks Array of peak data\n     */\n\n  }, {\n    key: \"loadElt\",\n    value: function loadElt(elt, peaks) {\n      elt.controls = this.params.mediaControls;\n      elt.autoplay = this.params.autoplay || false;\n\n      this._load(elt, peaks, elt.preload);\n    }\n    /**\n     * Method called by both `load` (from url)\n     * and `loadElt` (existing media element) methods.\n     *\n     * @param {HTMLMediaElement} media HTML5 Audio or Video element\n     * @param {number[]|Number.<Array[]>} peaks Array of peak data\n     * @param {string} preload HTML 5 preload attribute value\n     * @throws Will throw an error if the `media` argument is not a valid media\n     * element.\n     * @private\n     */\n\n  }, {\n    key: \"_load\",\n    value: function _load(media, peaks, preload) {\n      // verify media element is valid\n      if (!(media instanceof HTMLMediaElement) || typeof media.addEventListener === 'undefined') {\n        throw new Error('media parameter is not a valid media element');\n      } // load must be called manually on iOS, otherwise peaks won't draw\n      // until a user interaction triggers load --> 'ready' event\n      //\n      // note that we avoid calling media.load here when given peaks and preload == 'none'\n      // as this almost always triggers some browser fetch of the media.\n\n\n      if (typeof media.load == 'function' && !(peaks && preload == 'none')) {\n        // Resets the media element and restarts the media resource. Any\n        // pending events are discarded. How much media data is fetched is\n        // still affected by the preload attribute.\n        media.load();\n      }\n\n      this.media = media;\n\n      this._setupMediaListeners();\n\n      this.peaks = peaks;\n      this.onPlayEnd = null;\n      this.buffer = null;\n      this.isMuted = media.muted;\n      this.setPlaybackRate(this.playbackRate);\n      this.setVolume(this.volume);\n    }\n    /**\n     * Used by `wavesurfer.isPlaying()` and `wavesurfer.playPause()`\n     *\n     * @return {boolean} Media paused or not\n     */\n\n  }, {\n    key: \"isPaused\",\n    value: function isPaused() {\n      return !this.media || this.media.paused;\n    }\n    /**\n     * Used by `wavesurfer.getDuration()`\n     *\n     * @return {number} Duration\n     */\n\n  }, {\n    key: \"getDuration\",\n    value: function getDuration() {\n      if (this.explicitDuration) {\n        return this.explicitDuration;\n      }\n\n      var duration = (this.buffer || this.media).duration;\n\n      if (duration >= Infinity) {\n        // streaming audio\n        duration = this.media.seekable.end(0);\n      }\n\n      return duration;\n    }\n    /**\n     * Returns the current time in seconds relative to the audio-clip's\n     * duration.\n     *\n     * @return {number} Current time\n     */\n\n  }, {\n    key: \"getCurrentTime\",\n    value: function getCurrentTime() {\n      return this.media && this.media.currentTime;\n    }\n    /**\n     * Get the position from 0 to 1\n     *\n     * @return {number} Current position\n     */\n\n  }, {\n    key: \"getPlayedPercents\",\n    value: function getPlayedPercents() {\n      return this.getCurrentTime() / this.getDuration() || 0;\n    }\n    /**\n     * Get the audio source playback rate.\n     *\n     * @return {number} Playback rate\n     */\n\n  }, {\n    key: \"getPlaybackRate\",\n    value: function getPlaybackRate() {\n      return this.playbackRate || this.media.playbackRate;\n    }\n    /**\n     * Set the audio source playback rate.\n     *\n     * @param {number} value Playback rate\n     */\n\n  }, {\n    key: \"setPlaybackRate\",\n    value: function setPlaybackRate(value) {\n      this.playbackRate = value || 1;\n      this.media.playbackRate = this.playbackRate;\n    }\n    /**\n     * Used by `wavesurfer.seekTo()`\n     *\n     * @param {number} start Position to start at in seconds\n     */\n\n  }, {\n    key: \"seekTo\",\n    value: function seekTo(start) {\n      if (start != null) {\n        this.media.currentTime = start;\n      }\n\n      this.clearPlayEnd();\n    }\n    /**\n     * Plays the loaded audio region.\n     *\n     * @param {number} start Start offset in seconds, relative to the beginning\n     * of a clip.\n     * @param {number} end When to stop, relative to the beginning of a clip.\n     * @emits MediaElement#play\n     * @return {Promise} Result\n     */\n\n  }, {\n    key: \"play\",\n    value: function play(start, end) {\n      this.seekTo(start);\n      var promise = this.media.play();\n      end && this.setPlayEnd(end);\n      return promise;\n    }\n    /**\n     * Pauses the loaded audio.\n     *\n     * @emits MediaElement#pause\n     * @return {Promise} Result\n     */\n\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      var promise;\n\n      if (this.media) {\n        promise = this.media.pause();\n      }\n\n      this.clearPlayEnd();\n      return promise;\n    }\n    /**\n     * Set the play end\n     *\n     * @param {number} end Where to end\n     */\n\n  }, {\n    key: \"setPlayEnd\",\n    value: function setPlayEnd(end) {\n      var _this4 = this;\n\n      this.clearPlayEnd();\n\n      this._onPlayEnd = function (time) {\n        if (time >= end) {\n          _this4.pause();\n\n          _this4.seekTo(end);\n        }\n      };\n\n      this.on('audioprocess', this._onPlayEnd);\n    }\n    /** @private */\n\n  }, {\n    key: \"clearPlayEnd\",\n    value: function clearPlayEnd() {\n      if (this._onPlayEnd) {\n        this.un('audioprocess', this._onPlayEnd);\n        this._onPlayEnd = null;\n      }\n    }\n    /**\n     * Compute the max and min value of the waveform when broken into\n     * <length> subranges.\n     *\n     * @param {number} length How many subranges to break the waveform into.\n     * @param {number} first First sample in the required range.\n     * @param {number} last Last sample in the required range.\n     * @return {number[]|Number.<Array[]>} Array of 2*<length> peaks or array of\n     * arrays of peaks consisting of (max, min) values for each subrange.\n     */\n\n  }, {\n    key: \"getPeaks\",\n    value: function getPeaks(length, first, last) {\n      if (this.buffer) {\n        return _get(_getPrototypeOf(MediaElement.prototype), \"getPeaks\", this).call(this, length, first, last);\n      }\n\n      return this.peaks || [];\n    }\n    /**\n     * Set the sink id for the media player\n     *\n     * @param {string} deviceId String value representing audio device id.\n     * @returns {Promise} A Promise that resolves to `undefined` when there\n     * are no errors.\n     */\n\n  }, {\n    key: \"setSinkId\",\n    value: function setSinkId(deviceId) {\n      if (deviceId) {\n        if (!this.media.setSinkId) {\n          return Promise.reject(new Error('setSinkId is not supported in your browser'));\n        }\n\n        return this.media.setSinkId(deviceId);\n      }\n\n      return Promise.reject(new Error('Invalid deviceId: ' + deviceId));\n    }\n    /**\n     * Get the current volume\n     *\n     * @return {number} value A floating point value between 0 and 1.\n     */\n\n  }, {\n    key: \"getVolume\",\n    value: function getVolume() {\n      return this.volume;\n    }\n    /**\n     * Set the audio volume\n     *\n     * @param {number} value A floating point value between 0 and 1.\n     */\n\n  }, {\n    key: \"setVolume\",\n    value: function setVolume(value) {\n      this.volume = value; // no need to change when it's already at that volume\n\n      if (this.media.volume !== this.volume) {\n        this.media.volume = this.volume;\n      }\n    }\n    /**\n     * Enable or disable muted audio\n     *\n     * @since 4.0.0\n     * @param {boolean} muted Specify `true` to mute audio.\n     */\n\n  }, {\n    key: \"setMute\",\n    value: function setMute(muted) {\n      // This causes a volume change to be emitted too through the\n      // volumechange event listener.\n      this.isMuted = this.media.muted = muted;\n    }\n    /**\n     * This is called when wavesurfer is destroyed\n     *\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var _this5 = this;\n\n      this.pause();\n      this.unAll();\n      this.destroyed = true; // cleanup media event listeners\n\n      Object.keys(this.mediaListeners).forEach(function (id) {\n        if (_this5.media) {\n          _this5.media.removeEventListener(id, _this5.mediaListeners[id]);\n        }\n      });\n\n      if (this.params.removeMediaElementOnDestroy && this.media && this.media.parentNode) {\n        this.media.parentNode.removeChild(this.media);\n      }\n\n      this.media = null;\n    }\n  }]);\n\n  return MediaElement;\n}(_webaudio.default);\n\nexports.default = MediaElement;\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/peakcache.js\":\n/*!**************************!*\\\n  !*** ./src/peakcache.js ***!\n  \\**************************/\n/***/ ((module, exports) => {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.default = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * Caches the decoded peaks data to improve rendering speed for large audio\n *\n * Is used if the option parameter `partialRender` is set to `true`\n */\nvar PeakCache = /*#__PURE__*/function () {\n  /**\n   * Instantiate cache\n   */\n  function PeakCache() {\n    _classCallCheck(this, PeakCache);\n\n    this.clearPeakCache();\n  }\n  /**\n   * Empty the cache\n   */\n\n\n  _createClass(PeakCache, [{\n    key: \"clearPeakCache\",\n    value: function clearPeakCache() {\n      /**\n       * Flat array with entries that are always in pairs to mark the\n       * beginning and end of each subrange.  This is a convenience so we can\n       * iterate over the pairs for easy set difference operations.\n       * @private\n       */\n      this.peakCacheRanges = [];\n      /**\n       * Length of the entire cachable region, used for resetting the cache\n       * when this changes (zoom events, for instance).\n       * @private\n       */\n\n      this.peakCacheLength = -1;\n    }\n    /**\n     * Add a range of peaks to the cache\n     *\n     * @param {number} length The length of the range\n     * @param {number} start The x offset of the start of the range\n     * @param {number} end The x offset of the end of the range\n     * @return {Number.<Array[]>} Array with arrays of numbers\n     */\n\n  }, {\n    key: \"addRangeToPeakCache\",\n    value: function addRangeToPeakCache(length, start, end) {\n      if (length != this.peakCacheLength) {\n        this.clearPeakCache();\n        this.peakCacheLength = length;\n      } // Return ranges that weren't in the cache before the call.\n\n\n      var uncachedRanges = [];\n      var i = 0; // Skip ranges before the current start.\n\n      while (i < this.peakCacheRanges.length && this.peakCacheRanges[i] < start) {\n        i++;\n      } // If |i| is even, |start| falls after an existing range.  Otherwise,\n      // |start| falls between an existing range, and the uncached region\n      // starts when we encounter the next node in |peakCacheRanges| or\n      // |end|, whichever comes first.\n\n\n      if (i % 2 == 0) {\n        uncachedRanges.push(start);\n      }\n\n      while (i < this.peakCacheRanges.length && this.peakCacheRanges[i] <= end) {\n        uncachedRanges.push(this.peakCacheRanges[i]);\n        i++;\n      } // If |i| is even, |end| is after all existing ranges.\n\n\n      if (i % 2 == 0) {\n        uncachedRanges.push(end);\n      } // Filter out the 0-length ranges.\n\n\n      uncachedRanges = uncachedRanges.filter(function (item, pos, arr) {\n        if (pos == 0) {\n          return item != arr[pos + 1];\n        } else if (pos == arr.length - 1) {\n          return item != arr[pos - 1];\n        }\n\n        return item != arr[pos - 1] && item != arr[pos + 1];\n      }); // Merge the two ranges together, uncachedRanges will either contain\n      // wholly new points, or duplicates of points in peakCacheRanges.  If\n      // duplicates are detected, remove both and extend the range.\n\n      this.peakCacheRanges = this.peakCacheRanges.concat(uncachedRanges);\n      this.peakCacheRanges = this.peakCacheRanges.sort(function (a, b) {\n        return a - b;\n      }).filter(function (item, pos, arr) {\n        if (pos == 0) {\n          return item != arr[pos + 1];\n        } else if (pos == arr.length - 1) {\n          return item != arr[pos - 1];\n        }\n\n        return item != arr[pos - 1] && item != arr[pos + 1];\n      }); // Push the uncached ranges into an array of arrays for ease of\n      // iteration in the functions that call this.\n\n      var uncachedRangePairs = [];\n\n      for (i = 0; i < uncachedRanges.length; i += 2) {\n        uncachedRangePairs.push([uncachedRanges[i], uncachedRanges[i + 1]]);\n      }\n\n      return uncachedRangePairs;\n    }\n    /**\n     * For testing\n     *\n     * @return {Number.<Array[]>} Array with arrays of numbers\n     */\n\n  }, {\n    key: \"getCacheRanges\",\n    value: function getCacheRanges() {\n      var peakCacheRangePairs = [];\n      var i;\n\n      for (i = 0; i < this.peakCacheRanges.length; i += 2) {\n        peakCacheRangePairs.push([this.peakCacheRanges[i], this.peakCacheRanges[i + 1]]);\n      }\n\n      return peakCacheRangePairs;\n    }\n  }]);\n\n  return PeakCache;\n}();\n\nexports.default = PeakCache;\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/util/absMax.js\":\n/*!****************************!*\\\n  !*** ./src/util/absMax.js ***!\n  \\****************************/\n/***/ ((module, exports, __webpack_require__) => {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.default = absMax;\n\nvar _max = _interopRequireDefault(__webpack_require__(/*! ./max */ \"./src/util/max.js\"));\n\nvar _min = _interopRequireDefault(__webpack_require__(/*! ./min */ \"./src/util/min.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Get the largest absolute value in an array\n *\n * @param   {Array} values Array of numbers\n * @returns {Number} Largest number found\n * @example console.log(max([-3, 2, 1]), max([-3, 2, 4])); // logs 3 4\n * @since 4.3.0\n */\nfunction absMax(values) {\n  var max = (0, _max.default)(values);\n  var min = (0, _min.default)(values);\n  return -min > max ? -min : max;\n}\n\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/util/clamp.js\":\n/*!***************************!*\\\n  !*** ./src/util/clamp.js ***!\n  \\***************************/\n/***/ ((module, exports) => {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.default = clamp;\n\n/**\n * Returns a number limited to the given range.\n *\n * @param {number} val The number to be limited to a range\n * @param {number} min The lower boundary of the limit range\n * @param {number} max The upper boundary of the limit range\n * @returns {number} A number in the range [min, max]\n */\nfunction clamp(val, min, max) {\n  return Math.min(Math.max(min, val), max);\n}\n\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/util/fetch.js\":\n/*!***************************!*\\\n  !*** ./src/util/fetch.js ***!\n  \\***************************/\n/***/ ((module, exports, __webpack_require__) => {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.default = fetchFile;\n\nvar _observer = _interopRequireDefault(__webpack_require__(/*! ./observer */ \"./src/util/observer.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar ProgressHandler = /*#__PURE__*/function () {\n  /**\n   * Instantiate ProgressHandler\n   *\n   * @param {Observer} instance The `fetchFile` observer instance.\n   * @param {Number} contentLength Content length.\n   * @param {Response} response Response object.\n   */\n  function ProgressHandler(instance, contentLength, response) {\n    _classCallCheck(this, ProgressHandler);\n\n    this.instance = instance;\n    this.instance._reader = response.body.getReader();\n    this.total = parseInt(contentLength, 10);\n    this.loaded = 0;\n  }\n  /**\n   * A method that is called once, immediately after the `ReadableStream``\n   * is constructed.\n   *\n   * @param {ReadableStreamDefaultController} controller Controller instance\n   *     used to control the stream.\n   */\n\n\n  _createClass(ProgressHandler, [{\n    key: \"start\",\n    value: function start(controller) {\n      var _this = this;\n\n      var read = function read() {\n        // instance._reader.read() returns a promise that resolves\n        // when a value has been received\n        _this.instance._reader.read().then(function (_ref) {\n          var done = _ref.done,\n              value = _ref.value;\n\n          // result objects contain two properties:\n          // done  - true if the stream has already given you all its data.\n          // value - some data. Always undefined when done is true.\n          if (done) {\n            // ensure onProgress called when content-length=0\n            if (_this.total === 0) {\n              _this.instance.onProgress.call(_this.instance, {\n                loaded: _this.loaded,\n                total: _this.total,\n                lengthComputable: false\n              });\n            } // no more data needs to be consumed, close the stream\n\n\n            controller.close();\n            return;\n          }\n\n          _this.loaded += value.byteLength;\n\n          _this.instance.onProgress.call(_this.instance, {\n            loaded: _this.loaded,\n            total: _this.total,\n            lengthComputable: !(_this.total === 0)\n          }); // enqueue the next data chunk into our target stream\n\n\n          controller.enqueue(value);\n          read();\n        }).catch(function (error) {\n          controller.error(error);\n        });\n      };\n\n      read();\n    }\n  }]);\n\n  return ProgressHandler;\n}();\n/**\n * Load a file using `fetch`.\n *\n * @param {object} options Request options to use. See example below.\n * @returns {Observer} Observer instance\n * @example\n * // default options\n * let options = {\n *     url: undefined,\n *     method: 'GET',\n *     mode: 'cors',\n *     credentials: 'same-origin',\n *     cache: 'default',\n *     responseType: 'json',\n *     requestHeaders: [],\n *     redirect: 'follow',\n *     referrer: 'client'\n * };\n *\n * // override some options\n * options.url = '../media/demo.wav';\n\n * // available types: 'arraybuffer', 'blob', 'json' or 'text'\n * options.responseType = 'arraybuffer';\n *\n * // make fetch call\n * let request = util.fetchFile(options);\n *\n * // listen for events\n * request.on('progress', e => {\n *     console.log('progress', e);\n * });\n *\n * request.on('success', data => {\n *     console.log('success!', data);\n * });\n *\n * request.on('error', e => {\n *     console.warn('fetchFile error: ', e);\n * });\n */\n\n\nfunction fetchFile(options) {\n  if (!options) {\n    throw new Error('fetch options missing');\n  } else if (!options.url) {\n    throw new Error('fetch url missing');\n  }\n\n  var instance = new _observer.default();\n  var fetchHeaders = new Headers();\n  var fetchRequest = new Request(options.url); // add ability to abort\n\n  instance.controller = new AbortController(); // check if headers have to be added\n\n  if (options && options.requestHeaders) {\n    // add custom request headers\n    options.requestHeaders.forEach(function (header) {\n      fetchHeaders.append(header.key, header.value);\n    });\n  } // parse fetch options\n\n\n  var responseType = options.responseType || 'json';\n  var fetchOptions = {\n    method: options.method || 'GET',\n    headers: fetchHeaders,\n    mode: options.mode || 'cors',\n    credentials: options.credentials || 'same-origin',\n    cache: options.cache || 'default',\n    redirect: options.redirect || 'follow',\n    referrer: options.referrer || 'client',\n    signal: instance.controller.signal\n  };\n  fetch(fetchRequest, fetchOptions).then(function (response) {\n    // store response reference\n    instance.response = response;\n    var progressAvailable = true;\n\n    if (!response.body) {\n      // ReadableStream is not yet supported in this browser\n      // see https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream\n      progressAvailable = false;\n    } // Server must send CORS header \"Access-Control-Expose-Headers: content-length\"\n\n\n    var contentLength = response.headers.get('content-length');\n\n    if (contentLength === null) {\n      // Content-Length server response header missing.\n      // Don't evaluate download progress if we can't compare against a total size\n      // see https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS#Access-Control-Expose-Headers\n      progressAvailable = false;\n    }\n\n    if (!progressAvailable) {\n      // not able to check download progress so skip it\n      return response;\n    } // fire progress event when during load\n\n\n    instance.onProgress = function (e) {\n      instance.fireEvent('progress', e);\n    };\n\n    return new Response(new ReadableStream(new ProgressHandler(instance, contentLength, response)), fetchOptions);\n  }).then(function (response) {\n    var errMsg;\n\n    if (response.ok) {\n      switch (responseType) {\n        case 'arraybuffer':\n          return response.arrayBuffer();\n\n        case 'json':\n          return response.json();\n\n        case 'blob':\n          return response.blob();\n\n        case 'text':\n          return response.text();\n\n        default:\n          errMsg = 'Unknown responseType: ' + responseType;\n          break;\n      }\n    }\n\n    if (!errMsg) {\n      errMsg = 'HTTP error status: ' + response.status;\n    }\n\n    throw new Error(errMsg);\n  }).then(function (response) {\n    instance.fireEvent('success', response);\n  }).catch(function (error) {\n    instance.fireEvent('error', error);\n  }); // return the fetch request\n\n  instance.fetchRequest = fetchRequest;\n  return instance;\n}\n\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/util/frame.js\":\n/*!***************************!*\\\n  !*** ./src/util/frame.js ***!\n  \\***************************/\n/***/ ((module, exports, __webpack_require__) => {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.default = frame;\n\nvar _requestAnimationFrame = _interopRequireDefault(__webpack_require__(/*! ./request-animation-frame */ \"./src/util/request-animation-frame.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Create a function which will be called at the next requestAnimationFrame\n * cycle\n *\n * @param {function} func The function to call\n *\n * @return {func} The function wrapped within a requestAnimationFrame\n */\nfunction frame(func) {\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return (0, _requestAnimationFrame.default)(function () {\n      return func.apply(void 0, args);\n    });\n  };\n}\n\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/util/get-id.js\":\n/*!****************************!*\\\n  !*** ./src/util/get-id.js ***!\n  \\****************************/\n/***/ ((module, exports) => {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.default = getId;\n\n/**\n * Get a random prefixed ID\n *\n * @param {String} prefix Prefix to use. Default is `'wavesurfer_'`.\n * @returns {String} Random prefixed ID\n * @example\n * console.log(getId()); // logs 'wavesurfer_b5pors4ru6g'\n *\n * let prefix = 'foo-';\n * console.log(getId(prefix)); // logs 'foo-b5pors4ru6g'\n */\nfunction getId(prefix) {\n  if (prefix === undefined) {\n    prefix = 'wavesurfer_';\n  }\n\n  return prefix + Math.random().toString(32).substring(2);\n}\n\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/util/index.js\":\n/*!***************************!*\\\n  !*** ./src/util/index.js ***!\n  \\***************************/\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nObject.defineProperty(exports, \"getId\", ({\n  enumerable: true,\n  get: function get() {\n    return _getId.default;\n  }\n}));\nObject.defineProperty(exports, \"max\", ({\n  enumerable: true,\n  get: function get() {\n    return _max.default;\n  }\n}));\nObject.defineProperty(exports, \"min\", ({\n  enumerable: true,\n  get: function get() {\n    return _min.default;\n  }\n}));\nObject.defineProperty(exports, \"absMax\", ({\n  enumerable: true,\n  get: function get() {\n    return _absMax.default;\n  }\n}));\nObject.defineProperty(exports, \"Observer\", ({\n  enumerable: true,\n  get: function get() {\n    return _observer.default;\n  }\n}));\nObject.defineProperty(exports, \"style\", ({\n  enumerable: true,\n  get: function get() {\n    return _style.default;\n  }\n}));\nObject.defineProperty(exports, \"requestAnimationFrame\", ({\n  enumerable: true,\n  get: function get() {\n    return _requestAnimationFrame.default;\n  }\n}));\nObject.defineProperty(exports, \"frame\", ({\n  enumerable: true,\n  get: function get() {\n    return _frame.default;\n  }\n}));\nObject.defineProperty(exports, \"debounce\", ({\n  enumerable: true,\n  get: function get() {\n    return _debounce.default;\n  }\n}));\nObject.defineProperty(exports, \"preventClick\", ({\n  enumerable: true,\n  get: function get() {\n    return _preventClick.default;\n  }\n}));\nObject.defineProperty(exports, \"fetchFile\", ({\n  enumerable: true,\n  get: function get() {\n    return _fetch.default;\n  }\n}));\nObject.defineProperty(exports, \"clamp\", ({\n  enumerable: true,\n  get: function get() {\n    return _clamp.default;\n  }\n}));\nObject.defineProperty(exports, \"withOrientation\", ({\n  enumerable: true,\n  get: function get() {\n    return _orientation.default;\n  }\n}));\nObject.defineProperty(exports, \"ignoreSilenceMode\", ({\n  enumerable: true,\n  get: function get() {\n    return _silenceMode.default;\n  }\n}));\n\nvar _getId = _interopRequireDefault(__webpack_require__(/*! ./get-id */ \"./src/util/get-id.js\"));\n\nvar _max = _interopRequireDefault(__webpack_require__(/*! ./max */ \"./src/util/max.js\"));\n\nvar _min = _interopRequireDefault(__webpack_require__(/*! ./min */ \"./src/util/min.js\"));\n\nvar _absMax = _interopRequireDefault(__webpack_require__(/*! ./absMax */ \"./src/util/absMax.js\"));\n\nvar _observer = _interopRequireDefault(__webpack_require__(/*! ./observer */ \"./src/util/observer.js\"));\n\nvar _style = _interopRequireDefault(__webpack_require__(/*! ./style */ \"./src/util/style.js\"));\n\nvar _requestAnimationFrame = _interopRequireDefault(__webpack_require__(/*! ./request-animation-frame */ \"./src/util/request-animation-frame.js\"));\n\nvar _frame = _interopRequireDefault(__webpack_require__(/*! ./frame */ \"./src/util/frame.js\"));\n\nvar _debounce = _interopRequireDefault(__webpack_require__(/*! debounce */ \"./node_modules/debounce/index.js\"));\n\nvar _preventClick = _interopRequireDefault(__webpack_require__(/*! ./prevent-click */ \"./src/util/prevent-click.js\"));\n\nvar _fetch = _interopRequireDefault(__webpack_require__(/*! ./fetch */ \"./src/util/fetch.js\"));\n\nvar _clamp = _interopRequireDefault(__webpack_require__(/*! ./clamp */ \"./src/util/clamp.js\"));\n\nvar _orientation = _interopRequireDefault(__webpack_require__(/*! ./orientation */ \"./src/util/orientation.js\"));\n\nvar _silenceMode = _interopRequireDefault(__webpack_require__(/*! ./silence-mode */ \"./src/util/silence-mode.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n\n/***/ \"./src/util/max.js\":\n/*!*************************!*\\\n  !*** ./src/util/max.js ***!\n  \\*************************/\n/***/ ((module, exports) => {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.default = max;\n\n/**\n * Get the largest value\n *\n * @param   {Array} values Array of numbers\n * @returns {Number} Largest number found\n * @example console.log(max([1, 2, 3])); // logs 3\n */\nfunction max(values) {\n  var largest = -Infinity;\n  Object.keys(values).forEach(function (i) {\n    if (values[i] > largest) {\n      largest = values[i];\n    }\n  });\n  return largest;\n}\n\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/util/min.js\":\n/*!*************************!*\\\n  !*** ./src/util/min.js ***!\n  \\*************************/\n/***/ ((module, exports) => {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.default = min;\n\n/**\n * Get the smallest value\n *\n * @param   {Array} values Array of numbers\n * @returns {Number} Smallest number found\n * @example console.log(min([1, 2, 3])); // logs 1\n */\nfunction min(values) {\n  var smallest = Number(Infinity);\n  Object.keys(values).forEach(function (i) {\n    if (values[i] < smallest) {\n      smallest = values[i];\n    }\n  });\n  return smallest;\n}\n\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/util/observer.js\":\n/*!******************************!*\\\n  !*** ./src/util/observer.js ***!\n  \\******************************/\n/***/ ((module, exports) => {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.default = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * @typedef {Object} ListenerDescriptor\n * @property {string} name The name of the event\n * @property {function} callback The callback\n * @property {function} un The function to call to remove the listener\n */\n\n/**\n * Observer class\n */\nvar Observer = /*#__PURE__*/function () {\n  /**\n   * Instantiate Observer\n   */\n  function Observer() {\n    _classCallCheck(this, Observer);\n\n    /**\n     * @private\n     * @todo Initialise the handlers here already and remove the conditional\n     * assignment in `on()`\n     */\n    this._disabledEventEmissions = [];\n    this.handlers = null;\n  }\n  /**\n   * Attach a handler function for an event.\n   *\n   * @param {string} event Name of the event to listen to\n   * @param {function} fn The callback to trigger when the event is fired\n   * @return {ListenerDescriptor} The event descriptor\n   */\n\n\n  _createClass(Observer, [{\n    key: \"on\",\n    value: function on(event, fn) {\n      var _this = this;\n\n      if (!this.handlers) {\n        this.handlers = {};\n      }\n\n      var handlers = this.handlers[event];\n\n      if (!handlers) {\n        handlers = this.handlers[event] = [];\n      }\n\n      handlers.push(fn); // Return an event descriptor\n\n      return {\n        name: event,\n        callback: fn,\n        un: function un(e, fn) {\n          return _this.un(e, fn);\n        }\n      };\n    }\n    /**\n     * Remove an event handler.\n     *\n     * @param {string} event Name of the event the listener that should be\n     * removed listens to\n     * @param {function} fn The callback that should be removed\n     */\n\n  }, {\n    key: \"un\",\n    value: function un(event, fn) {\n      if (!this.handlers) {\n        return;\n      }\n\n      var handlers = this.handlers[event];\n      var i;\n\n      if (handlers) {\n        if (fn) {\n          for (i = handlers.length - 1; i >= 0; i--) {\n            if (handlers[i] == fn) {\n              handlers.splice(i, 1);\n            }\n          }\n        } else {\n          handlers.length = 0;\n        }\n      }\n    }\n    /**\n     * Remove all event handlers.\n     */\n\n  }, {\n    key: \"unAll\",\n    value: function unAll() {\n      this.handlers = null;\n    }\n    /**\n     * Attach a handler to an event. The handler is executed at most once per\n     * event type.\n     *\n     * @param {string} event The event to listen to\n     * @param {function} handler The callback that is only to be called once\n     * @return {ListenerDescriptor} The event descriptor\n     */\n\n  }, {\n    key: \"once\",\n    value: function once(event, handler) {\n      var _this2 = this;\n\n      var fn = function fn() {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        /*  eslint-disable no-invalid-this */\n        handler.apply(_this2, args);\n        /*  eslint-enable no-invalid-this */\n\n        setTimeout(function () {\n          _this2.un(event, fn);\n        }, 0);\n      };\n\n      return this.on(event, fn);\n    }\n    /**\n     * Disable firing a list of events by name. When specified, event handlers for any event type\n     * passed in here will not be called.\n     *\n     * @since 4.0.0\n     * @param {string[]} eventNames an array of event names to disable emissions for\n     * @example\n     * // disable seek and interaction events\n     * wavesurfer.setDisabledEventEmissions(['seek', 'interaction']);\n     */\n\n  }, {\n    key: \"setDisabledEventEmissions\",\n    value: function setDisabledEventEmissions(eventNames) {\n      this._disabledEventEmissions = eventNames;\n    }\n    /**\n     * plugins borrow part of this class without calling the constructor,\n     * so we have to be careful about _disabledEventEmissions\n     */\n\n  }, {\n    key: \"_isDisabledEventEmission\",\n    value: function _isDisabledEventEmission(event) {\n      return this._disabledEventEmissions && this._disabledEventEmissions.includes(event);\n    }\n    /**\n     * Manually fire an event\n     *\n     * @param {string} event The event to fire manually\n     * @param {...any} args The arguments with which to call the listeners\n     */\n\n  }, {\n    key: \"fireEvent\",\n    value: function fireEvent(event) {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      if (!this.handlers || this._isDisabledEventEmission(event)) {\n        return;\n      }\n\n      var handlers = this.handlers[event];\n      handlers && handlers.forEach(function (fn) {\n        fn.apply(void 0, args);\n      });\n    }\n  }]);\n\n  return Observer;\n}();\n\nexports.default = Observer;\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/util/orientation.js\":\n/*!*********************************!*\\\n  !*** ./src/util/orientation.js ***!\n  \\*********************************/\n/***/ ((module, exports) => {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.default = withOrientation;\nvar verticalPropMap = {\n  width: 'height',\n  height: 'width',\n  overflowX: 'overflowY',\n  overflowY: 'overflowX',\n  clientWidth: 'clientHeight',\n  clientHeight: 'clientWidth',\n  clientX: 'clientY',\n  clientY: 'clientX',\n  scrollWidth: 'scrollHeight',\n  scrollLeft: 'scrollTop',\n  offsetLeft: 'offsetTop',\n  offsetTop: 'offsetLeft',\n  offsetHeight: 'offsetWidth',\n  offsetWidth: 'offsetHeight',\n  left: 'top',\n  right: 'bottom',\n  top: 'left',\n  bottom: 'right',\n  borderRightStyle: 'borderBottomStyle',\n  borderRightWidth: 'borderBottomWidth',\n  borderRightColor: 'borderBottomColor'\n};\n/**\n * Convert a horizontally-oriented property name to a vertical one.\n *\n * @param {string} prop A property name\n * @param {bool} vertical Whether the element is oriented vertically\n * @returns {string} prop, converted appropriately\n */\n\nfunction mapProp(prop, vertical) {\n  if (Object.prototype.hasOwnProperty.call(verticalPropMap, prop)) {\n    return vertical ? verticalPropMap[prop] : prop;\n  } else {\n    return prop;\n  }\n}\n\nvar isProxy = Symbol(\"isProxy\");\n/**\n * Returns an appropriately oriented object based on vertical.\n * If vertical is true, attribute getting and setting will be mapped through\n * verticalPropMap, so that e.g. getting the object's .width will give its\n * .height instead.\n * Certain methods of an oriented object will return oriented objects as well.\n * Oriented objects can't be added to the DOM directly since they are Proxy objects\n * and thus fail typechecks. Use domElement to get the actual element for this.\n *\n * @param {object} target The object to be wrapped and oriented\n * @param {bool} vertical Whether the element is oriented vertically\n * @returns {Proxy} An oriented object with attr translation via verticalAttrMap\n * @since 5.0.0\n */\n\nfunction withOrientation(target, vertical) {\n  if (target[isProxy]) {\n    return target;\n  } else {\n    return new Proxy(target, {\n      get: function get(obj, prop, receiver) {\n        if (prop === isProxy) {\n          return true;\n        } else if (prop === 'domElement') {\n          return obj;\n        } else if (prop === 'style') {\n          return withOrientation(obj.style, vertical);\n        } else if (prop === 'canvas') {\n          return withOrientation(obj.canvas, vertical);\n        } else if (prop === 'getBoundingClientRect') {\n          return function () {\n            return withOrientation(obj.getBoundingClientRect.apply(obj, arguments), vertical);\n          };\n        } else if (prop === 'getContext') {\n          return function () {\n            return withOrientation(obj.getContext.apply(obj, arguments), vertical);\n          };\n        } else {\n          var value = obj[mapProp(prop, vertical)];\n          return typeof value == 'function' ? value.bind(obj) : value;\n        }\n      },\n      set: function set(obj, prop, value) {\n        obj[mapProp(prop, vertical)] = value;\n        return true;\n      }\n    });\n  }\n}\n\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/util/prevent-click.js\":\n/*!***********************************!*\\\n  !*** ./src/util/prevent-click.js ***!\n  \\***********************************/\n/***/ ((module, exports) => {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.default = preventClick;\n\n/**\n * Stops propagation of click event and removes event listener\n *\n * @private\n * @param {object} event The click event\n */\nfunction preventClickHandler(event) {\n  event.stopPropagation();\n  document.body.removeEventListener('click', preventClickHandler, true);\n}\n/**\n * Starts listening for click event and prevent propagation\n *\n * @param {object} values Values\n */\n\n\nfunction preventClick(values) {\n  document.body.addEventListener('click', preventClickHandler, true);\n}\n\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/util/request-animation-frame.js\":\n/*!*********************************************!*\\\n  !*** ./src/util/request-animation-frame.js ***!\n  \\*********************************************/\n/***/ ((module, exports) => {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.default = void 0;\n\n/* eslint-disable valid-jsdoc */\n\n/**\n * Returns the `requestAnimationFrame` function for the browser, or a shim with\n * `setTimeout` if the function is not found\n *\n * @return {function} Available `requestAnimationFrame` function for the browser\n */\nvar _default = (window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (callback, element) {\n  return setTimeout(callback, 1000 / 60);\n}).bind(window);\n\nexports.default = _default;\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/util/silence-mode.js\":\n/*!**********************************!*\\\n  !*** ./src/util/silence-mode.js ***!\n  \\**********************************/\n/***/ ((module, exports) => {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.default = ignoreSilenceMode;\n\n/**\n * Ignores device silence mode when using the `WebAudio` backend.\n *\n * Many mobile devices contain a hardware button to mute the ringtone for incoming\n * calls and messages. Unfortunately, on some platforms like iOS, this also mutes\n * wavesurfer's audio when using the `WebAudio` backend. This function creates a\n * temporary `<audio>` element that makes sure the WebAudio backend keeps playing\n * when muting the device ringer.\n *\n * @since 5.2.0\n */\nfunction ignoreSilenceMode() {\n  // Set the src to a short bit of url encoded as a silent mp3\n  // NOTE The silence MP3 must be high quality, when web audio sounds are played\n  // in parallel the web audio sound is mixed to match the bitrate of the html sound\n  // 0.01 seconds of silence VBR220-260 Joint Stereo 859B\n  var audioData = \"data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADgnABGiAAQBCqgCRMAAgEAH///////////////7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq//////////////////9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==\"; // disable iOS Airplay (setting the attribute in js doesn't work)\n\n  var tmp = document.createElement(\"div\");\n  tmp.innerHTML = '<audio x-webkit-airplay=\"deny\"></audio>';\n  var audioSilentMode = tmp.children.item(0);\n  audioSilentMode.src = audioData;\n  audioSilentMode.preload = \"auto\";\n  audioSilentMode.type = \"audio/mpeg\";\n  audioSilentMode.disableRemotePlayback = true; // play\n\n  audioSilentMode.play(); // cleanup\n\n  audioSilentMode.remove();\n  tmp.remove();\n}\n\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/util/style.js\":\n/*!***************************!*\\\n  !*** ./src/util/style.js ***!\n  \\***************************/\n/***/ ((module, exports) => {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.default = style;\n\n/**\n * Apply a map of styles to an element\n *\n * @param {HTMLElement} el The element that the styles will be applied to\n * @param {Object} styles The map of propName: attribute, both are used as-is\n *\n * @return {HTMLElement} el\n */\nfunction style(el, styles) {\n  Object.keys(styles).forEach(function (prop) {\n    if (el.style[prop] !== styles[prop]) {\n      el.style[prop] = styles[prop];\n    }\n  });\n  return el;\n}\n\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/wavesurfer.js\":\n/*!***************************!*\\\n  !*** ./src/wavesurfer.js ***!\n  \\***************************/\n/***/ ((module, exports, __webpack_require__) => {\n\n\"use strict\";\n\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.default = void 0;\n\nvar util = _interopRequireWildcard(__webpack_require__(/*! ./util */ \"./src/util/index.js\"));\n\nvar _drawer = _interopRequireDefault(__webpack_require__(/*! ./drawer.multicanvas */ \"./src/drawer.multicanvas.js\"));\n\nvar _webaudio = _interopRequireDefault(__webpack_require__(/*! ./webaudio */ \"./src/webaudio.js\"));\n\nvar _mediaelement = _interopRequireDefault(__webpack_require__(/*! ./mediaelement */ \"./src/mediaelement.js\"));\n\nvar _peakcache = _interopRequireDefault(__webpack_require__(/*! ./peakcache */ \"./src/peakcache.js\"));\n\nvar _mediaelementWebaudio = _interopRequireDefault(__webpack_require__(/*! ./mediaelement-webaudio */ \"./src/mediaelement-webaudio.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/*\n * This work is licensed under a BSD-3-Clause License.\n */\n\n/** @external {HTMLElement} https://developer.mozilla.org/en/docs/Web/API/HTMLElement */\n\n/** @external {OfflineAudioContext} https://developer.mozilla.org/en-US/docs/Web/API/OfflineAudioContext */\n\n/** @external {File} https://developer.mozilla.org/en-US/docs/Web/API/File */\n\n/** @external {Blob} https://developer.mozilla.org/en-US/docs/Web/API/Blob */\n\n/** @external {CanvasRenderingContext2D} https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D */\n\n/** @external {MediaStreamConstraints} https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamConstraints */\n\n/** @external {AudioNode} https://developer.mozilla.org/de/docs/Web/API/AudioNode */\n\n/**\n * @typedef {Object} WavesurferParams\n * @property {AudioContext} audioContext=null Use your own previously\n * initialized AudioContext or leave blank.\n * @property {number} audioRate=1 Speed at which to play audio. Lower number is\n * slower.\n * @property {ScriptProcessorNode} audioScriptProcessor=null Use your own previously\n * initialized ScriptProcessorNode or leave blank.\n * @property {boolean} autoCenter=true If a scrollbar is present, center the\n * waveform on current progress\n * @property {number} autoCenterRate=5 If autoCenter is active, rate at which the\n * waveform is centered\n * @property {boolean} autoCenterImmediately=false If autoCenter is active, immediately\n * center waveform on current progress\n * @property {string} backend='WebAudio' `'WebAudio'|'MediaElement'|'MediaElementWebAudio'` In most cases\n * you don't have to set this manually. MediaElement is a fallback for unsupported browsers.\n * MediaElementWebAudio allows to use WebAudio API also with big audio files, loading audio like with\n * MediaElement backend (HTML5 audio tag). You have to use the same methods of MediaElement backend for loading and\n * playback, giving also peaks, so the audio data are not decoded. In this way you can use WebAudio features, like filters,\n * also with audio with big duration. For example:\n * ` wavesurfer.load(url | HTMLMediaElement, peaks, preload, duration);\n *   wavesurfer.play();\n *   wavesurfer.setFilter(customFilter);\n * `\n * @property {string} backgroundColor=null Change background color of the\n * waveform container.\n * @property {number} barHeight=1 The height of the wave bars.\n * @property {number} barRadius=0 The radius of the wave bars. Makes bars rounded\n * @property {number} barGap=null The optional spacing between bars of the wave,\n * if not provided will be calculated in legacy format.\n * @property {number} barWidth=null Draw the waveform using bars.\n * @property {number} barMinHeight=null If specified, draw at least a bar of this height,\n * eliminating waveform gaps\n * @property {boolean} closeAudioContext=false Close and nullify all audio\n * contexts when the destroy method is called.\n * @property {!string|HTMLElement} container CSS selector or HTML element where\n * the waveform should be drawn. This is the only required parameter.\n * @property {string} cursorColor='#333' The fill color of the cursor indicating\n * the playhead position.\n * @property {number} cursorWidth=1 Measured in pixels.\n * @property {object} drawingContextAttributes={desynchronized: false} Drawing context\n * attributes.\n * @property {number} duration=null Optional audio length so pre-rendered peaks\n * can be display immediately for example.\n * @property {boolean} fillParent=true Whether to fill the entire container or\n * draw only according to `minPxPerSec`.\n * @property {boolean} forceDecode=false Force decoding of audio using web audio\n * when zooming to get a more detailed waveform.\n * @property {number} height=128 The height of the waveform. Measured in\n * pixels.\n * @property {boolean} hideScrollbar=false Whether to hide the horizontal\n * scrollbar when one would normally be shown.\n * @property {boolean} ignoreSilenceMode=false If true, ignores device silence mode\n * when using the `WebAudio` backend.\n * @property {boolean} interact=true Whether the mouse interaction will be\n * enabled at initialization. You can switch this parameter at any time later\n * on.\n * @property {boolean} loopSelection=true (Use with regions plugin) Enable\n * looping of selected regions\n * @property {number} maxCanvasWidth=4000 Maximum width of a single canvas in\n * pixels, excluding a small overlap (2 * `pixelRatio`, rounded up to the next\n * even integer). If the waveform is longer than this value, additional canvases\n * will be used to render the waveform, which is useful for very large waveforms\n * that may be too wide for browsers to draw on a single canvas.\n * @property {boolean} mediaControls=false (Use with backend `MediaElement` or `MediaElementWebAudio`)\n * this enables the native controls for the media element\n * @property {string} mediaType='audio' (Use with backend `MediaElement` or `MediaElementWebAudio`)\n * `'audio'|'video'` ('video' only for `MediaElement`)\n * @property {number} minPxPerSec=20 Minimum number of pixels per second of\n * audio.\n * @property {boolean} normalize=false If true, normalize by the maximum peak\n * instead of 1.0.\n * @property {boolean} partialRender=false Use the PeakCache to improve\n * rendering speed of large waveforms\n * @property {number} pixelRatio=window.devicePixelRatio The pixel ratio used to\n * calculate display\n * @property {PluginDefinition[]} plugins=[] An array of plugin definitions to\n * register during instantiation, they will be directly initialised unless they\n * are added with the `deferInit` property set to true.\n * @property {string} progressColor='#555' The fill color of the part of the\n * waveform behind the cursor. When `progressColor` and `waveColor` are the same\n * the progress wave is not rendered at all.\n * @property {boolean} removeMediaElementOnDestroy=true Set to false to keep the\n * media element in the DOM when the player is destroyed. This is useful when\n * reusing an existing media element via the `loadMediaElement` method.\n * @property {Object} renderer=MultiCanvas Can be used to inject a custom\n * renderer.\n * @property {boolean|number} responsive=false If set to `true` resize the\n * waveform, when the window is resized. This is debounced with a `100ms`\n * timeout by default. If this parameter is a number it represents that timeout.\n * @property {boolean} rtl=false If set to `true`, renders waveform from\n * right-to-left.\n * @property {boolean} scrollParent=false Whether to scroll the container with a\n * lengthy waveform. Otherwise the waveform is shrunk to the container width\n * (see fillParent).\n * @property {number} skipLength=2 Number of seconds to skip with the\n * skipForward() and skipBackward() methods.\n * @property {boolean} splitChannels=false Render with separate waveforms for\n * the channels of the audio\n * @property {SplitChannelOptions} splitChannelsOptions={} Options for splitChannel rendering\n * @property {boolean} vertical=false Render the waveform vertically instead of horizontally.\n * @property {string} waveColor='#999' The fill color of the waveform after the\n * cursor.\n * @property {object} xhr={} XHR options. For example:\n * `let xhr = {\n *     cache: 'default',\n *     mode: 'cors',\n *     method: 'GET',\n *     credentials: 'same-origin',\n *     redirect: 'follow',\n *     referrer: 'client',\n *     requestHeaders: [\n *         {\n *             key: 'Authorization',\n *             value: 'my-token'\n *         }\n *     ]\n * };`\n */\n\n/**\n * @typedef {Object} PluginDefinition\n * @desc The Object used to describe a plugin\n * @example wavesurfer.addPlugin(pluginDefinition);\n * @property {string} name The name of the plugin, the plugin instance will be\n * added as a property to the wavesurfer instance under this name\n * @property {?Object} staticProps The properties that should be added to the\n * wavesurfer instance as static properties\n * @property {?boolean} deferInit Don't initialise plugin\n * automatically\n * @property {Object} params={} The plugin parameters, they are the first parameter\n * passed to the plugin class constructor function\n * @property {PluginClass} instance The plugin instance factory, is called with\n * the dependency specified in extends. Returns the plugin class.\n */\n\n/**\n * @typedef {Object} SplitChannelOptions\n * @desc parameters applied when splitChannels option is true\n * @property {boolean} overlay=false determines whether channels are rendered on top of each other or on separate tracks\n * @property {object} channelColors={} object describing color for each channel. Example:\n * {\n *     0: {\n *         progressColor: 'green',\n *         waveColor: 'pink'\n *     },\n *     1: {\n *         progressColor: 'orange',\n *         waveColor: 'purple'\n *     }\n * }\n * @property {number[]} filterChannels=[] indexes of channels to be hidden from rendering\n * @property {boolean} relativeNormalization=false determines whether\n * normalization is done per channel or maintains proportionality between\n * channels. Only applied when normalize and splitChannels are both true.\n * @since 4.3.0\n */\n\n/**\n * @interface PluginClass\n *\n * @desc This is the interface which is implemented by all plugin classes. Note\n * that this only turns into an observer after being passed through\n * `wavesurfer.addPlugin`.\n *\n * @extends {Observer}\n */\nvar PluginClass = /*#__PURE__*/function () {\n  /**\n   * Construct the plugin\n   *\n   * @param {Object} params={} The plugin params (specific to the plugin)\n   * @param {Object} ws The wavesurfer instance\n   */\n  function PluginClass(params, ws) {\n    _classCallCheck(this, PluginClass);\n  }\n  /**\n   * Initialise the plugin\n   *\n   * Start doing something. This is called by\n   * `wavesurfer.initPlugin(pluginName)`\n   */\n\n\n  _createClass(PluginClass, [{\n    key: \"create\",\n    value:\n    /**\n     * Plugin definition factory\n     *\n     * This function must be used to create a plugin definition which can be\n     * used by wavesurfer to correctly instantiate the plugin.\n     *\n     * It returns a `PluginDefinition` object representing the plugin.\n     *\n     * @param {Object} params={} The plugin params (specific to the plugin)\n     */\n    function create(params) {}\n  }, {\n    key: \"init\",\n    value: function init() {}\n    /**\n     * Destroy the plugin instance\n     *\n     * Stop doing something. This is called by\n     * `wavesurfer.destroyPlugin(pluginName)`\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {}\n  }]);\n\n  return PluginClass;\n}();\n/**\n * WaveSurfer core library class\n *\n * @extends {Observer}\n * @example\n * const params = {\n *   container: '#waveform',\n *   waveColor: 'violet',\n *   progressColor: 'purple'\n * };\n *\n * // initialise like this\n * const wavesurfer = WaveSurfer.create(params);\n *\n * // or like this ...\n * const wavesurfer = new WaveSurfer(params);\n * wavesurfer.init();\n *\n * // load audio file\n * wavesurfer.load('example/media/demo.wav');\n */\n\n\nvar WaveSurfer = /*#__PURE__*/function (_util$Observer) {\n  _inherits(WaveSurfer, _util$Observer);\n\n  var _super = _createSuper(WaveSurfer);\n\n  /**\n   * Initialise wavesurfer instance\n   *\n   * @param {WavesurferParams} params Instantiation options for wavesurfer\n   * @example\n   * const wavesurfer = new WaveSurfer(params);\n   * @returns {this} Wavesurfer instance\n   */\n  function WaveSurfer(params) {\n    var _this;\n\n    _classCallCheck(this, WaveSurfer);\n\n    _this = _super.call(this);\n    /**\n     * Extract relevant parameters (or defaults)\n     * @private\n     */\n\n    _this.defaultParams = {\n      audioContext: null,\n      audioScriptProcessor: null,\n      audioRate: 1,\n      autoCenter: true,\n      autoCenterRate: 5,\n      autoCenterImmediately: false,\n      backend: 'WebAudio',\n      backgroundColor: null,\n      barHeight: 1,\n      barRadius: 0,\n      barGap: null,\n      barMinHeight: null,\n      container: null,\n      cursorColor: '#333',\n      cursorWidth: 1,\n      dragSelection: true,\n      drawingContextAttributes: {\n        // Boolean that hints the user agent to reduce the latency\n        // by desynchronizing the canvas paint cycle from the event\n        // loop\n        desynchronized: false\n      },\n      duration: null,\n      fillParent: true,\n      forceDecode: false,\n      height: 128,\n      hideScrollbar: false,\n      ignoreSilenceMode: false,\n      interact: true,\n      loopSelection: true,\n      maxCanvasWidth: 4000,\n      mediaContainer: null,\n      mediaControls: false,\n      mediaType: 'audio',\n      minPxPerSec: 20,\n      normalize: false,\n      partialRender: false,\n      pixelRatio: window.devicePixelRatio || screen.deviceXDPI / screen.logicalXDPI,\n      plugins: [],\n      progressColor: '#555',\n      removeMediaElementOnDestroy: true,\n      renderer: _drawer.default,\n      responsive: false,\n      rtl: false,\n      scrollParent: false,\n      skipLength: 2,\n      splitChannels: false,\n      splitChannelsOptions: {\n        overlay: false,\n        channelColors: {},\n        filterChannels: [],\n        relativeNormalization: false\n      },\n      vertical: false,\n      waveColor: '#999',\n      xhr: {}\n    };\n    _this.backends = {\n      MediaElement: _mediaelement.default,\n      WebAudio: _webaudio.default,\n      MediaElementWebAudio: _mediaelementWebaudio.default\n    };\n    _this.util = util;\n    _this.params = Object.assign({}, _this.defaultParams, params);\n    _this.params.splitChannelsOptions = Object.assign({}, _this.defaultParams.splitChannelsOptions, params.splitChannelsOptions);\n    /** @private */\n\n    _this.container = 'string' == typeof params.container ? document.querySelector(_this.params.container) : _this.params.container;\n\n    if (!_this.container) {\n      throw new Error('Container element not found');\n    }\n\n    if (_this.params.mediaContainer == null) {\n      /** @private */\n      _this.mediaContainer = _this.container;\n    } else if (typeof _this.params.mediaContainer == 'string') {\n      /** @private */\n      _this.mediaContainer = document.querySelector(_this.params.mediaContainer);\n    } else {\n      /** @private */\n      _this.mediaContainer = _this.params.mediaContainer;\n    }\n\n    if (!_this.mediaContainer) {\n      throw new Error('Media Container element not found');\n    }\n\n    if (_this.params.maxCanvasWidth <= 1) {\n      throw new Error('maxCanvasWidth must be greater than 1');\n    } else if (_this.params.maxCanvasWidth % 2 == 1) {\n      throw new Error('maxCanvasWidth must be an even number');\n    }\n\n    if (_this.params.rtl === true) {\n      if (_this.params.vertical === true) {\n        util.style(_this.container, {\n          transform: 'rotateX(180deg)'\n        });\n      } else {\n        util.style(_this.container, {\n          transform: 'rotateY(180deg)'\n        });\n      }\n    }\n\n    if (_this.params.backgroundColor) {\n      _this.setBackgroundColor(_this.params.backgroundColor);\n    }\n    /**\n     * @private Used to save the current volume when muting so we can\n     * restore once unmuted\n     * @type {number}\n     */\n\n\n    _this.savedVolume = 0;\n    /**\n     * @private The current muted state\n     * @type {boolean}\n     */\n\n    _this.isMuted = false;\n    /**\n     * @private Will hold a list of event descriptors that need to be\n     * canceled on subsequent loads of audio\n     * @type {Object[]}\n     */\n\n    _this.tmpEvents = [];\n    /**\n     * @private Holds any running audio downloads\n     * @type {Observer}\n     */\n\n    _this.currentRequest = null;\n    /** @private */\n\n    _this.arraybuffer = null;\n    /** @private */\n\n    _this.drawer = null;\n    /** @private */\n\n    _this.backend = null;\n    /** @private */\n\n    _this.peakCache = null; // cache constructor objects\n\n    if (typeof _this.params.renderer !== 'function') {\n      throw new Error('Renderer parameter is invalid');\n    }\n    /**\n     * @private The uninitialised Drawer class\n     */\n\n\n    _this.Drawer = _this.params.renderer;\n    /**\n     * @private The uninitialised Backend class\n     */\n    // Back compat\n\n    if (_this.params.backend == 'AudioElement') {\n      _this.params.backend = 'MediaElement';\n    }\n\n    if ((_this.params.backend == 'WebAudio' || _this.params.backend === 'MediaElementWebAudio') && !_webaudio.default.prototype.supportsWebAudio.call(null)) {\n      _this.params.backend = 'MediaElement';\n    }\n\n    _this.Backend = _this.backends[_this.params.backend];\n    /**\n     * @private map of plugin names that are currently initialised\n     */\n\n    _this.initialisedPluginList = {};\n    /** @private */\n\n    _this.isDestroyed = false;\n    /**\n     * Get the current ready status.\n     *\n     * @example const isReady = wavesurfer.isReady;\n     * @return {boolean}\n     */\n\n    _this.isReady = false; // responsive debounced event listener. If this.params.responsive is not\n    // set, this is never called. Use 100ms or this.params.responsive as\n    // timeout for the debounce function.\n\n    var prevWidth = 0;\n    _this._onResize = util.debounce(function () {\n      if (prevWidth != _this.drawer.wrapper.clientWidth && !_this.params.scrollParent) {\n        prevWidth = _this.drawer.wrapper.clientWidth;\n\n        _this.drawer.fireEvent('redraw');\n      }\n    }, typeof _this.params.responsive === 'number' ? _this.params.responsive : 100);\n    return _possibleConstructorReturn(_this, _assertThisInitialized(_this));\n  }\n  /**\n   * Initialise the wave\n   *\n   * @example\n   * var wavesurfer = new WaveSurfer(params);\n   * wavesurfer.init();\n   * @return {this} The wavesurfer instance\n   */\n\n\n  _createClass(WaveSurfer, [{\n    key: \"init\",\n    value: function init() {\n      this.registerPlugins(this.params.plugins);\n      this.createDrawer();\n      this.createBackend();\n      this.createPeakCache();\n      return this;\n    }\n    /**\n     * Add and initialise array of plugins (if `plugin.deferInit` is falsey),\n     * this function is called in the init function of wavesurfer\n     *\n     * @param {PluginDefinition[]} plugins An array of plugin definitions\n     * @emits {WaveSurfer#plugins-registered} Called with the array of plugin definitions\n     * @return {this} The wavesurfer instance\n     */\n\n  }, {\n    key: \"registerPlugins\",\n    value: function registerPlugins(plugins) {\n      var _this2 = this;\n\n      // first instantiate all the plugins\n      plugins.forEach(function (plugin) {\n        return _this2.addPlugin(plugin);\n      }); // now run the init functions\n\n      plugins.forEach(function (plugin) {\n        // call init function of the plugin if deferInit is falsey\n        // in that case you would manually use initPlugins()\n        if (!plugin.deferInit) {\n          _this2.initPlugin(plugin.name);\n        }\n      });\n      this.fireEvent('plugins-registered', plugins);\n      return this;\n    }\n    /**\n     * Get a map of plugin names that are currently initialised\n     *\n     * @example wavesurfer.getPlugins();\n     * @return {Object} Object with plugin names\n     */\n\n  }, {\n    key: \"getActivePlugins\",\n    value: function getActivePlugins() {\n      return this.initialisedPluginList;\n    }\n    /**\n     * Add a plugin object to wavesurfer\n     *\n     * @param {PluginDefinition} plugin A plugin definition\n     * @emits {WaveSurfer#plugin-added} Called with the name of the plugin that was added\n     * @example wavesurfer.addPlugin(WaveSurfer.minimap());\n     * @return {this} The wavesurfer instance\n     */\n\n  }, {\n    key: \"addPlugin\",\n    value: function addPlugin(plugin) {\n      var _this3 = this;\n\n      if (!plugin.name) {\n        throw new Error('Plugin does not have a name!');\n      }\n\n      if (!plugin.instance) {\n        throw new Error(\"Plugin \".concat(plugin.name, \" does not have an instance property!\"));\n      } // staticProps properties are applied to wavesurfer instance\n\n\n      if (plugin.staticProps) {\n        Object.keys(plugin.staticProps).forEach(function (pluginStaticProp) {\n          /**\n           * Properties defined in a plugin definition's `staticProps` property are added as\n           * staticProps properties of the WaveSurfer instance\n           */\n          _this3[pluginStaticProp] = plugin.staticProps[pluginStaticProp];\n        });\n      }\n\n      var Instance = plugin.instance; // turn the plugin instance into an observer\n\n      var observerPrototypeKeys = Object.getOwnPropertyNames(util.Observer.prototype);\n      observerPrototypeKeys.forEach(function (key) {\n        Instance.prototype[key] = util.Observer.prototype[key];\n      });\n      /**\n       * Instantiated plugin classes are added as a property of the wavesurfer\n       * instance\n       * @type {Object}\n       */\n\n      this[plugin.name] = new Instance(plugin.params || {}, this);\n      this.fireEvent('plugin-added', plugin.name);\n      return this;\n    }\n    /**\n     * Initialise a plugin\n     *\n     * @param {string} name A plugin name\n     * @emits WaveSurfer#plugin-initialised\n     * @example wavesurfer.initPlugin('minimap');\n     * @return {this} The wavesurfer instance\n     */\n\n  }, {\n    key: \"initPlugin\",\n    value: function initPlugin(name) {\n      if (!this[name]) {\n        throw new Error(\"Plugin \".concat(name, \" has not been added yet!\"));\n      }\n\n      if (this.initialisedPluginList[name]) {\n        // destroy any already initialised plugins\n        this.destroyPlugin(name);\n      }\n\n      this[name].init();\n      this.initialisedPluginList[name] = true;\n      this.fireEvent('plugin-initialised', name);\n      return this;\n    }\n    /**\n     * Destroy a plugin\n     *\n     * @param {string} name A plugin name\n     * @emits WaveSurfer#plugin-destroyed\n     * @example wavesurfer.destroyPlugin('minimap');\n     * @returns {this} The wavesurfer instance\n     */\n\n  }, {\n    key: \"destroyPlugin\",\n    value: function destroyPlugin(name) {\n      if (!this[name]) {\n        throw new Error(\"Plugin \".concat(name, \" has not been added yet and cannot be destroyed!\"));\n      }\n\n      if (!this.initialisedPluginList[name]) {\n        throw new Error(\"Plugin \".concat(name, \" is not active and cannot be destroyed!\"));\n      }\n\n      if (typeof this[name].destroy !== 'function') {\n        throw new Error(\"Plugin \".concat(name, \" does not have a destroy function!\"));\n      }\n\n      this[name].destroy();\n      delete this.initialisedPluginList[name];\n      this.fireEvent('plugin-destroyed', name);\n      return this;\n    }\n    /**\n     * Destroy all initialised plugins. Convenience function to use when\n     * wavesurfer is removed\n     *\n     * @private\n     */\n\n  }, {\n    key: \"destroyAllPlugins\",\n    value: function destroyAllPlugins() {\n      var _this4 = this;\n\n      Object.keys(this.initialisedPluginList).forEach(function (name) {\n        return _this4.destroyPlugin(name);\n      });\n    }\n    /**\n     * Create the drawer and draw the waveform\n     *\n     * @private\n     * @emits WaveSurfer#drawer-created\n     */\n\n  }, {\n    key: \"createDrawer\",\n    value: function createDrawer() {\n      var _this5 = this;\n\n      this.drawer = new this.Drawer(this.container, this.params);\n      this.drawer.init();\n      this.fireEvent('drawer-created', this.drawer);\n\n      if (this.params.responsive !== false) {\n        window.addEventListener('resize', this._onResize, true);\n        window.addEventListener('orientationchange', this._onResize, true);\n      }\n\n      this.drawer.on('redraw', function () {\n        _this5.drawBuffer();\n\n        _this5.drawer.progress(_this5.backend.getPlayedPercents());\n      }); // Click-to-seek\n\n      this.drawer.on('click', function (e, progress) {\n        setTimeout(function () {\n          return _this5.seekTo(progress);\n        }, 0);\n      }); // Relay the scroll event from the drawer\n\n      this.drawer.on('scroll', function (e) {\n        if (_this5.params.partialRender) {\n          _this5.drawBuffer();\n        }\n\n        _this5.fireEvent('scroll', e);\n      });\n    }\n    /**\n     * Create the backend\n     *\n     * @private\n     * @emits WaveSurfer#backend-created\n     */\n\n  }, {\n    key: \"createBackend\",\n    value: function createBackend() {\n      var _this6 = this;\n\n      if (this.backend) {\n        this.backend.destroy();\n      }\n\n      this.backend = new this.Backend(this.params);\n      this.backend.init();\n      this.fireEvent('backend-created', this.backend);\n      this.backend.on('finish', function () {\n        _this6.drawer.progress(_this6.backend.getPlayedPercents());\n\n        _this6.fireEvent('finish');\n      });\n      this.backend.on('play', function () {\n        return _this6.fireEvent('play');\n      });\n      this.backend.on('pause', function () {\n        return _this6.fireEvent('pause');\n      });\n      this.backend.on('audioprocess', function (time) {\n        _this6.drawer.progress(_this6.backend.getPlayedPercents());\n\n        _this6.fireEvent('audioprocess', time);\n      }); // only needed for MediaElement and MediaElementWebAudio backend\n\n      if (this.params.backend === 'MediaElement' || this.params.backend === 'MediaElementWebAudio') {\n        this.backend.on('seek', function () {\n          _this6.drawer.progress(_this6.backend.getPlayedPercents());\n        });\n        this.backend.on('volume', function () {\n          var newVolume = _this6.getVolume();\n\n          _this6.fireEvent('volume', newVolume);\n\n          if (_this6.backend.isMuted !== _this6.isMuted) {\n            _this6.isMuted = _this6.backend.isMuted;\n\n            _this6.fireEvent('mute', _this6.isMuted);\n          }\n        });\n      }\n    }\n    /**\n     * Create the peak cache\n     *\n     * @private\n     */\n\n  }, {\n    key: \"createPeakCache\",\n    value: function createPeakCache() {\n      if (this.params.partialRender) {\n        this.peakCache = new _peakcache.default();\n      }\n    }\n    /**\n     * Get the duration of the audio clip\n     *\n     * @example const duration = wavesurfer.getDuration();\n     * @return {number} Duration in seconds\n     */\n\n  }, {\n    key: \"getDuration\",\n    value: function getDuration() {\n      return this.backend.getDuration();\n    }\n    /**\n     * Get the current playback position\n     *\n     * @example const currentTime = wavesurfer.getCurrentTime();\n     * @return {number} Playback position in seconds\n     */\n\n  }, {\n    key: \"getCurrentTime\",\n    value: function getCurrentTime() {\n      return this.backend.getCurrentTime();\n    }\n    /**\n     * Set the current play time in seconds.\n     *\n     * @param {number} seconds A positive number in seconds. E.g. 10 means 10\n     * seconds, 60 means 1 minute\n     */\n\n  }, {\n    key: \"setCurrentTime\",\n    value: function setCurrentTime(seconds) {\n      if (seconds >= this.getDuration()) {\n        this.seekTo(1);\n      } else {\n        this.seekTo(seconds / this.getDuration());\n      }\n    }\n    /**\n     * Starts playback from the current position. Optional start and end\n     * measured in seconds can be used to set the range of audio to play.\n     *\n     * @param {?number} start Position to start at\n     * @param {?number} end Position to end at\n     * @emits WaveSurfer#interaction\n     * @return {Promise} Result of the backend play method\n     * @example\n     * // play from second 1 to 5\n     * wavesurfer.play(1, 5);\n     */\n\n  }, {\n    key: \"play\",\n    value: function play(start, end) {\n      var _this7 = this;\n\n      if (this.params.ignoreSilenceMode) {\n        // ignores device hardware silence mode\n        util.ignoreSilenceMode();\n      }\n\n      this.fireEvent('interaction', function () {\n        return _this7.play(start, end);\n      });\n      return this.backend.play(start, end);\n    }\n    /**\n     * Set a point in seconds for playback to stop at.\n     *\n     * @param {number} position Position (in seconds) to stop at\n     * @version 3.3.0\n     */\n\n  }, {\n    key: \"setPlayEnd\",\n    value: function setPlayEnd(position) {\n      this.backend.setPlayEnd(position);\n    }\n    /**\n     * Stops and pauses playback\n     *\n     * @example wavesurfer.pause();\n     * @return {Promise} Result of the backend pause method\n     */\n\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      if (!this.backend.isPaused()) {\n        return this.backend.pause();\n      }\n    }\n    /**\n     * Toggle playback\n     *\n     * @example wavesurfer.playPause();\n     * @return {Promise} Result of the backend play or pause method\n     */\n\n  }, {\n    key: \"playPause\",\n    value: function playPause() {\n      return this.backend.isPaused() ? this.play() : this.pause();\n    }\n    /**\n     * Get the current playback state\n     *\n     * @example const isPlaying = wavesurfer.isPlaying();\n     * @return {boolean} False if paused, true if playing\n     */\n\n  }, {\n    key: \"isPlaying\",\n    value: function isPlaying() {\n      return !this.backend.isPaused();\n    }\n    /**\n     * Skip backward\n     *\n     * @param {?number} seconds Amount to skip back, if not specified `skipLength`\n     * is used\n     * @example wavesurfer.skipBackward();\n     */\n\n  }, {\n    key: \"skipBackward\",\n    value: function skipBackward(seconds) {\n      this.skip(-seconds || -this.params.skipLength);\n    }\n    /**\n     * Skip forward\n     *\n     * @param {?number} seconds Amount to skip back, if not specified `skipLength`\n     * is used\n     * @example wavesurfer.skipForward();\n     */\n\n  }, {\n    key: \"skipForward\",\n    value: function skipForward(seconds) {\n      this.skip(seconds || this.params.skipLength);\n    }\n    /**\n     * Skip a number of seconds from the current position (use a negative value\n     * to go backwards).\n     *\n     * @param {number} offset Amount to skip back or forwards\n     * @example\n     * // go back 2 seconds\n     * wavesurfer.skip(-2);\n     */\n\n  }, {\n    key: \"skip\",\n    value: function skip(offset) {\n      var duration = this.getDuration() || 1;\n      var position = this.getCurrentTime() || 0;\n      position = Math.max(0, Math.min(duration, position + (offset || 0)));\n      this.seekAndCenter(position / duration);\n    }\n    /**\n     * Seeks to a position and centers the view\n     *\n     * @param {number} progress Between 0 (=beginning) and 1 (=end)\n     * @example\n     * // seek and go to the middle of the audio\n     * wavesurfer.seekTo(0.5);\n     */\n\n  }, {\n    key: \"seekAndCenter\",\n    value: function seekAndCenter(progress) {\n      this.seekTo(progress);\n      this.drawer.recenter(progress);\n    }\n    /**\n     * Seeks to a position\n     *\n     * @param {number} progress Between 0 (=beginning) and 1 (=end)\n     * @emits WaveSurfer#interaction\n     * @emits WaveSurfer#seek\n     * @example\n     * // seek to the middle of the audio\n     * wavesurfer.seekTo(0.5);\n     */\n\n  }, {\n    key: \"seekTo\",\n    value: function seekTo(progress) {\n      var _this8 = this;\n\n      // return an error if progress is not a number between 0 and 1\n      if (typeof progress !== 'number' || !isFinite(progress) || progress < 0 || progress > 1) {\n        throw new Error('Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!');\n      }\n\n      this.fireEvent('interaction', function () {\n        return _this8.seekTo(progress);\n      });\n      var isWebAudioBackend = this.params.backend === 'WebAudio';\n      var paused = this.backend.isPaused();\n\n      if (isWebAudioBackend && !paused) {\n        this.backend.pause();\n      } // avoid small scrolls while paused seeking\n\n\n      var oldScrollParent = this.params.scrollParent;\n      this.params.scrollParent = false;\n      this.backend.seekTo(progress * this.getDuration());\n      this.drawer.progress(progress);\n\n      if (isWebAudioBackend && !paused) {\n        this.backend.play();\n      }\n\n      this.params.scrollParent = oldScrollParent;\n      this.fireEvent('seek', progress);\n    }\n    /**\n     * Stops and goes to the beginning.\n     *\n     * @example wavesurfer.stop();\n     */\n\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      this.pause();\n      this.seekTo(0);\n      this.drawer.progress(0);\n    }\n    /**\n     * Sets the ID of the audio device to use for output and returns a Promise.\n     *\n     * @param {string} deviceId String value representing underlying output\n     * device\n     * @returns {Promise} `Promise` that resolves to `undefined` when there are\n     * no errors detected.\n     */\n\n  }, {\n    key: \"setSinkId\",\n    value: function setSinkId(deviceId) {\n      return this.backend.setSinkId(deviceId);\n    }\n    /**\n     * Set the playback volume.\n     *\n     * @param {number} newVolume A value between 0 and 1, 0 being no\n     * volume and 1 being full volume.\n     * @emits WaveSurfer#volume\n     */\n\n  }, {\n    key: \"setVolume\",\n    value: function setVolume(newVolume) {\n      this.backend.setVolume(newVolume);\n      this.fireEvent('volume', newVolume);\n    }\n    /**\n     * Get the playback volume.\n     *\n     * @return {number} A value between 0 and 1, 0 being no\n     * volume and 1 being full volume.\n     */\n\n  }, {\n    key: \"getVolume\",\n    value: function getVolume() {\n      return this.backend.getVolume();\n    }\n    /**\n     * Set the playback rate.\n     *\n     * @param {number} rate A positive number. E.g. 0.5 means half the normal\n     * speed, 2 means double speed and so on.\n     * @example wavesurfer.setPlaybackRate(2);\n     */\n\n  }, {\n    key: \"setPlaybackRate\",\n    value: function setPlaybackRate(rate) {\n      this.backend.setPlaybackRate(rate);\n    }\n    /**\n     * Get the playback rate.\n     *\n     * @return {number} The current playback rate.\n     */\n\n  }, {\n    key: \"getPlaybackRate\",\n    value: function getPlaybackRate() {\n      return this.backend.getPlaybackRate();\n    }\n    /**\n     * Toggle the volume on and off. If not currently muted it will save the\n     * current volume value and turn the volume off. If currently muted then it\n     * will restore the volume to the saved value, and then rest the saved\n     * value.\n     *\n     * @example wavesurfer.toggleMute();\n     */\n\n  }, {\n    key: \"toggleMute\",\n    value: function toggleMute() {\n      this.setMute(!this.isMuted);\n    }\n    /**\n     * Enable or disable muted audio\n     *\n     * @param {boolean} mute Specify `true` to mute audio.\n     * @emits WaveSurfer#volume\n     * @emits WaveSurfer#mute\n     * @example\n     * // unmute\n     * wavesurfer.setMute(false);\n     * console.log(wavesurfer.getMute()) // logs false\n     */\n\n  }, {\n    key: \"setMute\",\n    value: function setMute(mute) {\n      // ignore all muting requests if the audio is already in that state\n      if (mute === this.isMuted) {\n        this.fireEvent('mute', this.isMuted);\n        return;\n      }\n\n      if (this.backend.setMute) {\n        // Backends such as the MediaElement backend have their own handling\n        // of mute, let them handle it.\n        this.backend.setMute(mute);\n        this.isMuted = mute;\n      } else {\n        if (mute) {\n          // If currently not muted then save current volume,\n          // turn off the volume and update the mute properties\n          this.savedVolume = this.backend.getVolume();\n          this.backend.setVolume(0);\n          this.isMuted = true;\n          this.fireEvent('volume', 0);\n        } else {\n          // If currently muted then restore to the saved volume\n          // and update the mute properties\n          this.backend.setVolume(this.savedVolume);\n          this.isMuted = false;\n          this.fireEvent('volume', this.savedVolume);\n        }\n      }\n\n      this.fireEvent('mute', this.isMuted);\n    }\n    /**\n     * Get the current mute status.\n     *\n     * @example const isMuted = wavesurfer.getMute();\n     * @return {boolean} Current mute status\n     */\n\n  }, {\n    key: \"getMute\",\n    value: function getMute() {\n      return this.isMuted;\n    }\n    /**\n     * Get the list of current set filters as an array.\n     *\n     * Filters must be set with setFilters method first\n     *\n     * @return {array} List of enabled filters\n     */\n\n  }, {\n    key: \"getFilters\",\n    value: function getFilters() {\n      return this.backend.filters || [];\n    }\n    /**\n     * Toggles `scrollParent` and redraws\n     *\n     * @example wavesurfer.toggleScroll();\n     */\n\n  }, {\n    key: \"toggleScroll\",\n    value: function toggleScroll() {\n      this.params.scrollParent = !this.params.scrollParent;\n      this.drawBuffer();\n    }\n    /**\n     * Toggle mouse interaction\n     *\n     * @example wavesurfer.toggleInteraction();\n     */\n\n  }, {\n    key: \"toggleInteraction\",\n    value: function toggleInteraction() {\n      this.params.interact = !this.params.interact;\n    }\n    /**\n     * Get the fill color of the waveform after the cursor.\n     *\n     * @return {string} A CSS color string.\n     */\n\n  }, {\n    key: \"getWaveColor\",\n    value: function getWaveColor() {\n      return this.params.waveColor;\n    }\n    /**\n     * Set the fill color of the waveform after the cursor.\n     *\n     * @param {string} color A CSS color string.\n     * @example wavesurfer.setWaveColor('#ddd');\n     */\n\n  }, {\n    key: \"setWaveColor\",\n    value: function setWaveColor(color) {\n      this.params.waveColor = color;\n      this.drawBuffer();\n    }\n    /**\n     * Get the fill color of the waveform behind the cursor.\n     *\n     * @return {string} A CSS color string.\n     */\n\n  }, {\n    key: \"getProgressColor\",\n    value: function getProgressColor() {\n      return this.params.progressColor;\n    }\n    /**\n     * Set the fill color of the waveform behind the cursor.\n     *\n     * @param {string} color A CSS color string.\n     * @example wavesurfer.setProgressColor('#400');\n     */\n\n  }, {\n    key: \"setProgressColor\",\n    value: function setProgressColor(color) {\n      this.params.progressColor = color;\n      this.drawBuffer();\n    }\n    /**\n     * Get the background color of the waveform container.\n     *\n     * @return {string} A CSS color string.\n     */\n\n  }, {\n    key: \"getBackgroundColor\",\n    value: function getBackgroundColor() {\n      return this.params.backgroundColor;\n    }\n    /**\n     * Set the background color of the waveform container.\n     *\n     * @param {string} color A CSS color string.\n     * @example wavesurfer.setBackgroundColor('#FF00FF');\n     */\n\n  }, {\n    key: \"setBackgroundColor\",\n    value: function setBackgroundColor(color) {\n      this.params.backgroundColor = color;\n      util.style(this.container, {\n        background: this.params.backgroundColor\n      });\n    }\n    /**\n     * Get the fill color of the cursor indicating the playhead\n     * position.\n     *\n     * @return {string} A CSS color string.\n     */\n\n  }, {\n    key: \"getCursorColor\",\n    value: function getCursorColor() {\n      return this.params.cursorColor;\n    }\n    /**\n     * Set the fill color of the cursor indicating the playhead\n     * position.\n     *\n     * @param {string} color A CSS color string.\n     * @example wavesurfer.setCursorColor('#222');\n     */\n\n  }, {\n    key: \"setCursorColor\",\n    value: function setCursorColor(color) {\n      this.params.cursorColor = color;\n      this.drawer.updateCursor();\n    }\n    /**\n     * Get the height of the waveform.\n     *\n     * @return {number} Height measured in pixels.\n     */\n\n  }, {\n    key: \"getHeight\",\n    value: function getHeight() {\n      return this.params.height;\n    }\n    /**\n     * Set the height of the waveform.\n     *\n     * @param {number} height Height measured in pixels.\n     * @example wavesurfer.setHeight(200);\n     */\n\n  }, {\n    key: \"setHeight\",\n    value: function setHeight(height) {\n      this.params.height = height;\n      this.drawer.setHeight(height * this.params.pixelRatio);\n      this.drawBuffer();\n    }\n    /**\n     * Hide channels from being drawn on the waveform if splitting channels.\n     *\n     * For example, if we want to draw only the peaks for the right stereo channel:\n     *\n     * const wavesurfer = new WaveSurfer.create({...splitChannels: true});\n     * wavesurfer.load('stereo_audio.mp3');\n     *\n     * wavesurfer.setFilteredChannel([0]); <-- hide left channel peaks.\n     *\n     * @param {array} channelIndices Channels to be filtered out from drawing.\n     * @version 4.0.0\n     */\n\n  }, {\n    key: \"setFilteredChannels\",\n    value: function setFilteredChannels(channelIndices) {\n      this.params.splitChannelsOptions.filterChannels = channelIndices;\n      this.drawBuffer();\n    }\n    /**\n     * Get the correct peaks for current wave view-port and render wave\n     *\n     * @private\n     * @emits WaveSurfer#redraw\n     */\n\n  }, {\n    key: \"drawBuffer\",\n    value: function drawBuffer() {\n      var nominalWidth = Math.round(this.getDuration() * this.params.minPxPerSec * this.params.pixelRatio);\n      var parentWidth = this.drawer.getWidth();\n      var width = nominalWidth; // always start at 0 after zooming for scrolling : issue redraw left part\n\n      var start = 0;\n      var end = Math.max(start + parentWidth, width); // Fill container\n\n      if (this.params.fillParent && (!this.params.scrollParent || nominalWidth < parentWidth)) {\n        width = parentWidth;\n        start = 0;\n        end = width;\n      }\n\n      var peaks;\n\n      if (this.params.partialRender) {\n        var newRanges = this.peakCache.addRangeToPeakCache(width, start, end);\n        var i;\n\n        for (i = 0; i < newRanges.length; i++) {\n          peaks = this.backend.getPeaks(width, newRanges[i][0], newRanges[i][1]);\n          this.drawer.drawPeaks(peaks, width, newRanges[i][0], newRanges[i][1]);\n        }\n      } else {\n        peaks = this.backend.getPeaks(width, start, end);\n        this.drawer.drawPeaks(peaks, width, start, end);\n      }\n\n      this.fireEvent('redraw', peaks, width);\n    }\n    /**\n     * Horizontally zooms the waveform in and out. It also changes the parameter\n     * `minPxPerSec` and enables the `scrollParent` option. Calling the function\n     * with a falsey parameter will reset the zoom state.\n     *\n     * @param {?number} pxPerSec Number of horizontal pixels per second of\n     * audio, if none is set the waveform returns to unzoomed state\n     * @emits WaveSurfer#zoom\n     * @example wavesurfer.zoom(20);\n     */\n\n  }, {\n    key: \"zoom\",\n    value: function zoom(pxPerSec) {\n      if (!pxPerSec) {\n        this.params.minPxPerSec = this.defaultParams.minPxPerSec;\n        this.params.scrollParent = false;\n      } else {\n        this.params.minPxPerSec = pxPerSec;\n        this.params.scrollParent = true;\n      }\n\n      this.drawBuffer();\n      this.drawer.progress(this.backend.getPlayedPercents());\n      this.drawer.recenter(this.getCurrentTime() / this.getDuration());\n      this.fireEvent('zoom', pxPerSec);\n    }\n    /**\n     * Decode buffer and load\n     *\n     * @private\n     * @param {ArrayBuffer} arraybuffer Buffer to process\n     */\n\n  }, {\n    key: \"loadArrayBuffer\",\n    value: function loadArrayBuffer(arraybuffer) {\n      var _this9 = this;\n\n      this.decodeArrayBuffer(arraybuffer, function (data) {\n        if (!_this9.isDestroyed) {\n          _this9.loadDecodedBuffer(data);\n        }\n      });\n    }\n    /**\n     * Directly load an externally decoded AudioBuffer\n     *\n     * @private\n     * @param {AudioBuffer} buffer Buffer to process\n     * @emits WaveSurfer#ready\n     */\n\n  }, {\n    key: \"loadDecodedBuffer\",\n    value: function loadDecodedBuffer(buffer) {\n      this.backend.load(buffer);\n      this.drawBuffer();\n      this.isReady = true;\n      this.fireEvent('ready');\n    }\n    /**\n     * Loads audio data from a Blob or File object\n     *\n     * @param {Blob|File} blob Audio data\n     * @example\n     */\n\n  }, {\n    key: \"loadBlob\",\n    value: function loadBlob(blob) {\n      var _this10 = this;\n\n      // Create file reader\n      var reader = new FileReader();\n      reader.addEventListener('progress', function (e) {\n        return _this10.onProgress(e);\n      });\n      reader.addEventListener('load', function (e) {\n        return _this10.loadArrayBuffer(e.target.result);\n      });\n      reader.addEventListener('error', function () {\n        return _this10.fireEvent('error', 'Error reading file');\n      });\n      reader.readAsArrayBuffer(blob);\n      this.empty();\n    }\n    /**\n     * Loads audio and re-renders the waveform.\n     *\n     * @param {string|HTMLMediaElement} url The url of the audio file or the\n     * audio element with the audio\n     * @param {number[]|Number.<Array[]>} peaks Wavesurfer does not have to decode\n     * the audio to render the waveform if this is specified\n     * @param {?string} preload (Use with backend `MediaElement` and `MediaElementWebAudio`)\n     * `'none'|'metadata'|'auto'` Preload attribute for the media element\n     * @param {?number} duration The duration of the audio. This is used to\n     * render the peaks data in the correct size for the audio duration (as\n     * befits the current `minPxPerSec` and zoom value) without having to decode\n     * the audio.\n     * @returns {void}\n     * @throws Will throw an error if the `url` argument is empty.\n     * @example\n     * // uses fetch or media element to load file (depending on backend)\n     * wavesurfer.load('http://example.com/demo.wav');\n     *\n     * // setting preload attribute with media element backend and supplying\n     * // peaks\n     * wavesurfer.load(\n     *   'http://example.com/demo.wav',\n     *   [0.0218, 0.0183, 0.0165, 0.0198, 0.2137, 0.2888],\n     *   true\n     * );\n     */\n\n  }, {\n    key: \"load\",\n    value: function load(url, peaks, preload, duration) {\n      if (!url) {\n        throw new Error('url parameter cannot be empty');\n      }\n\n      this.empty();\n\n      if (preload) {\n        // check whether the preload attribute will be usable and if not log\n        // a warning listing the reasons why not and nullify the variable\n        var preloadIgnoreReasons = {\n          \"Preload is not 'auto', 'none' or 'metadata'\": ['auto', 'metadata', 'none'].indexOf(preload) === -1,\n          'Peaks are not provided': !peaks,\n          \"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'\": ['MediaElement', 'MediaElementWebAudio'].indexOf(this.params.backend) === -1,\n          'Url is not of type string': typeof url !== 'string'\n        };\n        var activeReasons = Object.keys(preloadIgnoreReasons).filter(function (reason) {\n          return preloadIgnoreReasons[reason];\n        });\n\n        if (activeReasons.length) {\n          // eslint-disable-next-line no-console\n          console.warn('Preload parameter of wavesurfer.load will be ignored because:\\n\\t- ' + activeReasons.join('\\n\\t- ')); // stop invalid values from being used\n\n          preload = null;\n        }\n      } // loadBuffer(url, peaks, duration) requires that url is a string\n      // but users can pass in a HTMLMediaElement to WaveSurfer\n\n\n      if (this.params.backend === 'WebAudio' && url instanceof HTMLMediaElement) {\n        url = url.src;\n      }\n\n      switch (this.params.backend) {\n        case 'WebAudio':\n          return this.loadBuffer(url, peaks, duration);\n\n        case 'MediaElement':\n        case 'MediaElementWebAudio':\n          return this.loadMediaElement(url, peaks, preload, duration);\n      }\n    }\n    /**\n     * Loads audio using Web Audio buffer backend.\n     *\n     * @private\n     * @emits WaveSurfer#waveform-ready\n     * @param {string} url URL of audio file\n     * @param {number[]|Number.<Array[]>} peaks Peaks data\n     * @param {?number} duration Optional duration of audio file\n     * @returns {void}\n     */\n\n  }, {\n    key: \"loadBuffer\",\n    value: function loadBuffer(url, peaks, duration) {\n      var _this11 = this;\n\n      var load = function load(action) {\n        if (action) {\n          _this11.tmpEvents.push(_this11.once('ready', action));\n        }\n\n        return _this11.getArrayBuffer(url, function (data) {\n          return _this11.loadArrayBuffer(data);\n        });\n      };\n\n      if (peaks) {\n        this.backend.setPeaks(peaks, duration);\n        this.drawBuffer();\n        this.fireEvent('waveform-ready');\n        this.tmpEvents.push(this.once('interaction', load));\n      } else {\n        return load();\n      }\n    }\n    /**\n     * Either create a media element, or load an existing media element.\n     *\n     * @private\n     * @emits WaveSurfer#waveform-ready\n     * @param {string|HTMLMediaElement} urlOrElt Either a path to a media file, or an\n     * existing HTML5 Audio/Video Element\n     * @param {number[]|Number.<Array[]>} peaks Array of peaks. Required to bypass web audio\n     * dependency\n     * @param {?boolean} preload Set to true if the preload attribute of the\n     * audio element should be enabled\n     * @param {?number} duration Optional duration of audio file\n     */\n\n  }, {\n    key: \"loadMediaElement\",\n    value: function loadMediaElement(urlOrElt, peaks, preload, duration) {\n      var _this12 = this;\n\n      var url = urlOrElt;\n\n      if (typeof urlOrElt === 'string') {\n        this.backend.load(url, this.mediaContainer, peaks, preload);\n      } else {\n        var elt = urlOrElt;\n        this.backend.loadElt(elt, peaks); // If peaks are not provided,\n        // url = element.src so we can get peaks with web audio\n\n        url = elt.src;\n      }\n\n      this.tmpEvents.push(this.backend.once('canplay', function () {\n        // ignore when backend was already destroyed\n        if (!_this12.backend.destroyed) {\n          _this12.drawBuffer();\n\n          _this12.isReady = true;\n\n          _this12.fireEvent('ready');\n        }\n      }), this.backend.once('error', function (err) {\n        return _this12.fireEvent('error', err);\n      })); // If peaks are provided, render them and fire the `waveform-ready` event.\n\n      if (peaks) {\n        this.backend.setPeaks(peaks, duration);\n        this.drawBuffer();\n        this.fireEvent('waveform-ready');\n      } // If no pre-decoded peaks are provided, or are provided with\n      // forceDecode flag, attempt to download the audio file and decode it\n      // with Web Audio.\n\n\n      if ((!peaks || this.params.forceDecode) && this.backend.supportsWebAudio()) {\n        this.getArrayBuffer(url, function (arraybuffer) {\n          _this12.decodeArrayBuffer(arraybuffer, function (buffer) {\n            _this12.backend.buffer = buffer;\n\n            _this12.backend.setPeaks(null);\n\n            _this12.drawBuffer();\n\n            _this12.fireEvent('waveform-ready');\n          });\n        });\n      }\n    }\n    /**\n     * Decode an array buffer and pass data to a callback\n     *\n     * @private\n     * @param {Object} arraybuffer The array buffer to decode\n     * @param {function} callback The function to call on complete\n     */\n\n  }, {\n    key: \"decodeArrayBuffer\",\n    value: function decodeArrayBuffer(arraybuffer, callback) {\n      var _this13 = this;\n\n      if (!this.isDestroyed) {\n        this.arraybuffer = arraybuffer;\n        this.backend.decodeArrayBuffer(arraybuffer, function (data) {\n          // Only use the decoded data if we haven't been destroyed or\n          // another decode started in the meantime\n          if (!_this13.isDestroyed && _this13.arraybuffer == arraybuffer) {\n            callback(data);\n            _this13.arraybuffer = null;\n          }\n        }, function () {\n          return _this13.fireEvent('error', 'Error decoding audiobuffer');\n        });\n      }\n    }\n    /**\n     * Load an array buffer using fetch and pass the result to a callback\n     *\n     * @param {string} url The URL of the file object\n     * @param {function} callback The function to call on complete\n     * @returns {util.fetchFile} fetch call\n     * @private\n     */\n\n  }, {\n    key: \"getArrayBuffer\",\n    value: function getArrayBuffer(url, callback) {\n      var _this14 = this;\n\n      var options = Object.assign({\n        url: url,\n        responseType: 'arraybuffer'\n      }, this.params.xhr);\n      var request = util.fetchFile(options);\n      this.currentRequest = request;\n      this.tmpEvents.push(request.on('progress', function (e) {\n        _this14.onProgress(e);\n      }), request.on('success', function (data) {\n        callback(data);\n        _this14.currentRequest = null;\n      }), request.on('error', function (e) {\n        _this14.fireEvent('error', e);\n\n        _this14.currentRequest = null;\n      }));\n      return request;\n    }\n    /**\n     * Called while the audio file is loading\n     *\n     * @private\n     * @param {Event} e Progress event\n     * @emits WaveSurfer#loading\n     */\n\n  }, {\n    key: \"onProgress\",\n    value: function onProgress(e) {\n      var percentComplete;\n\n      if (e.lengthComputable) {\n        percentComplete = e.loaded / e.total;\n      } else {\n        // Approximate progress with an asymptotic\n        // function, and assume downloads in the 1-3 MB range.\n        percentComplete = e.loaded / (e.loaded + 1000000);\n      }\n\n      this.fireEvent('loading', Math.round(percentComplete * 100), e.target);\n    }\n    /**\n     * Exports PCM data into a JSON array and optionally opens in a new window\n     * as valid JSON Blob instance.\n     *\n     * @param {number} length=1024 The scale in which to export the peaks\n     * @param {number} accuracy=10000\n     * @param {?boolean} noWindow Set to true to disable opening a new\n     * window with the JSON\n     * @param {number} start Start index\n     * @param {number} end End index\n     * @return {Promise} Promise that resolves with array of peaks\n     */\n\n  }, {\n    key: \"exportPCM\",\n    value: function exportPCM(length, accuracy, noWindow, start, end) {\n      length = length || 1024;\n      start = start || 0;\n      accuracy = accuracy || 10000;\n      noWindow = noWindow || false;\n      var peaks = this.backend.getPeaks(length, start, end);\n      var arr = [].map.call(peaks, function (val) {\n        return Math.round(val * accuracy) / accuracy;\n      });\n      return new Promise(function (resolve, reject) {\n        if (!noWindow) {\n          var blobJSON = new Blob([JSON.stringify(arr)], {\n            type: 'application/json;charset=utf-8'\n          });\n          var objURL = URL.createObjectURL(blobJSON);\n          window.open(objURL);\n          URL.revokeObjectURL(objURL);\n        }\n\n        resolve(arr);\n      });\n    }\n    /**\n     * Save waveform image as data URI.\n     *\n     * The default format is `'image/png'`. Other supported types are\n     * `'image/jpeg'` and `'image/webp'`.\n     *\n     * @param {string} format='image/png' A string indicating the image format.\n     * The default format type is `'image/png'`.\n     * @param {number} quality=1 A number between 0 and 1 indicating the image\n     * quality to use for image formats that use lossy compression such as\n     * `'image/jpeg'`` and `'image/webp'`.\n     * @param {string} type Image data type to return. Either 'dataURL' (default)\n     * or 'blob'.\n     * @return {string|string[]|Promise} When using `'dataURL'` type this returns\n     * a single data URL or an array of data URLs, one for each canvas. When using\n     * `'blob'` type this returns a `Promise` resolving with an array of `Blob`\n     * instances, one for each canvas.\n     */\n\n  }, {\n    key: \"exportImage\",\n    value: function exportImage(format, quality, type) {\n      if (!format) {\n        format = 'image/png';\n      }\n\n      if (!quality) {\n        quality = 1;\n      }\n\n      if (!type) {\n        type = 'dataURL';\n      }\n\n      return this.drawer.getImage(format, quality, type);\n    }\n    /**\n     * Cancel any fetch request currently in progress\n     */\n\n  }, {\n    key: \"cancelAjax\",\n    value: function cancelAjax() {\n      if (this.currentRequest && this.currentRequest.controller) {\n        // If the current request has a ProgressHandler, then its ReadableStream might need to be cancelled too\n        // See: Wavesurfer issue #2042\n        // See Firefox bug: https://bugzilla.mozilla.org/show_bug.cgi?id=1583815\n        if (this.currentRequest._reader) {\n          // Ignoring exceptions thrown by call to cancel()\n          this.currentRequest._reader.cancel().catch(function (err) {});\n        }\n\n        this.currentRequest.controller.abort();\n        this.currentRequest = null;\n      }\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"clearTmpEvents\",\n    value: function clearTmpEvents() {\n      this.tmpEvents.forEach(function (e) {\n        return e.un();\n      });\n    }\n    /**\n     * Display empty waveform.\n     */\n\n  }, {\n    key: \"empty\",\n    value: function empty() {\n      if (!this.backend.isPaused()) {\n        this.stop();\n        this.backend.disconnectSource();\n      }\n\n      this.isReady = false;\n      this.cancelAjax();\n      this.clearTmpEvents(); // empty drawer\n\n      this.drawer.progress(0);\n      this.drawer.setWidth(0);\n      this.drawer.drawPeaks({\n        length: this.drawer.getWidth()\n      }, 0);\n    }\n    /**\n     * Remove events, elements and disconnect WebAudio nodes.\n     *\n     * @emits WaveSurfer#destroy\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.destroyAllPlugins();\n      this.fireEvent('destroy');\n      this.cancelAjax();\n      this.clearTmpEvents();\n      this.unAll();\n\n      if (this.params.responsive !== false) {\n        window.removeEventListener('resize', this._onResize, true);\n        window.removeEventListener('orientationchange', this._onResize, true);\n      }\n\n      if (this.backend) {\n        this.backend.destroy(); // clears memory usage\n\n        this.backend = null;\n      }\n\n      if (this.drawer) {\n        this.drawer.destroy();\n      }\n\n      this.isDestroyed = true;\n      this.isReady = false;\n      this.arraybuffer = null;\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /** @private */\n\n    /** @private */\n\n    /**\n     * Instantiate this class, call its `init` function and returns it\n     *\n     * @param {WavesurferParams} params The wavesurfer parameters\n     * @return {Object} WaveSurfer instance\n     * @example const wavesurfer = WaveSurfer.create(params);\n     */\n    function create(params) {\n      var wavesurfer = new WaveSurfer(params);\n      return wavesurfer.init();\n    }\n    /**\n     * The library version number is available as a static property of the\n     * WaveSurfer class\n     *\n     * @type {String}\n     * @example\n     * console.log('Using wavesurfer.js ' + WaveSurfer.VERSION);\n     */\n\n  }]);\n\n  return WaveSurfer;\n}(util.Observer);\n\nexports.default = WaveSurfer;\nWaveSurfer.VERSION = \"5.2.0\";\nWaveSurfer.util = util;\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/webaudio.js\":\n/*!*************************!*\\\n  !*** ./src/webaudio.js ***!\n  \\*************************/\n/***/ ((module, exports, __webpack_require__) => {\n\n\"use strict\";\n\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.default = void 0;\n\nvar util = _interopRequireWildcard(__webpack_require__(/*! ./util */ \"./src/util/index.js\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n// using constants to prevent someone writing the string wrong\nvar PLAYING = 'playing';\nvar PAUSED = 'paused';\nvar FINISHED = 'finished';\n/**\n * WebAudio backend\n *\n * @extends {Observer}\n */\n\nvar WebAudio = /*#__PURE__*/function (_util$Observer) {\n  _inherits(WebAudio, _util$Observer);\n\n  var _super = _createSuper(WebAudio);\n\n  /**\n   * Construct the backend\n   *\n   * @param {WavesurferParams} params Wavesurfer parameters\n   */\n  function WebAudio(params) {\n    var _this$stateBehaviors, _this$states;\n\n    var _this;\n\n    _classCallCheck(this, WebAudio);\n\n    _this = _super.call(this);\n    /** @private */\n\n    _this.audioContext = null;\n    _this.offlineAudioContext = null;\n    _this.stateBehaviors = (_this$stateBehaviors = {}, _defineProperty(_this$stateBehaviors, PLAYING, {\n      init: function init() {\n        this.addOnAudioProcess();\n      },\n      getPlayedPercents: function getPlayedPercents() {\n        var duration = this.getDuration();\n        return this.getCurrentTime() / duration || 0;\n      },\n      getCurrentTime: function getCurrentTime() {\n        return this.startPosition + this.getPlayedTime();\n      }\n    }), _defineProperty(_this$stateBehaviors, PAUSED, {\n      init: function init() {\n        this.removeOnAudioProcess();\n      },\n      getPlayedPercents: function getPlayedPercents() {\n        var duration = this.getDuration();\n        return this.getCurrentTime() / duration || 0;\n      },\n      getCurrentTime: function getCurrentTime() {\n        return this.startPosition;\n      }\n    }), _defineProperty(_this$stateBehaviors, FINISHED, {\n      init: function init() {\n        this.removeOnAudioProcess();\n        this.fireEvent('finish');\n      },\n      getPlayedPercents: function getPlayedPercents() {\n        return 1;\n      },\n      getCurrentTime: function getCurrentTime() {\n        return this.getDuration();\n      }\n    }), _this$stateBehaviors);\n    _this.params = params;\n    /** ac: Audio Context instance */\n\n    _this.ac = params.audioContext || (_this.supportsWebAudio() ? _this.getAudioContext() : {});\n    /**@private */\n\n    _this.lastPlay = _this.ac.currentTime;\n    /** @private */\n\n    _this.startPosition = 0;\n    /** @private */\n\n    _this.scheduledPause = null;\n    /** @private */\n\n    _this.states = (_this$states = {}, _defineProperty(_this$states, PLAYING, Object.create(_this.stateBehaviors[PLAYING])), _defineProperty(_this$states, PAUSED, Object.create(_this.stateBehaviors[PAUSED])), _defineProperty(_this$states, FINISHED, Object.create(_this.stateBehaviors[FINISHED])), _this$states);\n    /** @private */\n\n    _this.buffer = null;\n    /** @private */\n\n    _this.filters = [];\n    /** gainNode: allows to control audio volume */\n\n    _this.gainNode = null;\n    /** @private */\n\n    _this.mergedPeaks = null;\n    /** @private */\n\n    _this.offlineAc = null;\n    /** @private */\n\n    _this.peaks = null;\n    /** @private */\n\n    _this.playbackRate = 1;\n    /** analyser: provides audio analysis information */\n\n    _this.analyser = null;\n    /** scriptNode: allows processing audio */\n\n    _this.scriptNode = null;\n    /** @private */\n\n    _this.source = null;\n    /** @private */\n\n    _this.splitPeaks = [];\n    /** @private */\n\n    _this.state = null;\n    /** @private */\n\n    _this.explicitDuration = params.duration;\n    /**\n     * Boolean indicating if the backend was destroyed.\n     */\n\n    _this.destroyed = false;\n    return _this;\n  }\n  /**\n   * Initialise the backend, called in `wavesurfer.createBackend()`\n   */\n\n\n  _createClass(WebAudio, [{\n    key: \"supportsWebAudio\",\n    value:\n    /** scriptBufferSize: size of the processing buffer */\n\n    /** audioContext: allows to process audio with WebAudio API */\n\n    /** @private */\n\n    /** @private */\n\n    /**\n     * Does the browser support this backend\n     *\n     * @return {boolean} Whether or not this browser supports this backend\n     */\n    function supportsWebAudio() {\n      return !!(window.AudioContext || window.webkitAudioContext);\n    }\n    /**\n     * Get the audio context used by this backend or create one\n     *\n     * @return {AudioContext} Existing audio context, or creates a new one\n     */\n\n  }, {\n    key: \"getAudioContext\",\n    value: function getAudioContext() {\n      if (!window.WaveSurferAudioContext) {\n        window.WaveSurferAudioContext = new (window.AudioContext || window.webkitAudioContext)();\n      }\n\n      return window.WaveSurferAudioContext;\n    }\n    /**\n     * Get the offline audio context used by this backend or create one\n     *\n     * @param {number} sampleRate The sample rate to use\n     * @return {OfflineAudioContext} Existing offline audio context, or creates\n     * a new one\n     */\n\n  }, {\n    key: \"getOfflineAudioContext\",\n    value: function getOfflineAudioContext(sampleRate) {\n      if (!window.WaveSurferOfflineAudioContext) {\n        window.WaveSurferOfflineAudioContext = new (window.OfflineAudioContext || window.webkitOfflineAudioContext)(1, 2, sampleRate);\n      }\n\n      return window.WaveSurferOfflineAudioContext;\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      this.createVolumeNode();\n      this.createScriptNode();\n      this.createAnalyserNode();\n      this.setState(PAUSED);\n      this.setPlaybackRate(this.params.audioRate);\n      this.setLength(0);\n    }\n    /** @private */\n\n  }, {\n    key: \"disconnectFilters\",\n    value: function disconnectFilters() {\n      if (this.filters) {\n        this.filters.forEach(function (filter) {\n          filter && filter.disconnect();\n        });\n        this.filters = null; // Reconnect direct path\n\n        this.analyser.connect(this.gainNode);\n      }\n    }\n    /**\n     * @private\n     *\n     * @param {string} state The new state\n     */\n\n  }, {\n    key: \"setState\",\n    value: function setState(state) {\n      if (this.state !== this.states[state]) {\n        this.state = this.states[state];\n        this.state.init.call(this);\n      }\n    }\n    /**\n     * Unpacked `setFilters()`\n     *\n     * @param {...AudioNode} filters One or more filters to set\n     */\n\n  }, {\n    key: \"setFilter\",\n    value: function setFilter() {\n      for (var _len = arguments.length, filters = new Array(_len), _key = 0; _key < _len; _key++) {\n        filters[_key] = arguments[_key];\n      }\n\n      this.setFilters(filters);\n    }\n    /**\n     * Insert custom Web Audio nodes into the graph\n     *\n     * @param {AudioNode[]} filters Packed filters array\n     * @example\n     * const lowpass = wavesurfer.backend.ac.createBiquadFilter();\n     * wavesurfer.backend.setFilter(lowpass);\n     */\n\n  }, {\n    key: \"setFilters\",\n    value: function setFilters(filters) {\n      // Remove existing filters\n      this.disconnectFilters(); // Insert filters if filter array not empty\n\n      if (filters && filters.length) {\n        this.filters = filters; // Disconnect direct path before inserting filters\n\n        this.analyser.disconnect(); // Connect each filter in turn\n\n        filters.reduce(function (prev, curr) {\n          prev.connect(curr);\n          return curr;\n        }, this.analyser).connect(this.gainNode);\n      }\n    }\n    /** Create ScriptProcessorNode to process audio */\n\n  }, {\n    key: \"createScriptNode\",\n    value: function createScriptNode() {\n      if (this.params.audioScriptProcessor) {\n        this.scriptNode = this.params.audioScriptProcessor;\n      } else {\n        if (this.ac.createScriptProcessor) {\n          this.scriptNode = this.ac.createScriptProcessor(WebAudio.scriptBufferSize);\n        } else {\n          this.scriptNode = this.ac.createJavaScriptNode(WebAudio.scriptBufferSize);\n        }\n      }\n\n      this.scriptNode.connect(this.ac.destination);\n    }\n    /** @private */\n\n  }, {\n    key: \"addOnAudioProcess\",\n    value: function addOnAudioProcess() {\n      var _this2 = this;\n\n      this.scriptNode.onaudioprocess = function () {\n        var time = _this2.getCurrentTime();\n\n        if (time >= _this2.getDuration()) {\n          _this2.setState(FINISHED);\n\n          _this2.fireEvent('pause');\n        } else if (time >= _this2.scheduledPause) {\n          _this2.pause();\n        } else if (_this2.state === _this2.states[PLAYING]) {\n          _this2.fireEvent('audioprocess', time);\n        }\n      };\n    }\n    /** @private */\n\n  }, {\n    key: \"removeOnAudioProcess\",\n    value: function removeOnAudioProcess() {\n      this.scriptNode.onaudioprocess = null;\n    }\n    /** Create analyser node to perform audio analysis */\n\n  }, {\n    key: \"createAnalyserNode\",\n    value: function createAnalyserNode() {\n      this.analyser = this.ac.createAnalyser();\n      this.analyser.connect(this.gainNode);\n    }\n    /**\n     * Create the gain node needed to control the playback volume.\n     *\n     */\n\n  }, {\n    key: \"createVolumeNode\",\n    value: function createVolumeNode() {\n      // Create gain node using the AudioContext\n      if (this.ac.createGain) {\n        this.gainNode = this.ac.createGain();\n      } else {\n        this.gainNode = this.ac.createGainNode();\n      } // Add the gain node to the graph\n\n\n      this.gainNode.connect(this.ac.destination);\n    }\n    /**\n     * Set the sink id for the media player\n     *\n     * @param {string} deviceId String value representing audio device id.\n     * @returns {Promise} A Promise that resolves to `undefined` when there\n     * are no errors.\n     */\n\n  }, {\n    key: \"setSinkId\",\n    value: function setSinkId(deviceId) {\n      if (deviceId) {\n        /**\n         * The webaudio API doesn't currently support setting the device\n         * output. Here we create an HTMLAudioElement, connect the\n         * webaudio stream to that element and setSinkId there.\n         */\n        var audio = new window.Audio();\n\n        if (!audio.setSinkId) {\n          return Promise.reject(new Error('setSinkId is not supported in your browser'));\n        }\n\n        audio.autoplay = true;\n        var dest = this.ac.createMediaStreamDestination();\n        this.gainNode.disconnect();\n        this.gainNode.connect(dest);\n        audio.srcObject = dest.stream;\n        return audio.setSinkId(deviceId);\n      } else {\n        return Promise.reject(new Error('Invalid deviceId: ' + deviceId));\n      }\n    }\n    /**\n     * Set the audio volume\n     *\n     * @param {number} value A floating point value between 0 and 1.\n     */\n\n  }, {\n    key: \"setVolume\",\n    value: function setVolume(value) {\n      this.gainNode.gain.setValueAtTime(value, this.ac.currentTime);\n    }\n    /**\n     * Get the current volume\n     *\n     * @return {number} value A floating point value between 0 and 1.\n     */\n\n  }, {\n    key: \"getVolume\",\n    value: function getVolume() {\n      return this.gainNode.gain.value;\n    }\n    /**\n     * Decode an array buffer and pass data to a callback\n     *\n     * @private\n     * @param {ArrayBuffer} arraybuffer The array buffer to decode\n     * @param {function} callback The function to call on complete.\n     * @param {function} errback The function to call on error.\n     */\n\n  }, {\n    key: \"decodeArrayBuffer\",\n    value: function decodeArrayBuffer(arraybuffer, callback, errback) {\n      if (!this.offlineAc) {\n        this.offlineAc = this.getOfflineAudioContext(this.ac && this.ac.sampleRate ? this.ac.sampleRate : 44100);\n      }\n\n      if ('webkitAudioContext' in window) {\n        // Safari: no support for Promise-based decodeAudioData enabled\n        // Enable it in Safari using the Experimental Features > Modern WebAudio API option\n        this.offlineAc.decodeAudioData(arraybuffer, function (data) {\n          return callback(data);\n        }, errback);\n      } else {\n        this.offlineAc.decodeAudioData(arraybuffer).then(function (data) {\n          return callback(data);\n        }).catch(function (err) {\n          return errback(err);\n        });\n      }\n    }\n    /**\n     * Set pre-decoded peaks\n     *\n     * @param {number[]|Number.<Array[]>} peaks Peaks data\n     * @param {?number} duration Explicit duration\n     */\n\n  }, {\n    key: \"setPeaks\",\n    value: function setPeaks(peaks, duration) {\n      if (duration != null) {\n        this.explicitDuration = duration;\n      }\n\n      this.peaks = peaks;\n    }\n    /**\n     * Set the rendered length (different from the length of the audio)\n     *\n     * @param {number} length The rendered length\n     */\n\n  }, {\n    key: \"setLength\",\n    value: function setLength(length) {\n      // No resize, we can preserve the cached peaks.\n      if (this.mergedPeaks && length == 2 * this.mergedPeaks.length - 1 + 2) {\n        return;\n      }\n\n      this.splitPeaks = [];\n      this.mergedPeaks = []; // Set the last element of the sparse array so the peak arrays are\n      // appropriately sized for other calculations.\n\n      var channels = this.buffer ? this.buffer.numberOfChannels : 1;\n      var c;\n\n      for (c = 0; c < channels; c++) {\n        this.splitPeaks[c] = [];\n        this.splitPeaks[c][2 * (length - 1)] = 0;\n        this.splitPeaks[c][2 * (length - 1) + 1] = 0;\n      }\n\n      this.mergedPeaks[2 * (length - 1)] = 0;\n      this.mergedPeaks[2 * (length - 1) + 1] = 0;\n    }\n    /**\n     * Compute the max and min value of the waveform when broken into <length> subranges.\n     *\n     * @param {number} length How many subranges to break the waveform into.\n     * @param {number} first First sample in the required range.\n     * @param {number} last Last sample in the required range.\n     * @return {number[]|Number.<Array[]>} Array of 2*<length> peaks or array of arrays of\n     * peaks consisting of (max, min) values for each subrange.\n     */\n\n  }, {\n    key: \"getPeaks\",\n    value: function getPeaks(length, first, last) {\n      if (this.peaks) {\n        return this.peaks;\n      }\n\n      if (!this.buffer) {\n        return [];\n      }\n\n      first = first || 0;\n      last = last || length - 1;\n      this.setLength(length);\n\n      if (!this.buffer) {\n        return this.params.splitChannels ? this.splitPeaks : this.mergedPeaks;\n      }\n      /**\n       * The following snippet fixes a buffering data issue on the Safari\n       * browser which returned undefined It creates the missing buffer based\n       * on 1 channel, 4096 samples and the sampleRate from the current\n       * webaudio context 4096 samples seemed to be the best fit for rendering\n       * will review this code once a stable version of Safari TP is out\n       */\n\n\n      if (!this.buffer.length) {\n        var newBuffer = this.createBuffer(1, 4096, this.sampleRate);\n        this.buffer = newBuffer.buffer;\n      }\n\n      var sampleSize = this.buffer.length / length;\n      var sampleStep = ~~(sampleSize / 10) || 1;\n      var channels = this.buffer.numberOfChannels;\n      var c;\n\n      for (c = 0; c < channels; c++) {\n        var peaks = this.splitPeaks[c];\n        var chan = this.buffer.getChannelData(c);\n        var i = void 0;\n\n        for (i = first; i <= last; i++) {\n          var start = ~~(i * sampleSize);\n          var end = ~~(start + sampleSize);\n          /**\n           * Initialize the max and min to the first sample of this\n           * subrange, so that even if the samples are entirely\n           * on one side of zero, we still return the true max and\n           * min values in the subrange.\n           */\n\n          var min = chan[start];\n          var max = min;\n          var j = void 0;\n\n          for (j = start; j < end; j += sampleStep) {\n            var value = chan[j];\n\n            if (value > max) {\n              max = value;\n            }\n\n            if (value < min) {\n              min = value;\n            }\n          }\n\n          peaks[2 * i] = max;\n          peaks[2 * i + 1] = min;\n\n          if (c == 0 || max > this.mergedPeaks[2 * i]) {\n            this.mergedPeaks[2 * i] = max;\n          }\n\n          if (c == 0 || min < this.mergedPeaks[2 * i + 1]) {\n            this.mergedPeaks[2 * i + 1] = min;\n          }\n        }\n      }\n\n      return this.params.splitChannels ? this.splitPeaks : this.mergedPeaks;\n    }\n    /**\n     * Get the position from 0 to 1\n     *\n     * @return {number} Position\n     */\n\n  }, {\n    key: \"getPlayedPercents\",\n    value: function getPlayedPercents() {\n      return this.state.getPlayedPercents.call(this);\n    }\n    /** @private */\n\n  }, {\n    key: \"disconnectSource\",\n    value: function disconnectSource() {\n      if (this.source) {\n        this.source.disconnect();\n      }\n    }\n    /**\n     * Destroy all references with WebAudio, disconnecting audio nodes and closing Audio Context\n     */\n\n  }, {\n    key: \"destroyWebAudio\",\n    value: function destroyWebAudio() {\n      this.disconnectFilters();\n      this.disconnectSource();\n      this.gainNode.disconnect();\n      this.scriptNode.disconnect();\n      this.analyser.disconnect(); // close the audioContext if closeAudioContext option is set to true\n\n      if (this.params.closeAudioContext) {\n        // check if browser supports AudioContext.close()\n        if (typeof this.ac.close === 'function' && this.ac.state != 'closed') {\n          this.ac.close();\n        } // clear the reference to the audiocontext\n\n\n        this.ac = null; // clear the actual audiocontext, either passed as param or the\n        // global singleton\n\n        if (!this.params.audioContext) {\n          window.WaveSurferAudioContext = null;\n        } else {\n          this.params.audioContext = null;\n        } // clear the offlineAudioContext\n\n\n        window.WaveSurferOfflineAudioContext = null;\n      }\n    }\n    /**\n     * This is called when wavesurfer is destroyed\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (!this.isPaused()) {\n        this.pause();\n      }\n\n      this.unAll();\n      this.buffer = null;\n      this.destroyed = true;\n      this.destroyWebAudio();\n    }\n    /**\n     * Loaded a decoded audio buffer\n     *\n     * @param {Object} buffer Decoded audio buffer to load\n     */\n\n  }, {\n    key: \"load\",\n    value: function load(buffer) {\n      this.startPosition = 0;\n      this.lastPlay = this.ac.currentTime;\n      this.buffer = buffer;\n      this.createSource();\n    }\n    /** @private */\n\n  }, {\n    key: \"createSource\",\n    value: function createSource() {\n      this.disconnectSource();\n      this.source = this.ac.createBufferSource(); // adjust for old browsers\n\n      this.source.start = this.source.start || this.source.noteGrainOn;\n      this.source.stop = this.source.stop || this.source.noteOff;\n      this.setPlaybackRate(this.playbackRate);\n      this.source.buffer = this.buffer;\n      this.source.connect(this.analyser);\n    }\n    /**\n     * @private\n     *\n     * some browsers require an explicit call to #resume before they will play back audio\n     */\n\n  }, {\n    key: \"resumeAudioContext\",\n    value: function resumeAudioContext() {\n      if (this.ac.state == 'suspended') {\n        this.ac.resume && this.ac.resume();\n      }\n    }\n    /**\n     * Used by `wavesurfer.isPlaying()` and `wavesurfer.playPause()`\n     *\n     * @return {boolean} Whether or not this backend is currently paused\n     */\n\n  }, {\n    key: \"isPaused\",\n    value: function isPaused() {\n      return this.state !== this.states[PLAYING];\n    }\n    /**\n     * Used by `wavesurfer.getDuration()`\n     *\n     * @return {number} Duration of loaded buffer\n     */\n\n  }, {\n    key: \"getDuration\",\n    value: function getDuration() {\n      if (this.explicitDuration) {\n        return this.explicitDuration;\n      }\n\n      if (!this.buffer) {\n        return 0;\n      }\n\n      return this.buffer.duration;\n    }\n    /**\n     * Used by `wavesurfer.seekTo()`\n     *\n     * @param {number} start Position to start at in seconds\n     * @param {number} end Position to end at in seconds\n     * @return {{start: number, end: number}} Object containing start and end\n     * positions\n     */\n\n  }, {\n    key: \"seekTo\",\n    value: function seekTo(start, end) {\n      if (!this.buffer) {\n        return;\n      }\n\n      this.scheduledPause = null;\n\n      if (start == null) {\n        start = this.getCurrentTime();\n\n        if (start >= this.getDuration()) {\n          start = 0;\n        }\n      }\n\n      if (end == null) {\n        end = this.getDuration();\n      }\n\n      this.startPosition = start;\n      this.lastPlay = this.ac.currentTime;\n\n      if (this.state === this.states[FINISHED]) {\n        this.setState(PAUSED);\n      }\n\n      return {\n        start: start,\n        end: end\n      };\n    }\n    /**\n     * Get the playback position in seconds\n     *\n     * @return {number} The playback position in seconds\n     */\n\n  }, {\n    key: \"getPlayedTime\",\n    value: function getPlayedTime() {\n      return (this.ac.currentTime - this.lastPlay) * this.playbackRate;\n    }\n    /**\n     * Plays the loaded audio region.\n     *\n     * @param {number} start Start offset in seconds, relative to the beginning\n     * of a clip.\n     * @param {number} end When to stop relative to the beginning of a clip.\n     */\n\n  }, {\n    key: \"play\",\n    value: function play(start, end) {\n      if (!this.buffer) {\n        return;\n      } // need to re-create source on each playback\n\n\n      this.createSource();\n      var adjustedTime = this.seekTo(start, end);\n      start = adjustedTime.start;\n      end = adjustedTime.end;\n      this.scheduledPause = end;\n      this.source.start(0, start);\n      this.resumeAudioContext();\n      this.setState(PLAYING);\n      this.fireEvent('play');\n    }\n    /**\n     * Pauses the loaded audio.\n     */\n\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      this.scheduledPause = null;\n      this.startPosition += this.getPlayedTime();\n\n      try {\n        this.source && this.source.stop(0);\n      } catch (err) {// Calling stop can throw the following 2 errors:\n        // - RangeError (The value specified for when is negative.)\n        // - InvalidStateNode (The node has not been started by calling start().)\n        // We can safely ignore both errors, because:\n        // - The range is surely correct\n        // - The node might not have been started yet, in which case we just want to carry on without causing any trouble.\n      }\n\n      this.setState(PAUSED);\n      this.fireEvent('pause');\n    }\n    /**\n     * Returns the current time in seconds relative to the audio-clip's\n     * duration.\n     *\n     * @return {number} The current time in seconds\n     */\n\n  }, {\n    key: \"getCurrentTime\",\n    value: function getCurrentTime() {\n      return this.state.getCurrentTime.call(this);\n    }\n    /**\n     * Returns the current playback rate. (0=no playback, 1=normal playback)\n     *\n     * @return {number} The current playback rate\n     */\n\n  }, {\n    key: \"getPlaybackRate\",\n    value: function getPlaybackRate() {\n      return this.playbackRate;\n    }\n    /**\n     * Set the audio source playback rate.\n     *\n     * @param {number} value The playback rate to use\n     */\n\n  }, {\n    key: \"setPlaybackRate\",\n    value: function setPlaybackRate(value) {\n      this.playbackRate = value || 1;\n      this.source && this.source.playbackRate.setValueAtTime(this.playbackRate, this.ac.currentTime);\n    }\n    /**\n     * Set a point in seconds for playback to stop at.\n     *\n     * @param {number} end Position to end at\n     * @version 3.3.0\n     */\n\n  }, {\n    key: \"setPlayEnd\",\n    value: function setPlayEnd(end) {\n      this.scheduledPause = end;\n    }\n  }]);\n\n  return WebAudio;\n}(util.Observer);\n\nexports.default = WebAudio;\nWebAudio.scriptBufferSize = 256;\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./node_modules/debounce/index.js\":\n/*!****************************************!*\\\n  !*** ./node_modules/debounce/index.js ***!\n  \\****************************************/\n/***/ ((module) => {\n\n/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n// Adds compatibility for ES modules\ndebounce.debounce = debounce;\n\nmodule.exports = debounce;\n\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module is referenced by other modules so it can't be inlined\n/******/ \tvar __webpack_exports__ = __webpack_require__(\"./src/wavesurfer.js\");\n/******/ \t\n/******/ \treturn __webpack_exports__;\n/******/ })()\n;\n});\n//# sourceMappingURL=wavesurfer.js.map"]},"metadata":{},"sourceType":"module"}